<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"xiaojianzheng.cn","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.8.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script><meta name="description" content="1.GBase8s简介1.1开发背景南大通用安全数据库管理系统（简称 GBase 8s），是具有完全自主知识产权 的数据库产品，该产品符合 SQL92&#x2F;99、ODBC、OLEDB、JDBC、ADO.NET 等国际 数据库规范和开发接口，参照国际主流数据库产品定义，提供完备的数据存储 和数据管理功能。 1.2GBase 8s 特性简介索引技术升级：支持 B 型树索引、R 型树索引、森林树（FOT）索"><meta property="og:type" content="article"><meta property="og:title" content="GBase8s"><meta property="og:url" content="http://xiaojianzheng.cn/2023/01/15/%E5%9B%BD%E4%BA%A7%E6%95%B0%E6%8D%AE%E5%BA%93-GBase8s/index.html"><meta property="og:site_name" content="JIAHE"><meta property="og:description" content="1.GBase8s简介1.1开发背景南大通用安全数据库管理系统（简称 GBase 8s），是具有完全自主知识产权 的数据库产品，该产品符合 SQL92&#x2F;99、ODBC、OLEDB、JDBC、ADO.NET 等国际 数据库规范和开发接口，参照国际主流数据库产品定义，提供完备的数据存储 和数据管理功能。 1.2GBase 8s 特性简介索引技术升级：支持 B 型树索引、R 型树索引、森林树（FOT）索"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660804704818-6cbcf134-9c39-4190-b43d-9643fad80733.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=362&id=M7cmb&margin=%5Bobject%20Object%5D&name=image.png&originHeight=411&originWidth=714&originalType=binary&ratio=1&rotation=0&showTitle=false&size=145561&status=done&style=none&taskId=ub60db18b-d4cc-40d3-886c-00f9a626fcb&title=&width=629"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660805020513-00fada35-6a5d-4700-b0f9-c46e2c230dcf.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=351&id=xMWAX&margin=%5Bobject%20Object%5D&name=image.png&originHeight=702&originWidth=1868&originalType=binary&ratio=1&rotation=0&showTitle=false&size=864062&status=done&style=none&taskId=ud4bee5b2-cae6-4a43-a259-0aa81abb885&title=&width=934"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660805085134-3e808f5c-e52b-490c-aa3d-1567c1981ffd.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=342&id=QoCh2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=684&originWidth=904&originalType=binary&ratio=1&rotation=0&showTitle=false&size=356125&status=done&style=none&taskId=u23952135-ad6c-49dc-beed-1e90c1f135c&title=&width=452"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660805433962-defe0d79-cea8-4c10-bd1a-f11d711ffce1.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=421&id=zFnEs&margin=%5Bobject%20Object%5D&name=image.png&originHeight=842&originWidth=1356&originalType=binary&ratio=1&rotation=0&showTitle=false&size=469709&status=done&style=none&taskId=u58a4b1f2-0cc0-42da-9b52-e5d99774360&title=&width=678"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660806856662-e5f10e1b-da72-4b9e-9482-3918a924b080.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=422&id=TqF6i&margin=%5Bobject%20Object%5D&name=image.png&originHeight=844&originWidth=824&originalType=binary&ratio=1&rotation=0&showTitle=false&size=343422&status=done&style=none&taskId=u4076df24-8a63-4785-86f1-d03cbfee51b&title=&width=412"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660807168010-986efb4c-b54f-40c0-b647-982aa7976e8c.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=422&id=xRPBY&margin=%5Bobject%20Object%5D&name=image.png&originHeight=844&originWidth=848&originalType=binary&ratio=1&rotation=0&showTitle=false&size=393880&status=done&style=none&taskId=ud7d963ed-37e2-4878-8e95-c8353575fd6&title=&width=424"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660807228740-a54ad384-50d4-4b75-9787-95496fa6fa85.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=433&id=PUpQq&margin=%5Bobject%20Object%5D&name=image.png&originHeight=866&originWidth=1662&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1029070&status=done&style=none&taskId=uf8d985e1-141d-4dde-ac28-e74b29d6ecb&title=&width=831"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660813158025-af2f82fe-0a28-4968-a4bf-1c9428849a98.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=896&id=V5LjI&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1792&originWidth=828&originalType=binary&ratio=1&rotation=0&showTitle=false&size=104233&status=done&style=none&taskId=u9acd3747-d3f8-4fff-a416-73e045e27c7&title=&width=414"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660813742230-08a46e22-6d34-4c67-bbff-5cd493362526.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=403&id=DcKEr&margin=%5Bobject%20Object%5D&name=image.png&originHeight=806&originWidth=1232&originalType=binary&ratio=1&rotation=0&showTitle=false&size=282371&status=done&style=none&taskId=u32a6e43b-6798-4d3e-b73f-0025a1eb8b8&title=&width=616"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660813959549-04c6992c-e62e-4faf-b060-dd0145632472.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=353&id=u93e63fc2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=706&originWidth=1112&originalType=binary&ratio=1&rotation=0&showTitle=false&size=297312&status=done&style=none&taskId=u5a9b0564-aca3-4bbe-a481-4403bc33162&title=&width=556"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660813947703-4367e283-f9bd-4550-bacf-10510b4e6f21.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=354&id=u30c3d8e6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=708&originWidth=1134&originalType=binary&ratio=1&rotation=0&showTitle=false&size=319872&status=done&style=none&taskId=u55b37b4a-01f5-486d-9e16-44983f7d1a5&title=&width=567"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660813937091-3967ba30-a971-4c6d-97d8-59b58a50827f.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=333&id=u87cbdd98&margin=%5Bobject%20Object%5D&name=image.png&originHeight=666&originWidth=1104&originalType=binary&ratio=1&rotation=0&showTitle=false&size=256910&status=done&style=none&taskId=u55cbadde-2c0e-4c4a-959f-3a01eccd520&title=&width=552"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660813987610-c5130af3-1b0a-447c-8a4f-3b73fd7fcfe2.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=350&id=u73907ac2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=700&originWidth=1114&originalType=binary&ratio=1&rotation=0&showTitle=false&size=271612&status=done&style=none&taskId=u8de9220d-3e35-46e8-81d2-0eae979a4f0&title=&width=557"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660814103633-c1aaae21-9933-43fe-9f9c-717909bbaa03.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=333&id=uea036eaa&margin=%5Bobject%20Object%5D&name=image.png&originHeight=666&originWidth=1112&originalType=binary&ratio=1&rotation=0&showTitle=false&size=200873&status=done&style=none&taskId=u57370dd4-121a-4bd4-9230-559a344bd95&title=&width=556"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660814130108-dbe56f2b-819c-4a5f-8d87-2458d0cf4490.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=331&id=uc14953f7&margin=%5Bobject%20Object%5D&name=image.png&originHeight=662&originWidth=1112&originalType=binary&ratio=1&rotation=0&showTitle=false&size=253588&status=done&style=none&taskId=ub1cbc8d7-8f21-49cc-bc0d-7dbef10fc94&title=&width=556"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660814165105-9438b5ee-cae4-4030-8c78-7c9454860a7c.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=352&id=u7e2eafad&margin=%5Bobject%20Object%5D&name=image.png&originHeight=704&originWidth=1106&originalType=binary&ratio=1&rotation=0&showTitle=false&size=284557&status=done&style=none&taskId=u7a5cf1e0-4811-47f8-b586-82bfdb3fe2f&title=&width=553"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660814189064-472139cd-8bf9-4244-8473-771eca12a339.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=337&id=uc8bd00db&margin=%5Bobject%20Object%5D&name=image.png&originHeight=674&originWidth=1124&originalType=binary&ratio=1&rotation=0&showTitle=false&size=364311&status=done&style=none&taskId=u7a0d552f-9106-45a0-bee9-d2311fe83d6&title=&width=562"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660808768796-afa03867-fe6b-41ab-9b4a-d6c0cfdbca70.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=328&id=EsoW2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=656&originWidth=1450&originalType=binary&ratio=1&rotation=0&showTitle=false&size=598610&status=done&style=none&taskId=u93f407ee-2b6b-4db7-a1c1-878375a8994&title=&width=725"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660808720735-25a491f5-1e33-4dfe-9dd1-038b3ad847e9.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=304&id=owwpZ&margin=%5Bobject%20Object%5D&name=image.png&originHeight=608&originWidth=1410&originalType=binary&ratio=1&rotation=0&showTitle=false&size=553742&status=done&style=none&taskId=u42585d93-6fd6-4b00-b6fc-6776ec9b387&title=&width=705"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660809255429-e9699183-35d3-4fe3-ac13-270bdabda9e0.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=299&id=zYBsi&margin=%5Bobject%20Object%5D&name=image.png&originHeight=598&originWidth=1064&originalType=binary&ratio=1&rotation=0&showTitle=false&size=469996&status=done&style=none&taskId=u3d2e261c-71d9-4d23-90e5-7710e06c867&title=&width=532"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660809621436-40e6efe9-3676-4001-a9c7-7695972a47cc.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=218&id=G24c4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=167&originWidth=387&originalType=binary&ratio=1&rotation=0&showTitle=false&size=28553&status=done&style=none&taskId=uc544056b-7830-4144-b26e-f99c0b78505&title=&width=504.5"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660809633378-44d1d7db-232a-4f04-aef7-3258ce46e06f.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=197&id=p3BcA&margin=%5Bobject%20Object%5D&name=image.png&originHeight=223&originWidth=517&originalType=binary&ratio=1&rotation=0&showTitle=false&size=34643&status=done&style=none&taskId=uac17e087-1d4b-4639-9fc5-f035a7169a2&title=&width=456.5"><meta property="article:published_time" content="2023-01-15T08:47:08.740Z"><meta property="article:modified_time" content="2023-01-15T08:47:08.740Z"><meta property="article:author" content="JIAHE"><meta property="article:tag" content="JIAHE"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660804704818-6cbcf134-9c39-4190-b43d-9643fad80733.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=362&id=M7cmb&margin=%5Bobject%20Object%5D&name=image.png&originHeight=411&originWidth=714&originalType=binary&ratio=1&rotation=0&showTitle=false&size=145561&status=done&style=none&taskId=ub60db18b-d4cc-40d3-886c-00f9a626fcb&title=&width=629"><link rel="canonical" href="http://xiaojianzheng.cn/2023/01/15/%E5%9B%BD%E4%BA%A7%E6%95%B0%E6%8D%AE%E5%BA%93-GBase8s/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://xiaojianzheng.cn/2023/01/15/%E5%9B%BD%E4%BA%A7%E6%95%B0%E6%8D%AE%E5%BA%93-GBase8s/","path":"2023/01/15/国产数据库-GBase8s/","title":"GBase8s"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>GBase8s | JIAHE</title><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">JIAHE</p><i class="logo-line"></i></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-导航"><a href="/navigation/" rel="section"><i class="fa fa-location-arrow fa-fw"></i>导航</a></li><li class="menu-item menu-item-文档"><a href="/docs/" rel="section"><i class="fa fa-book fa-fw fa-fw"></i>文档</a></li><li class="menu-item menu-item-应用下载"><a href="/app-download/" rel="section"><i class="fas fa-download fa-fw fa-fw"></i>应用下载</a></li><li class="menu-item menu-item-cheat-sheet"><a href="/cheat-sheet/" rel="section"><i class="fas fa-pen fa-fw"></i>Cheat Sheet</a></li><li class="menu-item menu-item-软件安装部署"><a href="/software-install-and-deploy/" rel="section"><i class="fab fa-windows fa-fw"></i>软件安装部署</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-GBase8s%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">1.GBase8s简介</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E5%BC%80%E5%8F%91%E8%83%8C%E6%99%AF"><span class="nav-number">1.1.</span> <span class="nav-text">1.1开发背景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2GBase-8s-%E7%89%B9%E6%80%A7%E7%AE%80%E4%BB%8B"><span class="nav-number">1.2.</span> <span class="nav-text">1.2GBase 8s 特性简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E5%95%86%E7%94%A8%E5%9B%BD%E4%BA%A7%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E6%AF%94"><span class="nav-number">1.3.</span> <span class="nav-text">1.3商用国产数据库对比</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-GBase8s%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86%E5%8F%8A%E6%9E%B6%E6%9E%84"><span class="nav-number">2.</span> <span class="nav-text">2.GBase8s数据库原理及架构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1GBase8s%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%B6%E6%9E%84%E6%A6%82%E8%A7%88"><span class="nav-number">2.1.</span> <span class="nav-text">2.1GBase8s数据库架构概览</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2GBase8s%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1%E7%BB%84%E4%BB%B6"><span class="nav-number">2.2.</span> <span class="nav-text">2.2GBase8s数据库服务组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3%E8%BF%9B%E7%A8%8B%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BB%93%E6%9E%84"><span class="nav-number">2.3.</span> <span class="nav-text">2.3进程与多线程结构</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-number">3.</span><span class="nav-text"></span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-GBase8s%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85"><span class="nav-number">4.</span> <span class="nav-text">3.GBase8s数据库安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85"><span class="nav-number">4.1.</span> <span class="nav-text">3.1手动安装</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-1%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87"><span class="nav-number">4.1.1.</span> <span class="nav-text">3.1.1安装前准备</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E5%BF%AB%E9%80%9F%E5%AE%89%E8%A3%85"><span class="nav-number">4.2.</span> <span class="nav-text">3.2快速安装</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-GBase8s%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E7%AE%A1%E7%90%86%E5%92%8C%E6%93%8D%E4%BD%9C%E6%A8%A1%E5%BC%8F"><span class="nav-number">5.</span> <span class="nav-text">4.GBase8s数据库基本管理和操作模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E7%AE%A1%E7%90%86"><span class="nav-number">5.1.</span> <span class="nav-text">4.1数据库基本管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-1%E5%90%AF%E5%8A%A8%E5%92%8C%E5%81%9C%E6%AD%A2GBase8s%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">5.1.1.</span> <span class="nav-text">4.1.1启动和停止GBase8s数据库服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-2%E6%A3%80%E6%9F%A5%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%8A%B6%E6%80%81"><span class="nav-number">5.1.2.</span> <span class="nav-text">4.1.2检查服务器状态</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2%E6%93%8D%E4%BD%9C%E6%A8%A1%E5%BC%8F"><span class="nav-number">5.2.</span> <span class="nav-text">4.2操作模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-1%E7%A6%BB%E7%BA%BF%E6%A8%A1%E5%BC%8F-Offline"><span class="nav-number">5.2.1.</span> <span class="nav-text">4.2.1离线模式(Offline)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-2%E5%9C%A8%E7%BA%BF%E6%A8%A1%E5%BC%8F-Online"><span class="nav-number">5.2.2.</span> <span class="nav-text">4.2.2在线模式(Online)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-3%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F-Administrative-%E5%8D%95%E7%94%A8%E6%88%B7%E6%A8%A1%E5%BC%8F-Single-User"><span class="nav-number">5.2.3.</span> <span class="nav-text">4.2.3管理模式(Administrative) &#x2F; 单用户模式(Single-User)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-4%E9%9D%99%E6%80%81%E6%A8%A1%E5%BC%8F-Quiescent"><span class="nav-number">5.2.4.</span> <span class="nav-text">4.2.4静态模式(Quiescent)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-5%E5%88%9D%E5%A7%8B%E5%8C%96%E6%A8%A1%E5%BC%8F-Initialization"><span class="nav-number">5.2.5.</span> <span class="nav-text">4.2.5初始化模式(Initialization)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-6%E6%81%A2%E5%A4%8D%E6%A8%A1%E5%BC%8F-Recovery"><span class="nav-number">5.2.6.</span> <span class="nav-text">4.2.6恢复模式(Recovery)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-7%E5%85%B3%E9%97%AD%E6%A8%A1%E5%BC%8F-Shutdown"><span class="nav-number">5.2.7.</span> <span class="nav-text">4.2.7关闭模式(Shutdown)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3%E6%A8%A1%E5%BC%8F%E5%88%87%E6%8D%A2"><span class="nav-number">5.3.</span> <span class="nav-text">4.3模式切换</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-GBase8s%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D"><span class="nav-number">6.</span> <span class="nav-text">5.GBase8s备份与恢复</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1GBase8s%E6%94%AF%E6%8C%81%E4%B8%89%E4%B8%AA%E5%A4%87%E4%BB%BD%E7%BA%A7%E5%88%AB"><span class="nav-number">6.1.</span> <span class="nav-text">5.1GBase8s支持三个备份级别</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-1-0-%E7%BA%A7%E5%A4%87%E4%BB%BD"><span class="nav-number">6.1.1.</span> <span class="nav-text">5.1.1 0 级备份</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-2-1-%E7%BA%A7%E5%A4%87%E4%BB%BD"><span class="nav-number">6.1.2.</span> <span class="nav-text">5.1.2 1 级备份</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-3-2-%E7%BA%A7%E5%A4%87%E4%BB%BD"><span class="nav-number">6.1.3.</span> <span class="nav-text">5.1.3 2 级备份</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-4-%E5%B8%B8%E7%94%A8%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D%E6%A8%A1%E5%BC%8F%E5%92%8C%E6%97%B6%E9%95%BF%E6%AF%94%E8%BE%83"><span class="nav-number">6.1.4.</span> <span class="nav-text">5.1.4 常用的两种备份恢复模式和时长比较</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-5%E9%80%BB%E8%BE%91%E6%97%A5%E5%BF%97%E5%A4%87%E4%BB%BD"><span class="nav-number">6.1.5.</span> <span class="nav-text">5.1.5逻辑日志备份</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-6%E5%8F%8A%E6%97%B6%E5%A4%87%E4%BB%BD%E9%80%BB%E8%BE%91%E6%97%A5%E5%BF%97%E7%9A%84%E5%BF%85%E8%A6%81%E6%80%A7"><span class="nav-number">6.1.6.</span> <span class="nav-text">5.1.6及时备份逻辑日志的必要性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2GBase8s%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D"><span class="nav-number">6.2.</span> <span class="nav-text">5.2GBase8s数据库恢复</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-2-1%E7%89%A9%E7%90%86%E6%81%A2%E5%A4%8D"><span class="nav-number">6.2.1.</span> <span class="nav-text">5.2.1物理恢复</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-2-2%E9%80%BB%E8%BE%91%E6%81%A2%E5%A4%8D"><span class="nav-number">6.2.2.</span> <span class="nav-text">5.2.2逻辑恢复</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3onbar%E5%A4%87%E4%BB%BD-%E6%81%A2%E5%A4%8D%E5%B7%A5%E5%85%B7"><span class="nav-number">6.3.</span> <span class="nav-text">5.3onbar备份&#x2F;恢复工具</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-1onbar%E5%A4%87%E4%BB%BD%E5%B7%A5%E5%85%B7%E4%BC%98%E7%82%B9%EF%BC%9A"><span class="nav-number">6.3.1.</span> <span class="nav-text">5.3.1onbar备份工具优点：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-2%E9%85%8D%E7%BD%AEPSM%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E5%99%A8"><span class="nav-number">6.3.2.</span> <span class="nav-text">5.3.2配置PSM存储管理器</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="JIAHE" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">JIAHE</p><div class="site-description" itemprop="description">Collection & Reuse</div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">108</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">99</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-blogroll site-overview-item animated"><div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="https://cook.aiurs.co/" title="https:&#x2F;&#x2F;cook.aiurs.co&#x2F;" rel="noopener" target="_blank">程序员做饭指南</a></li><li class="links-of-blogroll-item"> <a href="https://www.baidu.com/" title="https:&#x2F;&#x2F;www.baidu.com&#x2F;" rel="noopener" target="_blank">Baidu</a></li><li class="links-of-blogroll-item"> <a href="https://cn.bing.com/" title="https:&#x2F;&#x2F;cn.bing.com&#x2F;" rel="noopener" target="_blank">Bing</a></li><li class="links-of-blogroll-item"> <a href="https://www.google.com/" title="https:&#x2F;&#x2F;www.google.com&#x2F;" rel="noopener" target="_blank">Google</a></li><li class="links-of-blogroll-item"> <a href="https://zh.wikipedia.org/wiki/Wikipedia:%E9%A6%96%E9%A1%B5" title="https:&#x2F;&#x2F;zh.wikipedia.org&#x2F;wiki&#x2F;Wikipedia:%E9%A6%96%E9%A1%B5" rel="noopener" target="_blank">Wiki</a></li><li class="links-of-blogroll-item"> <a href="https://projectlombok.org/" title="https:&#x2F;&#x2F;projectlombok.org&#x2F;" rel="noopener" target="_blank">lombok</a></li><li class="links-of-blogroll-item"> <a href="https://logging.apache.org/log4j/2.x/" title="https:&#x2F;&#x2F;logging.apache.org&#x2F;log4j&#x2F;2.x&#x2F;" rel="noopener" target="_blank">log4j</a></li><li class="links-of-blogroll-item"> <a href="http://logback.qos.ch/" title="http:&#x2F;&#x2F;logback.qos.ch&#x2F;" rel="noopener" target="_blank">logback</a></li><li class="links-of-blogroll-item"> <a href="https://junit.org/junit5/" title="https:&#x2F;&#x2F;junit.org&#x2F;junit5&#x2F;" rel="noopener" target="_blank">junit</a></li><li class="links-of-blogroll-item"> <a href="https://element.eleme.cn/#/zh-CN" title="https:&#x2F;&#x2F;element.eleme.cn&#x2F;#&#x2F;zh-CN" rel="noopener" target="_blank">ElementUI</a></li><li class="links-of-blogroll-item"> <a href="https://zipkin.io/" title="https:&#x2F;&#x2F;zipkin.io&#x2F;" rel="noopener" target="_blank">Zipkin</a></li><li class="links-of-blogroll-item"> <a href="https://www.selenium.dev/zh-cn/" title="https:&#x2F;&#x2F;www.selenium.dev&#x2F;zh-cn&#x2F;" rel="noopener" target="_blank">Selenium</a></li><li class="links-of-blogroll-item"> <a href="https://nacos.io/zh-cn/docs/what-is-nacos.html" title="https:&#x2F;&#x2F;nacos.io&#x2F;zh-cn&#x2F;docs&#x2F;what-is-nacos.html" rel="noopener" target="_blank">Nacos</a></li><li class="links-of-blogroll-item"> <a href="https://dev.mysql.com/downloads/" title="https:&#x2F;&#x2F;dev.mysql.com&#x2F;downloads&#x2F;" rel="noopener" target="_blank">MySQL-Download</a></li><li class="links-of-blogroll-item"> <a href="https://redis.io/" title="https:&#x2F;&#x2F;redis.io&#x2F;" rel="noopener" target="_blank">Redis</a></li><li class="links-of-blogroll-item"> <a href="https://www.jetbrains.com/help/idea/discover-intellij-idea.html" title="https:&#x2F;&#x2F;www.jetbrains.com&#x2F;help&#x2F;idea&#x2F;discover-intellij-idea.html" rel="noopener" target="_blank">IDEA-Document</a></li><li class="links-of-blogroll-item"> <a href="https://jdk.java.net/" title="https:&#x2F;&#x2F;jdk.java.net&#x2F;" rel="noopener" target="_blank">JDK</a></li><li class="links-of-blogroll-item"> <a href="https://www.java.com/en/download/manual.jsp" title="https:&#x2F;&#x2F;www.java.com&#x2F;en&#x2F;download&#x2F;manual.jsp" rel="noopener" target="_blank">JDK8</a></li><li class="links-of-blogroll-item"> <a href="https://dev.java/" title="https:&#x2F;&#x2F;dev.java&#x2F;" rel="noopener" target="_blank">JAVA</a></li><li class="links-of-blogroll-item"> <a href="https://www.oracle.com/java/technologies/downloads/archive/" title="https:&#x2F;&#x2F;www.oracle.com&#x2F;java&#x2F;technologies&#x2F;downloads&#x2F;archive&#x2F;" rel="noopener" target="_blank">JDK-Oracle</a></li><li class="links-of-blogroll-item"> <a href="https://poi.apache.org/components/index.html" title="https:&#x2F;&#x2F;poi.apache.org&#x2F;components&#x2F;index.html" rel="noopener" target="_blank">POI</a></li><li class="links-of-blogroll-item"> <a href="https://assertj.github.io/doc/" title="https:&#x2F;&#x2F;assertj.github.io&#x2F;doc&#x2F;" rel="noopener" target="_blank">AssertJ</a></li><li class="links-of-blogroll-item"> <a href="https://docshome.gitbook.io/nginx-docs/" title="https:&#x2F;&#x2F;docshome.gitbook.io&#x2F;nginx-docs&#x2F;" rel="noopener" target="_blank">Nginx-CN</a></li><li class="links-of-blogroll-item"> <a href="https://github.com/cglib/cglib" title="https:&#x2F;&#x2F;github.com&#x2F;cglib&#x2F;cglib" rel="noopener" target="_blank">cglib</a></li><li class="links-of-blogroll-item"> <a href="https://docs.gitlab.com/ee/api/api_resources.html" title="https:&#x2F;&#x2F;docs.gitlab.com&#x2F;ee&#x2F;api&#x2F;api_resources.html" rel="noopener" target="_blank">Gitlab Api</a></li><li class="links-of-blogroll-item"> <a href="http://mockjs.com/examples.html" title="http:&#x2F;&#x2F;mockjs.com&#x2F;examples.html" rel="noopener" target="_blank">Mockjs Example</a></li></ul></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div><a role="button" class="book-mark-link book-mark-link-fixed"></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://xiaojianzheng.cn/2023/01/15/%E5%9B%BD%E4%BA%A7%E6%95%B0%E6%8D%AE%E5%BA%93-GBase8s/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="JIAHE"><meta itemprop="description" content="Collection & Reuse"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="JIAHE"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> GBase8s</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2023-01-15 16:47:08" itemprop="dateCreated datePublished" datetime="2023-01-15T16:47:08+08:00">2023-01-15</time></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="1-GBase8s简介"><a href="#1-GBase8s简介" class="headerlink" title="1.GBase8s简介"></a>1.GBase8s简介</h2><h3 id="1-1开发背景"><a href="#1-1开发背景" class="headerlink" title="1.1开发背景"></a>1.1开发背景</h3><p>南大通用安全数据库管理系统（简称 GBase 8s），是具有完全自主知识产权 的数据库产品，该产品符合 SQL92/99、ODBC、OLEDB、JDBC、ADO.NET 等国际 数据库规范和开发接口，参照国际主流数据库产品定义，提供完备的数据存储 和数据管理功能。</p><h3 id="1-2GBase-8s-特性简介"><a href="#1-2GBase-8s-特性简介" class="headerlink" title="1.2GBase 8s 特性简介"></a>1.2GBase 8s 特性简介</h3><p>索引技术升级：支持 B 型树索引、R 型树索引、森林树（FOT）索 引以及用户自定义索引<br>高可用技术增强：共享存储集群技术（SSC）：新增支持共享存储架构高可用技术， 当主机发生故障后，它可以快速实现接管。另外，可以非常容易 地配置多个SSC，实现负载均衡的功能。<br>灾备技术（HAC）：新增支持同城异地灾备技术，系统可以支持多 台 HAC 备机，进一步提高可用性。<br>企业级复制技术（ER）：新增支持数据库复制技术，通过读取数据 库日志的方式实现数据同步功能，支持根据需要复制指定的数据库列和数据库行，支持主从复制、汇总复制以及双向复制。<br>数据类型：新增支持 JSON 数据类型、XML 数据类型、日历类型 （timeserial）、list 类型、节点类型（node）、Set类型、Row 类型。</p><h3 id="1-3商用国产数据库对比"><a href="#1-3商用国产数据库对比" class="headerlink" title="1.3商用国产数据库对比"></a>1.3商用国产数据库对比</h3><p>《中移动测试报告》<br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660804704818-6cbcf134-9c39-4190-b43d-9643fad80733.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=362&id=M7cmb&margin=%5Bobject%20Object%5D&name=image.png&originHeight=411&originWidth=714&originalType=binary&ratio=1&rotation=0&showTitle=false&size=145561&status=done&style=none&taskId=ub60db18b-d4cc-40d3-886c-00f9a626fcb&title=&width=629" alt="image.png"><br>8项功能测试，GBase8s集群5项排名第一<br>6项性能测试，GBase8s集群4项排名第一<br>压力测试，GBase8s集群排名第二，Oracle第一<br>7项运维管理工具，GBase8s集群全部满足，排名第一</p><h2 id="2-GBase8s数据库原理及架构"><a href="#2-GBase8s数据库原理及架构" class="headerlink" title="2.GBase8s数据库原理及架构"></a>2.GBase8s数据库原理及架构</h2><h3 id="2-1GBase8s数据库架构概览"><a href="#2-1GBase8s数据库架构概览" class="headerlink" title="2.1GBase8s数据库架构概览"></a>2.1GBase8s数据库架构概览</h3><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660805020513-00fada35-6a5d-4700-b0f9-c46e2c230dcf.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=351&id=xMWAX&margin=%5Bobject%20Object%5D&name=image.png&originHeight=702&originWidth=1868&originalType=binary&ratio=1&rotation=0&showTitle=false&size=864062&status=done&style=none&taskId=ud4bee5b2-cae6-4a43-a259-0aa81abb885&title=&width=934" alt="image.png"></p><h3 id="2-2GBase8s数据库服务组件"><a href="#2-2GBase8s数据库服务组件" class="headerlink" title="2.2GBase8s数据库服务组件"></a>2.2GBase8s数据库服务组件</h3><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660805085134-3e808f5c-e52b-490c-aa3d-1567c1981ffd.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=342&id=QoCh2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=684&originWidth=904&originalType=binary&ratio=1&rotation=0&showTitle=false&size=356125&status=done&style=none&taskId=u23952135-ad6c-49dc-beed-1e90c1f135c&title=&width=452" alt="image.png"><br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660805433962-defe0d79-cea8-4c10-bd1a-f11d711ffce1.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=421&id=zFnEs&margin=%5Bobject%20Object%5D&name=image.png&originHeight=842&originWidth=1356&originalType=binary&ratio=1&rotation=0&showTitle=false&size=469709&status=done&style=none&taskId=u58a4b1f2-0cc0-42da-9b52-e5d99774360&title=&width=678" alt="image.png"><br>共享内存:<br>缓存数据库表的数据<br>维护和控制进程资源<br>•共享内存技术是进程间通信的一种常用技术<br>•专业数据库产品通常采用共享内存技术<br>•数据库服务进程可以通过共享内存来共享数据<br>•通过缓存磁盘数据来有效减少磁盘I/O以提升性能<br>•共享内存可以最大限度地为进程间通信提供便捷</p><p>驻留段（Resident Segment）<br>•常驻内存, 不会被操作系统换出到磁盘上<br>•固定大小，不随工作量而增加或减少<br>虚拟段（Virtual Segment）<br>•包含与线程信息和与Session相关的信息<br>•虚拟段里的页可被操作系统换出到磁盘上<br>•GBase8s运行时可能添加新的虚拟段<br>缓冲池（Buffer Pool）<br>•数据缓冲<br>•被缓冲的数据在所有VP和线程间共享<br>消息段（Message Segment）<br>•用于IPC 通信的消息缓冲区</p><p>虚拟处理器进程：<br>执行所有计算和管理任务<br>存储:<br>存储数据库服务信息<br>存储用户数据</p><h3 id="2-3进程与多线程结构"><a href="#2-3进程与多线程结构" class="headerlink" title="2.3进程与多线程结构"></a>2.3进程与多线程结构</h3><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660806856662-e5f10e1b-da72-4b9e-9482-3918a924b080.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=422&id=TqF6i&margin=%5Bobject%20Object%5D&name=image.png&originHeight=844&originWidth=824&originalType=binary&ratio=1&rotation=0&showTitle=false&size=343422&status=done&style=none&taskId=u4076df24-8a63-4785-86f1-d03cbfee51b&title=&width=412" alt="image.png"><br>传统的多进程服务<br>每个连接需要启动新的进程为连接提供服务<br>每个进程的起始(Initialization) 与终止(Termination)均耗费系统资源<br>进程间通信需执行Context Switch，耗费系统资源<br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660807168010-986efb4c-b54f-40c0-b647-982aa7976e8c.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=422&id=xRPBY&margin=%5Bobject%20Object%5D&name=image.png&originHeight=844&originWidth=848&originalType=binary&ratio=1&rotation=0&showTitle=false&size=393880&status=done&style=none&taskId=ud7d963ed-37e2-4878-8e95-c8353575fd6&title=&width=424" alt="image.png"></p><p>基于线程的数据库服务<br>每个用户连接代表一个新的线程的起始为新连接提供服务。<br>每个线程的起始与终止仅耗费较小的系统资源<br>线程间通信无需执行Context Switch，大大减少系统资源的耗费</p><h2 id=""><a href="#" class="headerlink" title=""></a><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660807228740-a54ad384-50d4-4b75-9787-95496fa6fa85.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=433&id=PUpQq&margin=%5Bobject%20Object%5D&name=image.png&originHeight=866&originWidth=1662&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1029070&status=done&style=none&taskId=uf8d985e1-141d-4dde-ac28-e74b29d6ecb&title=&width=831" alt="image.png"></h2><h2 id="3-GBase8s数据库安装"><a href="#3-GBase8s数据库安装" class="headerlink" title="3.GBase8s数据库安装"></a>3.GBase8s数据库安装</h2><p><a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1fKNvfLURmLLoPeLyyEkOYA">https://pan.baidu.com/s/1fKNvfLURmLLoPeLyyEkOYA</a> a6ev<br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660813158025-af2f82fe-0a28-4968-a4bf-1c9428849a98.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=896&id=V5LjI&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1792&originWidth=828&originalType=binary&ratio=1&rotation=0&showTitle=false&size=104233&status=done&style=none&taskId=u9acd3747-d3f8-4fff-a416-73e045e27c7&title=&width=414" alt="image.png"></p><h3 id="3-1手动安装"><a href="#3-1手动安装" class="headerlink" title="3.1手动安装"></a>3.1手动安装</h3><h4 id="3-1-1安装前准备"><a href="#3-1-1安装前准备" class="headerlink" title="3.1.1安装前准备"></a>3.1.1安装前准备</h4><p>设置主机名与网络<br>配置/etc/hosts，确认主机名hostname与IP地址对应匹配<br>关闭selinux<br>临时关闭selinux，省却对数据库软件安装的影响<br>/etc/selinux/config中的SELINUX=disabled<br>关闭或者配置防火墙<br>注：不同的系统，关闭方式不一样<br>如：RHEL6中service iptables stop<br> RHEL7中systemctl stop firewalld</p><p>创建gbasedbt组及gbasedbt用户，设置用户密码<br>使用root用户创建gbasedbt组<br>groupadd -g 1000 gbasedbt<br>创建gbasedbt用户<br>useradd -g gbasedbt -u 1000 -d /home/gbase -m -s /bin/bash gbasedbt<br>设置gbasedbt用户密码<br>passwd gbasedbt<br>注：在2.0.1a2_2版本以上，密码需要符合密码复杂度要求（包含大、小写字母，数字且不小于8个字符）</p><p>在命令行状态下执行软件安装：解压软件包 ./ids_install<br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660813742230-08a46e22-6d34-4c67-bbff-5cd493362526.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=403&id=DcKEr&margin=%5Bobject%20Object%5D&name=image.png&originHeight=806&originWidth=1232&originalType=binary&ratio=1&rotation=0&showTitle=false&size=282371&status=done&style=none&taskId=u32a6e43b-6798-4d3e-b73f-0025a1eb8b8&title=&width=616" alt="image.png"><br>开始<br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660813959549-04c6992c-e62e-4faf-b060-dd0145632472.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=353&id=u93e63fc2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=706&originWidth=1112&originalType=binary&ratio=1&rotation=0&showTitle=false&size=297312&status=done&style=none&taskId=u5a9b0564-aca3-4bbe-a481-4403bc33162&title=&width=556" alt="image.png"><br>查看、接受协议<br>Y 接受协议，继续<br>安装位置<br>使用默认的安装目录/opt/GBASE/gbase<br>注：/opt/GBASE目录应当存在，否则会有提示父目录不存在，可先创建/opt/GBASE目录<br>Y 确认安装目录<br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660813947703-4367e283-f9bd-4550-bacf-10510b4e6f21.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=354&id=u30c3d8e6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=708&originWidth=1134&originalType=binary&ratio=1&rotation=0&showTitle=false&size=319872&status=done&style=none&taskId=u55b37b4a-01f5-486d-9e16-44983f7d1a5&title=&width=567" alt="image.png"><br>选择安装方式<br>默认为1，典型安装<br>选择创建实例<br>默认为创建实例<br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660813937091-3967ba30-a971-4c6d-97d8-59b58a50827f.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=333&id=u87cbdd98&margin=%5Bobject%20Object%5D&name=image.png&originHeight=666&originWidth=1104&originalType=binary&ratio=1&rotation=0&showTitle=false&size=256910&status=done&style=none&taskId=u55cbadde-2c0e-4c4a-959f-3a01eccd520&title=&width=552" alt="image.png"><br>指定用户密码<br>系统中无gbasedbt用户，指定gbasedbt用户密码，系统将自动创建用户<br>注：若系统中有gbasedbt用户，将会使用这个用户，建议事先创建好用户</p><p>选择用户数量<br>数据库的用户（系统将按其配置资源）<br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660813987610-c5130af3-1b0a-447c-8a4f-3b73fd7fcfe2.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=350&id=u73907ac2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=700&originWidth=1114&originalType=binary&ratio=1&rotation=0&showTitle=false&size=271612&status=done&style=none&taskId=u8de9220d-3e35-46e8-81d2-0eae979a4f0&title=&width=557" alt="image.png"><br>安装就绪<br>安装就绪，将安装在指定目录</p><p>初始化数据库<br>自动初始化数据库<br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660814103633-c1aaae21-9933-43fe-9f9c-717909bbaa03.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=333&id=uea036eaa&margin=%5Bobject%20Object%5D&name=image.png&originHeight=666&originWidth=1112&originalType=binary&ratio=1&rotation=0&showTitle=false&size=200873&status=done&style=none&taskId=u57370dd4-121a-4bd4-9230-559a344bd95&title=&width=556" alt="image.png"><br>初始化完成<br>初始化完成，在指定的安装目录下，生成相应的数据库环境变量文件<br> 自动初始化的服务名称是ol_gbasedbt1210，多次自动初始化的服务名称为ol_gbasedbt1210_N(为数字递增)<br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660814130108-dbe56f2b-819c-4a5f-8d87-2458d0cf4490.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=331&id=uc14953f7&margin=%5Bobject%20Object%5D&name=image.png&originHeight=662&originWidth=1112&originalType=binary&ratio=1&rotation=0&showTitle=false&size=253588&status=done&style=none&taskId=ub1cbc8d7-8f21-49cc-bc0d-7dbef10fc94&title=&width=556" alt="image.png"><br>完成安装指示<br>安装完成</p><p>确认安装及初始化<br>使用gbasedbt加载指定的环境变量，通过数据库命令确认数据库已经安装及初始化完成。<br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660814165105-9438b5ee-cae4-4030-8c78-7c9454860a7c.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=352&id=u7e2eafad&margin=%5Bobject%20Object%5D&name=image.png&originHeight=704&originWidth=1106&originalType=binary&ratio=1&rotation=0&showTitle=false&size=284557&status=done&style=none&taskId=u7a5cf1e0-4811-47f8-b586-82bfdb3fe2f&title=&width=553" alt="image.png"><br>自动初始化的数据库服务名称GBASEDBTSERVER是ol_gbasedbt1210<br>数据库服务名（端口号）是在/etc/services中注册的对应端口号<br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660814189064-472139cd-8bf9-4244-8473-771eca12a339.png#clientId=u3eb7ba0f-29e4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=337&id=uc8bd00db&margin=%5Bobject%20Object%5D&name=image.png&originHeight=674&originWidth=1124&originalType=binary&ratio=1&rotation=0&showTitle=false&size=364311&status=done&style=none&taskId=u7a0d552f-9106-45a0-bee9-d2311fe83d6&title=&width=562" alt="image.png"></p><p><strong>GBase8s 实例配置常见问题处理</strong><br>查看错误日志onstat -m或者$GBASEDBTDIR/tmp/online.实例名.log</p><p><strong>1、</strong>rootpath路径问题</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">13:29:08 Warning: stat() failed for chunk file &#x2F;opt&#x2F;peixun&#x2F;dbs&#x2F;rootdbs</span><br><span class="line">13:29:08 Cannot Open Primary Chunk &#39;&#x2F;opt&#x2F;peixun&#x2F;dbs&#x2F;rootdbs&#39;, errno &#x3D; 2</span><br></pre></td></tr></table></figure><p><strong>处理方法：</strong>检查rootpath路径是否存在，如果chunk存在是否是gbasedbt属主且是660的权限</p><p><strong>2、</strong>环境变量问题</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[gbasedbt@localhost ~]$ oninit -ivy</span><br><span class="line">-bash: oninit: command not found</span><br><span class="line">[gbasedbt@localhostdbs]$ cd$GBASEDBTDIR&#x2F;etc</span><br><span class="line">[gbasedbt@localhostetc]$ pwd</span><br><span class="line">&#x2F;etc</span><br></pre></td></tr></table></figure><p><strong>处理方法：</strong>检查环境变量未生效，执行环境变量source ~/.bash_profile</p><p>3.dbaccess链接数据库、数据库空间创建挂载失败</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">PASSWORD &gt;&gt;</span><br><span class="line">Enter the password associated with the user identifier.</span><br><span class="line">----------------------------------Press CTRL-W for Help -------------------------------</span><br><span class="line">demo_on</span><br><span class="line">gbaseserver</span><br><span class="line">Running . .</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[gbasedbt@localhost ]$ onspaces -c -d datadbs -p &#x2F;opt&#x2F;liu&#x2F;dbs&#x2F;datadbs -o 0 -s 1000</span><br><span class="line">Your evaluation license will expire on 2017-06-24 00:00:00</span><br><span class="line">shared memory not initialized for GBASEDBTSERVER&#39;liu</span><br></pre></td></tr></table></figure><p>•GBase8s 软件的安装<br>•准备: gbasedbt用户，安装路径，安装包和解压<br>•安装: 执行ids_install，设置安装路径，选择典型不安装实例方式<br>•GBase8s 服务器端的配置<br>•程序文件修改<br>•环境变量profile: 实例名、安装路径、onconfig和sqlhosts名称<br>•ONCONFIG: ROOTPATH、SERVERNUM、实例名、MSGPATH等<br>•SQLHOSTS: 实例名、连接方式、IP地址、端口号<br>•启动实例<br>•创建dbspace: llogdbs、plogdbs、datadbs、tmpdbs等</p><h3 id="3-2快速安装"><a href="#3-2快速安装" class="headerlink" title="3.2快速安装"></a>3.2快速安装</h3><p><a target="_blank" rel="noopener" href="https://haigui.yuque.com/attachments/yuque/0/2022/sh/1582987/1660812993032-e59184a6-ef0b-469e-b12c-d2fb262becdb.sh?_lake_card=%7B%22src%22:%22https://haigui.yuque.com/attachments/yuque/0/2022/sh/1582987/1660812993032-e59184a6-ef0b-469e-b12c-d2fb262becdb.sh%22,%22name%22:%22AutoInit_GBase8s.sh%22,%22size%22:11836,%22type%22:%22text/x-sh%22,%22ext%22:%22sh%22,%22source%22:%22%22,%22status%22:%22done%22,%22mode%22:%22title%22,%22download%22:true,%22taskId%22:%22u4ee0737c-c3e1-4959-8c1c-13e39870672%22,%22taskType%22:%22upload%22,%22__spacing%22:%22both%22,%22id%22:%22lLFd1%22,%22margin%22:%7B%22top%22:true,%22bottom%22:true%7D,%22card%22:%22file%22%7D">AutoInit_GBase8s.sh</a><a target="_blank" rel="noopener" href="https://haigui.yuque.com/attachments/yuque/0/2022/sh/1582987/1660812993308-698268a6-abbb-490d-bb80-7bd5685067f8.sh?_lake_card=%7B%22src%22:%22https://haigui.yuque.com/attachments/yuque/0/2022/sh/1582987/1660812993308-698268a6-abbb-490d-bb80-7bd5685067f8.sh%22,%22name%22:%22CleanAll.sh%22,%22size%22:612,%22type%22:%22text/x-sh%22,%22ext%22:%22sh%22,%22source%22:%22%22,%22status%22:%22done%22,%22mode%22:%22title%22,%22download%22:true,%22taskId%22:%22u098670ea-71a9-4c41-a3b5-5265897dc27%22,%22taskType%22:%22upload%22,%22__spacing%22:%22both%22,%22id%22:%22M9Mvy%22,%22margin%22:%7B%22top%22:true,%22bottom%22:true%7D,%22card%22:%22file%22%7D">CleanAll.sh</a></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sh AutoInit_GBase8s.sh  -d &#x2F;gbase&#x2F;dbs -i &#x2F;gbase&#x2F;gbase8s</span><br></pre></td></tr></table></figure><h2 id="4-GBase8s数据库基本管理和操作模式"><a href="#4-GBase8s数据库基本管理和操作模式" class="headerlink" title="4.GBase8s数据库基本管理和操作模式"></a>4.GBase8s数据库基本管理和操作模式</h2><h3 id="4-1数据库基本管理"><a href="#4-1数据库基本管理" class="headerlink" title="4.1数据库基本管理"></a>4.1数据库基本管理</h3><h4 id="4-1-1启动和停止GBase8s数据库服务器"><a href="#4-1-1启动和停止GBase8s数据库服务器" class="headerlink" title="4.1.1启动和停止GBase8s数据库服务器"></a>4.1.1启动和停止GBase8s数据库服务器</h4><p>启动GBase8s<br>在第一次启动GBase8s中，需要初始化硬盘<br>在以后的启动GBase8s中，不需要初始化硬盘<br>oninit -vy<br>停止<br>onmode–ky</p><h4 id="4-1-2检查服务器状态"><a href="#4-1-2检查服务器状态" class="headerlink" title="4.1.2检查服务器状态"></a>4.1.2检查服务器状态</h4><p>•查看GBase8s最基本的状态信息onstat–<br>•查看GBase8s的虚拟CPU信息onstat–g glo</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">onstat -g glo</span><br><span class="line">GBase Database Server Version 12.10.FC4G1AEE --On-Line --Up 00:00:42 --1156248 Kbytes</span><br><span class="line">MT global info:</span><br><span class="line">sessions threads vps lngspins time</span><br><span class="line">0 60 16 0 42</span><br><span class="line">sched calls thread switches yield 0 yield n yield forever</span><br><span class="line">total: 9459 9014 347 1299 3656</span><br><span class="line">per sec: 39 29 0 26 0</span><br><span class="line">Virtual processor summary:</span><br><span class="line">class vps usercpu syscpu total</span><br><span class="line">cpu 2 0.91 0.69 1.60</span><br><span class="line">aio 9 0.00 0.19 0.19</span><br><span class="line">lio 1 0.00 0.38 0.38</span><br><span class="line">pio 1 0.00 0.00 0.00</span><br><span class="line">soc1 0.00 0.02 0.02</span><br><span class="line">adm1 0.00 0.00 0.00</span><br><span class="line">msc1 0.00 0.00 0.00</span><br><span class="line">total 16 0.91 1.28 2.19</span><br></pre></td></tr></table></figure><p>•查看GBase8s的内存使用情况onstat-g seg、ipcs</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">onstat -g seg</span><br><span class="line">GBase Database Server Version 12.10.FC4G1AEE --On-Line --Up 00:03:21 --1156248 Kbytes</span><br><span class="line">Segment Summary:</span><br><span class="line">id key addrsize ovhdclass blkusedblkfree</span><br><span class="line">458752 52564801 44000000 212004864 2917784 R 51759 0</span><br><span class="line">491521 52564802 50a2f000 104857600 1230408 V 8402 17198</span><br><span class="line">524290 52564803 56e2f000 113287168 1 B 27658 0</span><br><span class="line">557059 52564804 5da39000 753848320 1 B 184045 0</span><br><span class="line">Total: --1183997952 --271864 17198</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ipcs</span><br><span class="line">------Shared Memory Segments --------</span><br><span class="line">key shmidowner perms bytes nattchstatus</span><br><span class="line">0x52564801 458752 root 660 212004864 16</span><br><span class="line">0x52564802 491521 root 660 104857600 16</span><br><span class="line">0x52564803 524290 root 660 113287168 16</span><br><span class="line">0x52564804 557059 root 660 753848320 16</span><br></pre></td></tr></table></figure><p>•查看GBase8s的dbspace和chunk的信息onstat–d</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">onstat -d</span><br><span class="line">GBase Database Server Version 12.10.FC4G1AEE --On-Line --Up 00:09:02 --1156248 Kbytes</span><br><span class="line">Dbspaces</span><br><span class="line">address number flags fchunknchunkspgsizeflags owner name</span><br><span class="line">5118e028 1 0x70001 1 1 2048 N BA gbasedbtrootdbs</span><br><span class="line">52489028 2 0x60001 2 1 2048 N PBA gbasedbtplogdbs</span><br><span class="line">52489258 3 0x42001 3 1 2048 N BA gbasedbtllogdbs</span><br><span class="line">52489b18 7 0x70001 7 1 8192N BA gbasedbtdatadbs</span><br><span class="line">52489d48 8 0x60001 8 1 8192N BA gbasedbttmpdbs</span><br><span class="line">5248b028 9 0x68001 9 1 2048 N SBA gbasedbtsbspace</span><br><span class="line">6 active, 2047 maximum</span><br><span class="line">Chunks</span><br><span class="line">address chunk&#x2F;dbsoffset size free bpagesflags pathname</span><br><span class="line">5118e258 1 1 0 150000 139340 PO-B--&#x2F;data&#x2F;rootdbs</span><br><span class="line">5248b258 2 2 0 524288 0 PO-B--&#x2F;data&#x2F;plogdbs</span><br><span class="line">5248c028 3 3 0 524288 24235 PO-B--&#x2F;data&#x2F;llogdbs</span><br><span class="line">52490028 7 7 0 655360 655307 PO-B--&#x2F;data&#x2F;datadbs</span><br><span class="line">52491028 8 8 0 131072 131019 PO-B--&#x2F;data&#x2F;tmpdbs</span><br><span class="line">52492028 9 9 0 524288 488925 488925 POSB--&#x2F;data&#x2F;sbspace</span><br><span class="line">Metadata 3469 2581 3469 6 active, 32766 maximum</span><br></pre></td></tr></table></figure><p>•查看GBase8s的log信息onstat–l</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">onstat -l</span><br><span class="line">GBase Database Server Version 12.10.FC4G1AEE --On-Line --Up 00:10:57 --1156248 Kbytes</span><br><span class="line">Physical Logging</span><br><span class="line">Buffer bufusedbufsizenumpagesnumwritspages&#x2F;io</span><br><span class="line">P-1 0 64 64 3 21.33</span><br><span class="line">phybeginphysizephyposphyused%used</span><br><span class="line">7:53 358200 114 0 0.00</span><br><span class="line">Logical Logging</span><br><span class="line">Buffer bufusedbufsizenumrecsnumpagesnumwritsrecs&#x2F;pages pages&#x2F;io</span><br><span class="line">L-2 0 32 21655 1669 112 13.0 14.9</span><br><span class="line">Subsystem numrecsLog Space used</span><br><span class="line">OLDRSAM 21615 3264284</span><br><span class="line">HA 5 220</span><br><span class="line">DDL 35 12180</span><br><span class="line">address number flags uniqidbegin size used %used</span><br><span class="line">5131ff88 7 U-B----7 8:53 2560 1 0.04</span><br><span class="line">52375970 8 U-B----8 8:2613 2560 1 0.04</span><br><span class="line">523759d8 9 U-B----9 8:5173 2560 1 0.04</span><br><span class="line">52375a40 10 U-B----10 8:7733 2560 40 1.56</span><br><span class="line">  52375aa8 11 U---C-L 11 8:10293 2560 1676 65.47</span><br></pre></td></tr></table></figure><h3 id="4-2操作模式"><a href="#4-2操作模式" class="headerlink" title="4.2操作模式"></a>4.2操作模式</h3><p>GBase8s的操作模式：<br>•GBase8s操作模式包括4种主要操作模式和3个过渡模式<br>•支持多种操作模式并且可以在各操作模式之间切换</p><h4 id="4-2-1离线模式-Offline"><a href="#4-2-1离线模式-Offline" class="headerlink" title="4.2.1离线模式(Offline)"></a>4.2.1离线模式(Offline)</h4><p>•数据库服务器没有运行，用户不能访问。</p><h4 id="4-2-2在线模式-Online"><a href="#4-2-2在线模式-Online" class="headerlink" title="4.2.2在线模式(Online)"></a>4.2.2在线模式(Online)</h4><p>数据库服务器的常规运行状态，所有用户都可以访问数据库服务器。</p><h4 id="4-2-3管理模式-Administrative-单用户模式-Single-User"><a href="#4-2-3管理模式-Administrative-单用户模式-Single-User" class="headerlink" title="4.2.3管理模式(Administrative) / 单用户模式(Single-User)"></a>4.2.3管理模式(Administrative) / 单用户模式(Single-User)</h4><p>•只允许管理员用户（gbasedbt用户）连接数据库，不允许普通用户连接数据库;<br>•应用场景：管理员用户可在该模式下连接到数据库，通过SQL语句维护数据库，同时保证维护期间没有其他普通用户登录数据库。</p><h4 id="4-2-4静态模式-Quiescent"><a href="#4-2-4静态模式-Quiescent" class="headerlink" title="4.2.4静态模式(Quiescent)"></a>4.2.4静态模式(Quiescent)</h4><p>系统不允许任何用户连接到数据库服务器；<br>•应用场景：管理员用户可在该模式下执行命令行程序维护数据库（如：onspaces, ontape，onparams），同时保证维护期间没有任何用户连接到数据库。</p><h4 id="4-2-5初始化模式-Initialization"><a href="#4-2-5初始化模式-Initialization" class="headerlink" title="4.2.5初始化模式(Initialization)"></a>4.2.5初始化模式(Initialization)</h4><p>将服务器从离线模式切换到其它三种主要模式过程中的模式，在该模式期间，会发生共享内存初始化，也可以包括磁盘初始化。</p><h4 id="4-2-6恢复模式-Recovery"><a href="#4-2-6恢复模式-Recovery" class="headerlink" title="4.2.6恢复模式(Recovery)"></a>4.2.6恢复模式(Recovery)</h4><p>若服务器上次是异常离线的，则在从离线模式切换至其它三种主要模式时，服务器会进入该模式进行快速恢复。</p><h4 id="4-2-7关闭模式-Shutdown"><a href="#4-2-7关闭模式-Shutdown" class="headerlink" title="4.2.7关闭模式(Shutdown)"></a>4.2.7关闭模式(Shutdown)</h4><p>数据库服务器从在线模式切换至静态模式过程中的模式。在该模式下，当前用户可以访问数据库服务器，但是新用户不能访问数据库服务器。</p><h3 id="4-3模式切换"><a href="#4-3模式切换" class="headerlink" title="4.3模式切换"></a>4.3模式切换</h3><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660808768796-afa03867-fe6b-41ab-9b4a-d6c0cfdbca70.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=328&id=EsoW2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=656&originWidth=1450&originalType=binary&ratio=1&rotation=0&showTitle=false&size=598610&status=done&style=none&taskId=u93f407ee-2b6b-4db7-a1c1-878375a8994&title=&width=725" alt="image.png"></p><ol><li>进入管理模式：oninit-j</li><li>进入静态模式：oninit–s</li><li>进入在线模式：①. oninit②. onmode -m<br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660808720735-25a491f5-1e33-4dfe-9dd1-038b3ad847e9.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=304&id=owwpZ&margin=%5Bobject%20Object%5D&name=image.png&originHeight=608&originWidth=1410&originalType=binary&ratio=1&rotation=0&showTitle=false&size=553742&status=done&style=none&taskId=u42585d93-6fd6-4b00-b6fc-6776ec9b387&title=&width=705" alt="image.png"></li><li>进入管理模式：onmode-j</li><li>进入静态模式：onmode–s(缓慢方式）onmode–u(立即方式)</li><li>进入离线模式：onmode-k<h2 id="5-GBase8s备份与恢复"><a href="#5-GBase8s备份与恢复" class="headerlink" title="5.GBase8s备份与恢复"></a>5.GBase8s备份与恢复</h2><h3 id="5-1GBase8s支持三个备份级别"><a href="#5-1GBase8s支持三个备份级别" class="headerlink" title="5.1GBase8s支持三个备份级别"></a>5.1GBase8s支持三个备份级别</h3><h4 id="5-1-1-0-级备份"><a href="#5-1-1-0-级备份" class="headerlink" title="5.1.1 0 级备份"></a>5.1.1 0 级备份</h4>0 级备份将备份指定存储空间内所有包含数据的已使用的页。<h4 id="5-1-2-1-级备份"><a href="#5-1-2-1-级备份" class="headerlink" title="5.1.2 1 级备份"></a>5.1.2 1 级备份</h4>1 级备份只备份自上次指定的存储空间进行0 级备份后更改的数据。<h4 id="5-1-3-2-级备份"><a href="#5-1-3-2-级备份" class="headerlink" title="5.1.3  2 级备份"></a>5.1.3 2 级备份</h4>2 级备份只备份自上次指定的存储空间进行1 级备份后更改的数据。<h4 id="5-1-4-常用的两种备份恢复模式和时长比较"><a href="#5-1-4-常用的两种备份恢复模式和时长比较" class="headerlink" title="5.1.4 常用的两种备份恢复模式和时长比较"></a>5.1.4 常用的两种备份恢复模式和时长比较</h4><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660809255429-e9699183-35d3-4fe3-ac13-270bdabda9e0.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=299&id=zYBsi&margin=%5Bobject%20Object%5D&name=image.png&originHeight=598&originWidth=1064&originalType=binary&ratio=1&rotation=0&showTitle=false&size=469996&status=done&style=none&taskId=u3d2e261c-71d9-4d23-90e5-7710e06c867&title=&width=532" alt="image.png"><h4 id="5-1-5逻辑日志备份"><a href="#5-1-5逻辑日志备份" class="headerlink" title="5.1.5逻辑日志备份"></a>5.1.5逻辑日志备份</h4>逻辑日志备份是所有填满的逻辑日志文件在磁盘或磁带上的副本<br>逻辑日志文件存储发生在备份间的数据库服务器活动记录<br>要释放填满的逻辑日志文件，首先要备份它们。数据库服务器将在已释放的逻辑日志文件中记录新事务。<h4 id="5-1-6及时备份逻辑日志的必要性"><a href="#5-1-6及时备份逻辑日志的必要性" class="headerlink" title="5.1.6及时备份逻辑日志的必要性"></a>5.1.6及时备份逻辑日志的必要性</h4></li><li>及时释放逻辑日志文件（日志文件循环使用）；</li><li>当包含逻辑日志的磁盘出现故障时将数据丢失降低到最小限度；</li><li>确保数据库还原后包含一致的以及最近的事务。<h3 id="5-2GBase8s数据库恢复"><a href="#5-2GBase8s数据库恢复" class="headerlink" title="5.2GBase8s数据库恢复"></a>5.2GBase8s数据库恢复</h3><h4 id="5-2-1物理恢复"><a href="#5-2-1物理恢复" class="headerlink" title="5.2.1物理恢复"></a>5.2.1物理恢复</h4>数据库恢复是从所有或选定存储空间的备份中复原数据。<br>在物理恢复期间，恢复程序从最近的0 级、1 级和2 级备份复原数据<br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660809621436-40e6efe9-3676-4001-a9c7-7695972a47cc.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=218&id=G24c4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=167&originWidth=387&originalType=binary&ratio=1&rotation=0&showTitle=false&size=28553&status=done&style=none&taskId=uc544056b-7830-4144-b26e-f99c0b78505&title=&width=504.5" alt="image.png"><h4 id="5-2-2逻辑恢复"><a href="#5-2-2逻辑恢复" class="headerlink" title="5.2.2逻辑恢复"></a>5.2.2逻辑恢复</h4>逻辑复原是指从逻辑日志备份中复原事务。<br>数据库服务器将自动分辨要复原哪些逻辑日志<br><img data-src="https://cdn.nlark.com/yuque/0/2022/png/1582987/1660809633378-44d1d7db-232a-4f04-aef7-3258ce46e06f.png#clientId=uafdba8b1-45ba-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=197&id=p3BcA&margin=%5Bobject%20Object%5D&name=image.png&originHeight=223&originWidth=517&originalType=binary&ratio=1&rotation=0&showTitle=false&size=34643&status=done&style=none&taskId=uac17e087-1d4b-4639-9fc5-f035a7169a2&title=&width=456.5" alt="image.png"><h3 id="5-3onbar备份-恢复工具"><a href="#5-3onbar备份-恢复工具" class="headerlink" title="5.3onbar备份/恢复工具"></a>5.3onbar备份/恢复工具</h3>ON-Bar备份工具<br>•存储管理器可以选择PSM(Primary Storage Manager )或第三方存储管理器<h4 id="5-3-1onbar备份工具优点："><a href="#5-3-1onbar备份工具优点：" class="headerlink" title="5.3.1onbar备份工具优点："></a>5.3.1onbar备份工具优点：</h4>可选择具体存储空间<br>可恢复到具体时间点<br>可并行备份与复原多个不同的存储空间<h4 id="5-3-2配置PSM存储管理器"><a href="#5-3-2配置PSM存储管理器" class="headerlink" title="5.3.2配置PSM存储管理器"></a>5.3.2配置PSM存储管理器</h4>配置备份参数：<br>假设GBase8s安装目录为/home/gbase<br>假设逻辑日志备份目录为/opt/gbase/backup/LOGPOOL<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">onmode-wfBAR_BSALIB_PATH&#x3D;&#x2F;home&#x2F;gbase&#x2F;lib&#x2F;libbsapsm.so</span><br><span class="line">onmode-wfALARMPROGRAM&#x3D;&#x2F;home&#x2F;gbase&#x2F;etc&#x2F;log_full.sh</span><br><span class="line">onmode-wfLTAPEDEV&#x3D;&#x2F;opt&#x2F;gbase&#x2F;backup&#x2F;LOGPOOL</span><br></pre></td></tr></table></figure> 定义PSM备份目录：<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">onpsm-D add &#x2F;opt&#x2F;gbase&#x2F;backup&#x2F;DBSPOOL -g DBSPOOL -p HIGHEST -t FILE</span><br><span class="line">onpsm-D add &#x2F;opt&#x2F;gbase&#x2F;backup&#x2F;LOGPOOL -g LOGPOOL -p HIGHEST -t FILE</span><br></pre></td></tr></table></figure> 查看备份目录信息<br>onpsm-D list<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Type PrioBlock&#x2F;Size (MB) Pool Name Device Name</span><br><span class="line">FILE LOW --&#x2F;--DBSPOOL &#x2F;home&#x2F;gbase&#x2F;backups</span><br><span class="line">FILE HIGHEST --&#x2F;--DBSPOOL &#x2F;opt&#x2F;gbase&#x2F;backup&#x2F;DBSPOOL</span><br><span class="line">FILE LOW --&#x2F;--LOGPOOL &#x2F;home&#x2F;gbase&#x2F;backups</span><br><span class="line">FILE HIGHEST --&#x2F;--LOGPOOL &#x2F;opt&#x2F;gbase&#x2F;backup&#x2F;LOGPOOL</span><br></pre></td></tr></table></figure> 删除LOW级别的备份目录，保留刚刚定义的HIGHEST级别的目录<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">onpsm-D del &#x2F;opt&#x2F;gbase&#x2F;backups -d -g DBSPOOL -y</span><br><span class="line">onpsm-D del &#x2F;opt&#x2F;gbase&#x2F;backups -d -g LOGPOOL -y</span><br></pre></td></tr></table></figure> 通过onbar执行数据库0级备份<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">onbar-b -L 0</span><br></pre></td></tr></table></figure> onbar备份语法(onbar--)：<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">BACKUP &amp; VERIFICATION</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">-b [-p] [-L &lt;level&gt;] [-w | -f &lt;filename&gt; | &lt;spaces&gt;] [-O] [-cfyes | no | only]</span><br><span class="line">-b -F</span><br><span class="line">-b -l [-c | -C | -s] [-O]</span><br><span class="line">-v [-w] [-p] [-t &lt;time&gt;] [-f &lt;filename&gt; | &lt;spaces&gt;]</span><br><span class="line">-b back up</span><br><span class="line">-c back up the current logical log</span><br><span class="line">-C start continuous logical log backup</span><br><span class="line">-cfback up critical files</span><br><span class="line">-f path and filename of file containing a list of storage spaces</span><br><span class="line">-F fake backup</span><br><span class="line">-l back up full logical logs only (no storage spaces)</span><br><span class="line">-L backup level: 0, 1, or 2. Default is 0</span><br><span class="line">-O override internal error checks -enforce policy strictly</span><br><span class="line">-p back up storage spaces only (no logs)</span><br><span class="line">-s salvage logs</span><br><span class="line">-t specify the point in time to verify consistency</span><br><span class="line">-v verify consistency of specified backups</span><br><span class="line">-w whole system backup</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">整个系统的0级备份</span><br><span class="line">在执行所有联机存储空间和逻辑日志的检查点后需执行整个系统的0 级备份：</span><br><span class="line">onbar-b -w</span><br><span class="line">整个系统的1 级备份命令：</span><br><span class="line">onbar-b -w -L 1</span><br><span class="line">备份所有联机存储空间和逻辑日志</span><br><span class="line">执行所有联机存储空间和已用逻辑日志的标准0 级备份：</span><br><span class="line">onbar-b</span><br><span class="line">执行增量备份</span><br><span class="line">执行标准1 级备份：</span><br><span class="line">onbar-b -L 1</span><br><span class="line">备份指定的存储空间和所有逻辑日志</span><br><span class="line">对名为dbspace1 和dbspace2 的数据库空间以及所有逻辑日志执行0 级备份：</span><br><span class="line">onbar-b dbspace1 dbspace2</span><br><span class="line">备份逻辑日志</span><br><span class="line">启动手动逻辑日志备份：</span><br><span class="line">onbar-b -l</span><br></pre></td></tr></table></figure> onbar恢复语法(onbar--)：<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">RESTORE</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">-r [-e] [-O | &#123;rename-chunk-syntax&#125;] [-w] [-p] [-cfyes|no|only]</span><br><span class="line">[-t &quot;&lt;time&gt;&quot; | -n &lt;log&gt;] [-f &lt;filename&gt; | &lt;spaces&gt;]</span><br><span class="line">-r -l [-C | -X | -t &quot;&lt;time&gt;&quot; | -n &lt;log&gt;]</span><br><span class="line">-RESTART</span><br><span class="line">rename-chunk-syntax:</span><br><span class="line">&#123;-rename -f &lt;filename&gt; | -p &lt;old_path&gt; -o &lt;old_offset&gt; -n &lt;new_path&gt; -o &lt;new_offset&gt;...&#125;</span><br><span class="line">-C start&#x2F;restart continuous log restore (When logs exhaust leave the server</span><br><span class="line">in fast recovery mode)</span><br><span class="line">-cfrestore critical files (when performing a cold restore)</span><br><span class="line">-e external restore</span><br><span class="line">-f path and filename of file containing a list of storage spaces to restore</span><br><span class="line">-l restore logical logs only (no storage spaces)</span><br><span class="line">-n restore to specified logical log</span><br><span class="line">-O override internal error checks -force restores prevented by error checks</span><br><span class="line">-p restore physical spaces only (logs are not restored or salvaged)</span><br><span class="line">-r restore</span><br><span class="line">-t restore to specified point in time, surrounded by quotation marks</span><br><span class="line">-w restore whole system backup</span><br><span class="line">-X stop continuous logical log restore and leave the server in quiescent mode</span><br><span class="line">-RESTART restartan interrupted restore</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">执行整个系统的恢复</span><br><span class="line">从上次整个系统的备份对所有存储空间和逻辑日志执行整个系统的复原</span><br><span class="line">onbar-r –w</span><br><span class="line">恢复特定存储空间</span><br><span class="line">以下示例恢复两个特定存储空间dbspace1和dbspace2：</span><br><span class="line">onbar-r dbspace1 dbspace2</span><br><span class="line">分阶段执行热恢复</span><br><span class="line">以下命令执行物理恢复，备份逻辑日志，然后执行逻辑恢复：</span><br><span class="line">onbar-r -p</span><br><span class="line">onbar-b -l</span><br><span class="line">onbar-r -l</span><br><span class="line">基于时间点的恢复</span><br><span class="line">以下命令将数据库服务器数据恢复到其在特定日期和时间的状态：</span><br><span class="line">onbar-r -t “2011-05-10 11:35:57”</span><br><span class="line">重放在指定时间或指定时间之前落实的事务，包括带有落实时间11:35:57 的所有事务。正在处理但未在11:35:57 之前落实的事务将回滚。</span><br></pre></td></tr></table></figure></li></ol></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-item"><a href="/2023/01/15/yum%E6%8C%89%E7%85%A7%E6%9C%AC%E5%9C%B0rpm%E5%8C%85%E5%8F%8A%E4%BE%9D%E8%B5%96/" rel="prev" title="yum按照本地rpm包及依赖"><i class="fa fa-chevron-left"></i> yum按照本地rpm包及依赖</a></div><div class="post-nav-item"></div></div></footer></article></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">湘ICP备19011756号-1</a></div><div class="copyright"> &copy; 2021 – <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">JIAHE</span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script><script src="/js/third-party/search/local-search.js"></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdn.jsdelivr.net/npm/pdfobject@2.2.7/pdfobject.min.js","integrity":"sha256-ph3Dk89VmuTVXG6x/RDzk53SU9LPdAh1tpv0UvnDZ2I="},"url":"/lib/pdf/web/viewer.html"}</script><script src="/js/third-party/tags/pdf.js"></script><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/quicklink@2.2.0/dist/quicklink.umd.js" integrity="sha256-4kQf9z5ntdQrzsBC3YSHnEz02Z9C1UeW/E9OgnvlzSY=" crossorigin="anonymous"></script><script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"ignores":null,"url":"http://xiaojianzheng.cn/2023/01/15/%E5%9B%BD%E4%BA%A7%E6%95%B0%E6%8D%AE%E5%BA%93-GBase8s/"}</script><script src="/js/third-party/quicklink.js"></script></body></html>