<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"www.xiaojianzheng.cn","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":true,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script><meta name="description" content="我是 Redis你好，我是 Redis，一个叫 Antirez 的男人把我带到了这个世界上。 说起我的诞生，跟关系数据库 MySQL 还挺有渊源的。 在我还没来到这个世界上的时候，MySQL 过的很辛苦，互联网发展的越来越快，它容纳的数据也越来越多，用户请求也随之暴涨，而每一个用户请求都变成了对它的一个又一个读写操作，MySQL 是苦不堪言。尤其是到 “双 11”、“618“这种全民购物狂欢的日子"><meta property="og:type" content="article"><meta property="og:title" content="Redis入门了解"><meta property="og:url" content="https://www.xiaojianzheng.cn/2021/04/02/Redis%E5%85%A5%E9%97%A8%E4%BA%86%E8%A7%A3/index.html"><meta property="og:site_name" content="JIAHE"><meta property="og:description" content="我是 Redis你好，我是 Redis，一个叫 Antirez 的男人把我带到了这个世界上。 说起我的诞生，跟关系数据库 MySQL 还挺有渊源的。 在我还没来到这个世界上的时候，MySQL 过的很辛苦，互联网发展的越来越快，它容纳的数据也越来越多，用户请求也随之暴涨，而每一个用户请求都变成了对它的一个又一个读写操作，MySQL 是苦不堪言。尤其是到 “双 11”、“618“这种全民购物狂欢的日子"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://pic4.zhimg.com/80/v2-d0c187542d3b8c7d0be37fa555ea1233_720w.jpg"><meta property="og:image" content="https://pic2.zhimg.com/80/v2-7f57747f177f960c091e4f5f61a4ef85_720w.jpg"><meta property="og:image" content="https://pic1.zhimg.com/80/v2-459e40288409c09412bf8188fa798590_720w.jpg"><meta property="og:image" content="https://pic3.zhimg.com/80/v2-d13c95e7eedb51d37e4ea2a99c07853e_720w.jpg"><meta property="og:image" content="https://pic3.zhimg.com/80/v2-1bea0f94076e238d1d12562bcd231d72_720w.jpg"><meta property="og:image" content="https://pic1.zhimg.com/80/v2-5abb907d54ae293fed845a9179fcb240_720w.jpg"><meta property="og:image" content="https://pic2.zhimg.com/80/v2-329d9cdb0dde464e75fab3e39e2f1721_720w.jpg"><meta property="og:image" content="https://pic3.zhimg.com/80/v2-a2a253d074fa82868d46e6860067134a_720w.jpg"><meta property="og:image" content="https://pic2.zhimg.com/80/v2-a4e920e472395dc56acc693ed6539005_720w.jpg"><meta property="og:image" content="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093505585-242003340.png"><meta property="og:image" content="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093524268-1332642735.png"><meta property="og:image" content="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093535904-341470478.png"><meta property="og:image" content="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093547770-278076601.png"><meta property="og:image" content="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093602722-1412154764.png"><meta property="og:image" content="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093617225-624157929.png"><meta property="og:image" content="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093635265-1903924959.png"><meta property="og:image" content="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093649276-503763230.png"><meta property="og:image" content="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093705093-426892580.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/a2be9290263ca5406980a8fce912645e.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/0f6676eec30701ba83ec9da78a4299b7.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/d9ac1eb5a48f8766ac7537b674963ccc.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/a5d22f5e6a84530571b04d77db8ba6cb.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/a55a8545e2dbbd18cc283c4939271531.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/cdb841bbc733ffa59630cfe95867abe7.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/74dccdcab3357dd3d888315b99a824d0.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/c19184dbac17dafa1ec024fddb7e4259.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/4afab5b3e65616754f134b6bf63c97b7.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/f25482c7311bfde9e098b91ee3233741.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/b7d1222315dd896c2747289940f68d0d.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/79f71b69579739a20b57309c8b7e0f79.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/a5e066942d13a7fec9f53dff599adbae.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/4357b830a588ba6a4eab756a6b83b39e.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/b62b0e66c0ff81a645aebcdbc0c75a1f.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/55b0f04a336e43574e2f4b69645b470e.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/59a81c8f052fca1e592a7f17a048baa6.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/acd5bb05a04e84328773033912ffaf02.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/d40392b27be2462b9a89c2f3ab0bf095.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/1142bfb0b6538187b308680643552ded.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/b1f53bd8064fbf5eff14ccd3f33731e6.png"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/44197e037f88802b6626fe322f8474d2.png"><meta property="article:published_time" content="2021-04-02T11:21:18.000Z"><meta property="article:modified_time" content="2021-04-02T11:21:18.000Z"><meta property="article:author" content="JIAHE"><meta property="article:tag" content="redis"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://pic4.zhimg.com/80/v2-d0c187542d3b8c7d0be37fa555ea1233_720w.jpg"><link rel="canonical" href="https://www.xiaojianzheng.cn/2021/04/02/Redis%E5%85%A5%E9%97%A8%E4%BA%86%E8%A7%A3/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.xiaojianzheng.cn/2021/04/02/Redis%E5%85%A5%E9%97%A8%E4%BA%86%E8%A7%A3/","path":"2021/04/02/Redis入门了解/","title":"Redis入门了解"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Redis入门了解 | JIAHE</title><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">JIAHE</h1><i class="logo-line"></i></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-导航"><a href="/navigation/" rel="section"><i class="fa fa-location-arrow fa-fw"></i>导航</a></li><li class="menu-item menu-item-文档"><a href="/docs/" rel="section"><i class="fa fa-book fa-fw fa-fw"></i>文档</a></li><li class="menu-item menu-item-cheat-sheet"><a href="/cheat-sheet/" rel="section"><i class="fas fa-pen fa-fw"></i>Cheat Sheet</a></li><li class="menu-item menu-item-软件安装部署"><a href="/software-install-and-deploy/" rel="section"><i class="fab fa-windows fa-fw"></i>软件安装部署</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%88%91%E6%98%AF-Redis"><span class="nav-number">1.</span> <span class="nav-text">我是 Redis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BC%93%E5%AD%98%E9%81%87%E5%88%B0%E7%9A%84%E5%87%A0%E4%B8%AA%E9%97%AE%E9%A2%98"><span class="nav-number">2.</span> <span class="nav-text">缓存遇到的几个问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%93%E5%AD%98%E8%BF%87%E6%9C%9F-amp-amp-%E7%BC%93%E5%AD%98%E6%B7%98%E6%B1%B0"><span class="nav-number">2.1.</span> <span class="nav-text">缓存过期 &amp;&amp; 缓存淘汰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F-amp-amp-%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="nav-number">2.2.</span> <span class="nav-text">缓存穿透 &amp;&amp; 布隆过滤器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF-amp-amp-%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9"><span class="nav-number">2.3.</span> <span class="nav-text">缓存击穿 &amp;&amp; 缓存雪崩</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%96%AD%E7%94%B5%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F%E6%8C%81%E4%B9%85%E5%8C%96"><span class="nav-number">3.</span> <span class="nav-text">断电了怎么办？持久化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#RDB-%E6%8C%81%E4%B9%85%E5%8C%96"><span class="nav-number">3.1.</span> <span class="nav-text">RDB 持久化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-binlog"><span class="nav-number">3.2.</span> <span class="nav-text">MySQL: binlog</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AOF-%E6%8C%81%E4%B9%85%E5%8C%96"><span class="nav-number">3.3.</span> <span class="nav-text">AOF 持久化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AOF-%E9%87%8D%E5%86%99"><span class="nav-number">3.4.</span> <span class="nav-text">AOF 重写</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E4%B8%AA%E5%A5%BD%E6%B1%89%EF%BC%8C%E4%B8%89%E4%B8%AA%E5%B8%AE%E3%80%82%E9%AB%98%E5%8F%AF%E7%94%A8"><span class="nav-number">4.</span> <span class="nav-text">一个好汉，三个帮。高可用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E4%BB%8E%E6%A8%A1%E5%BC%8F"><span class="nav-number">4.1.</span> <span class="nav-text">主从模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%93%E5%86%B2%E5%8C%BA%E3%80%81%E5%A4%8D%E5%88%B6%E5%81%8F%E7%A7%BB%E9%87%8F%E3%80%81%E8%BF%90%E8%A1%8CID"><span class="nav-number">4.2.</span> <span class="nav-text">缓冲区、复制偏移量、运行ID</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%93%A8%E5%85%B5%E3%80%81%E4%B8%BB%E4%BB%8E%E5%88%87%E6%8D%A2"><span class="nav-number">4.3.</span> <span class="nav-text">哨兵、主从切换</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8E%9F%E6%96%87%E5%9C%B0%E5%9D%80"><span class="nav-number">5.</span> <span class="nav-text">原文地址</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="JIAHE" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">JIAHE</p><div class="site-description" itemprop="description">Collection & Reuse</div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">63</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">71</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-blogroll site-overview-item animated"><div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="https://www.baidu.com/" title="https:&#x2F;&#x2F;www.baidu.com&#x2F;" rel="noopener" target="_blank">Baidu</a></li><li class="links-of-blogroll-item"> <a href="https://cn.bing.com/" title="https:&#x2F;&#x2F;cn.bing.com&#x2F;" rel="noopener" target="_blank">Bing</a></li><li class="links-of-blogroll-item"> <a href="https://www.google.com/%20||%20fab%20fa-google" title="https:&#x2F;&#x2F;www.google.com&#x2F; || fab fa-google" rel="noopener" target="_blank">Google</a></li></ul></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div><a role="button" class="book-mark-link book-mark-link-fixed"></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.xiaojianzheng.cn/2021/04/02/Redis%E5%85%A5%E9%97%A8%E4%BA%86%E8%A7%A3/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="JIAHE"><meta itemprop="description" content="Collection & Reuse"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="JIAHE"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Redis入门了解</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-04-02 19:21:18" itemprop="dateCreated datePublished" datetime="2021-04-02T19:21:18+08:00">2021-04-02</time></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="我是-Redis"><a href="#我是-Redis" class="headerlink" title="我是 Redis"></a>我是 Redis</h1><p>你好，我是 Redis，一个叫 Antirez 的男人把我带到了这个世界上。</p><p>说起我的诞生，跟关系数据库 MySQL 还挺有渊源的。</p><p>在我还没来到这个世界上的时候，MySQL 过的很辛苦，互联网发展的越来越快，它容纳的数据也越来越多，用户请求也随之暴涨，而每一个用户请求都变成了对它的一个又一个读写操作，MySQL 是苦不堪言。尤其是到 “双 11”、“618“这种全民购物狂欢的日子，都是 MySQL 受苦受难的日子。</p><p>据后来 MySQL 告诉我说，其实有一大半的用户请求都是读操作，而且经常都是重复查询一个东西，浪费它很多时间去进行磁盘 I/O。</p><p>后来有人就琢磨，是不是可以学学 CPU，给数据库也加一个缓存呢？于是我就诞生了！</p><p>出生不久，我就和 MySQL 成为了好朋友，我们俩常常携手出现在后端服务器中。</p><p>应用程序们从 MySQL 查询到的数据，在我这里登记一下，后面再需要用到的时候，就先找我要，我这里没有再找 MySQL 要。</p><span id="more"></span><p><img data-src="https://pic4.zhimg.com/80/v2-d0c187542d3b8c7d0be37fa555ea1233_720w.jpg"></p><p>为了方便使用，我支持好几种数据结构的存储：</p><blockquote><ul><li>String</li><li>Hash</li><li>List</li><li>Set</li><li>SortedSet</li><li>Bitmap</li><li>······</li></ul></blockquote><p>因为我把登记的数据都记录在内存中，不用去执行慢如蜗牛的 I/O 操作，所以找我要比找 MySQL 要省去了不少的时间呢。</p><p>可别小瞧这简单的一个改变，我可为 MySQL 减轻了不小的负担！随着程序的运行，我缓存的数据越来越多，有相当部分时间我都给它挡住了用户请求，这一下它可乐得清闲自在了！</p><p>有了我的加入，网络服务的性能提升了不少，这都归功于我为数据库挨了不少枪子儿。</p><h1 id="缓存遇到的几个问题"><a href="#缓存遇到的几个问题" class="headerlink" title="缓存遇到的几个问题"></a>缓存遇到的几个问题</h1><h2 id="缓存过期-amp-amp-缓存淘汰"><a href="#缓存过期-amp-amp-缓存淘汰" class="headerlink" title="缓存过期 &amp;&amp; 缓存淘汰"></a>缓存过期 &amp;&amp; 缓存淘汰</h2><p>不过很快我发现事情不妙了，我缓存的数据都是在内存中，可是就算是在服务器上，内存的空间资源还是很有限的，不能无节制的这么存下去，我得想个办法，不然吃枣药丸。</p><p>不久，我想到了一个办法：给缓存内容设置一个超时时间，具体设置多长交给应用程序们去设置，我要做的就是把过期了的内容从我里面删除掉，及时腾出空间就行了。</p><p><img data-src="https://pic2.zhimg.com/80/v2-7f57747f177f960c091e4f5f61a4ef85_720w.jpg"></p><p>超时时间有了，我该在什么时候去干这个清理的活呢？</p><p>最简单的就是定期删除，我决定 100ms 就做一次，一秒钟就是 10 次！</p><p>我清理的时候也不能一口气把所有过期的都给删除掉，我这里面存了大量的数据，要全面扫一遍的话那不知道要花多久时间，会严重影响我接待新的客户请求的！</p><p><img data-src="https://pic1.zhimg.com/80/v2-459e40288409c09412bf8188fa798590_720w.jpg"></p><p>时间紧任务重，我只好随机选择一部分来清理，能缓解内存压力就行了。</p><p>就这样过了一段日子，我发现有些个键值运气比较好，每次都没有被我的随机算法选中，每次都能幸免于难，这可不行，这些长时间过期的数据一直霸占着不少的内存空间！气抖冷！</p><p>我眼里可揉不得沙子！于是在原来定期删除的基础上，又加了一招：</p><p>那些原来逃脱我随机选择算法的键值，一旦遇到查询请求，被我发现已经超期了，那我就绝不客气，立即删除。</p><p>这种方式因为是被动式触发的，不查询就不会发生，所以也叫惰性删除！</p><p>可是，还是有部分键值，既逃脱了我的随机选择算法，又一直没有被查询，导致它们一直逍遥法外！而于此同时，可以使用的内存空间却越来越少。</p><p><img data-src="https://pic3.zhimg.com/80/v2-d13c95e7eedb51d37e4ea2a99c07853e_720w.jpg"></p><p>而且就算退一步讲，我能够把过期的数据都删除掉，那万一过期时间设置的很长，还没等到我去清理，内存就吃满了，一样要吃枣药丸，所以我还得想个办法。</p><p>我苦思良久，终于憋出了个大招：内存淘汰策略，这一次我要彻底解决问题！</p><p>我提供了 8 种策略供应用程序选择，用于我遇到内存不足时该如何决策：</p><blockquote><ul><li>noeviction：返回错误，不会删除任何键值</li><li>allkeys-lru：使用 LRU 算法删除最近最少使用的键值</li><li>volatile-lru：使用 LRU 算法从设置了过期时间的键集合中删除最近最少使用的键值</li><li>allkeys-random：从所有 key 随机删除</li><li>volatile-random：从设置了过期时间的键的集合中随机删除</li><li>volatile-ttl：从设置了过期时间的键中删除剩余时间最短的键</li><li>volatile-lfu：从配置了过期时间的键中删除使用频率最少的键</li><li>allkeys-lfu：从所有键中删除使用频率最少的键</li></ul></blockquote><p>有了上面几套组合拳，我再也不用担心过期数据多了把空间撑满的问题了~</p><h2 id="缓存穿透-amp-amp-布隆过滤器"><a href="#缓存穿透-amp-amp-布隆过滤器" class="headerlink" title="缓存穿透 &amp;&amp; 布隆过滤器"></a>缓存穿透 &amp;&amp; 布隆过滤器</h2><p>我的日子过的还挺舒坦，不过 MySQL 大哥就没我这么舒坦了，有时候遇到些烦人的请求，查询的数据不存在，MySQL 就要白忙活一场！不仅如此，因为不存在，我也没法缓存啊，导致同样的请求来了每次都要去让 MySQL 白忙活一场。我作为缓存的价值就没得到体现啦！这就是人们常说的缓存穿透。</p><p><img data-src="https://pic3.zhimg.com/80/v2-1bea0f94076e238d1d12562bcd231d72_720w.jpg"></p><p> 这一来二去，MySQL 大哥忍不住了：“唉，兄弟，能不能帮忙想个办法，把那些明知道不会有结果的查询请求给我挡一下”</p><p>这时我想到了我的另外一个好朋友：布隆过滤器</p><p><img data-src="https://pic1.zhimg.com/80/v2-5abb907d54ae293fed845a9179fcb240_720w.jpg"></p><p>我这位朋友别的本事没有，就擅长从超大的数据集中快速告诉你查找的数据存不存在（悄悄告诉你，我的这位朋友有一点不靠谱，它告诉你存在的话不能全信，其实有可能是不存在的，不过它他要是告诉你不存在的话，那就一定不存在）。</p><p><img data-src="https://pic2.zhimg.com/80/v2-329d9cdb0dde464e75fab3e39e2f1721_720w.jpg"></p><p>如果你对我这位朋友感兴趣的话，可以看看这里<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzI1MzYzMTI2Ng==&mid=2247483840&idx=1&sn=351b3c648a724b28bce767d9345400dd&scene=21#wechat_redirect">《白话布隆过滤器 BloomFilter》</a>。</p><p>我把这位朋友介绍给了应用程序，不存在的数据就不必去叨扰 MySQL 了，轻松帮忙解决了缓存穿透的问题。</p><h2 id="缓存击穿-amp-amp-缓存雪崩"><a href="#缓存击穿-amp-amp-缓存雪崩" class="headerlink" title="缓存击穿 &amp;&amp; 缓存雪崩"></a>缓存击穿 &amp;&amp; 缓存雪崩</h2><p>这之后过了一段时间太平日子，直到那一天 ···</p><p>有一次，MySQL 那家伙正优哉游哉的摸鱼，突然一大堆请求给他怼了过去，给他打了一个措手不及。</p><p>一阵忙活之后，MySQL 怒气冲冲的找到了我，“兄弟，咋回事啊，怎么一下子来的这么猛”</p><p><img data-src="https://pic3.zhimg.com/80/v2-a2a253d074fa82868d46e6860067134a_720w.jpg"></p><p>我查看了日志，赶紧解释到：“大哥，实在不好意思，刚刚有一个热点数据到了过期时间，被我删掉了，不巧的是随后就有对这个数据的大量查询请求来了，我这里已经删了，所以请求都发到你那里来了”</p><p>“你这干的叫啥事，下次注意点啊”，MySQL 大哥一脸不高兴的离开了。</p><p>这一件小事我也没怎么放在心上，随后就抛之脑后了，却没曾想几天之后竟捅了更大的篓子。</p><p>那一天，又出现了大量的网络请求发到了 MySQL 那边，比上一次的规模大得多，MySQL 大哥一会儿功夫就给干趴下了好几次！</p><p>等了好半天这一波流量才算过去，MySQL 才缓过神来。</p><p>“老弟，这一次又是什么原因？”，MySQL 大哥累的没了力气。</p><p>“这一次比上一次更不巧，这一次是一大批数据几乎同时过了有效期，然后又发生了很多对这些数据的请求，所以比起上一次这规模更大了”</p><p><img data-src="https://pic2.zhimg.com/80/v2-a4e920e472395dc56acc693ed6539005_720w.jpg"></p><p>MySQL 大哥听了眉头一皱，“那你倒是想个办法啊，三天两头折磨我，这谁顶得住啊？”</p><p>“其实我也很无奈，这个时间也不是我设置的，要不我去找应用程序说说，让他把缓存过期时间设置的均匀一些？至少别让大量数据集体失效”</p><p>“走，咱俩一起去”</p><p>后来，我俩去找应用程序商量了，不仅把键值的过期时间随机了一下，还设置了热点数据永不过期，这个问题缓解了不少。哦对了，我们还把这两次发生的问题分别取了个名字：缓存击穿和缓存雪崩。</p><p>我们终于又过上了舒适的日子 ···</p><h1 id="断电了怎么办？持久化"><a href="#断电了怎么办？持久化" class="headerlink" title="断电了怎么办？持久化"></a>断电了怎么办？持久化</h1><blockquote><p>那天，我正在努力工作中，不小心出了错，整个进程都崩溃了。</p><p>当我再次启动后，之前缓存的数据全都没了，暴风雨似的请求再一次全都怼到了 MySQL 大哥那里。</p><p>唉，要是我能够记住崩溃前缓存的内容就好了 ···</p></blockquote><p>“快醒醒！快醒醒！”，隐隐约约，我听到有人在叫我。</p><p>慢慢睁开眼睛，原来旁边是 MySQL 大哥。</p><p>“我怎么睡着了？”</p><p>“嗨，你刚才是不是出现了错误，整个进程都崩溃了！害得一大堆查询请求都给我怼过来了！”，MySQL 说到。</p><p>刚刚醒来，脑子还有点懵，MySQL 大哥扶我起来继续工作。</p><p>“糟了！我之前缓存的数据全都不见了！”</p><p>“WTF？你没有做<strong>持久化</strong>吗？”，MySQL 大哥一听脸色都变了。</p><p>我尴尬的摇了摇头，“我都是保存在内存中的，所以才那么快啊”</p><p>“那也可以在硬盘上保存一下啊，遇到这种情况全部从头再来建立缓存，这不浪费时间嘛！”</p><p><img data-src="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093505585-242003340.png"></p><p>我点了点头，“让我琢磨一下，看看怎么做这个持久化”。</p><h2 id="RDB-持久化"><a href="#RDB-持久化" class="headerlink" title="RDB 持久化"></a>RDB 持久化</h2><p>没几天，我就拿出了一套方案：<strong>RDB</strong></p><p>既然我的数据都在内存中存放着，最简单的就是遍历一遍把它们全都写入文件中。</p><p>为了节约空间，我定义了一个二进制的格式，把数据一条一条码在一起，生成了一个 RDB 文件。</p><p><img data-src="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093524268-1332642735.png"></p><p>不过我的数据量有点大，要是全部备份一次得花不少时间，所以不能太频繁的去做这事，要不然我不用干正事了，光花时间去备份了。</p><p>还有啊，要是一直没有写入操作，都是读取操作，那我也不用重复备份，浪费时间。</p><p>思来想去，我决定提供一个配置参数，既可以支持周期性备份，也可以避免做无用功。</p><p>就像这样：</p><blockquote><ul><li> save 900 1     # 900 秒（15 分钟）内有 1 个写入</li><li> save 300 10    # 300 秒（5 分钟）内有 10 个写入</li><li> save 60 10000  # 60 秒（1 分钟）内有 10000 个写入</li></ul></blockquote><p>多个条件可以组合使用，只要上面一个条件满足，我就会去进行备份。</p><p>后来我又想了一下，这样还是不行，我得 <strong>fork</strong> 出一个子进程去做这件事，不能浪费我的时间。</p><p>有了备份文件，下次我再遇到崩溃退出，甚至服务器断电罢工了，只要我的备份文件还在，我就能在启动的时候读取，快速恢复之前的状态啦！</p><p><img data-src="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093535904-341470478.png"></p><h2 id="MySQL-binlog"><a href="#MySQL-binlog" class="headerlink" title="MySQL: binlog"></a>MySQL: binlog</h2><p>我带着这套方案，兴冲冲的拿给了 MySQL 大哥看了，期待他给我一些鼓励。</p><p>“老弟，你这个方案有点问题啊”，没想到，他竟给我浇了一盆冷水。</p><p>“问题？有什么问题？”</p><p>“你看啊，你这个周期性去备份，周期还是分钟级别的，你可知道咱们这服务每秒钟都要响应多少请求，像你这样不得丢失多少数据？”，MySQL 语重心长的说到。</p><p><img data-src="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093547770-278076601.png"></p><p>我一下有些气短了，“可是，这个备份一次要遍历全部数据，开销还是挺大的，不适合高频执行啊”</p><p>“谁叫你一次遍历全部数据了？来来来，我给你看个东西”，MySQL 大哥把我带到了一个文件目录下：</p><blockquote><ul><li> mysql-bin.000001</li><li> mysql-bin.000002</li><li> mysql-bin.000003</li><li> ···</li></ul></blockquote><p>“看，这些是我的<strong>二进制日志 binlog</strong>，你猜猜看里面都装了些什么？”，MySQL 大哥指着这一堆文件说到。</p><p>我看了一眼，全是一堆二进制数据，这哪看得懂，我摇了摇头。</p><p>“这里面呀记录了我对数据执行更改的所有操作，像是 <strong>INSERT</strong>，<strong>UPDATE</strong>、<strong>DELETE</strong> 等等动作，等我要进行数据恢复的时候就可以派上大用场了”</p><p>听他这么一说，我一下来了灵感！告别了 MySQL 大哥，回去研究起新的方案来了。</p><h2 id="AOF-持久化"><a href="#AOF-持久化" class="headerlink" title="AOF 持久化"></a>AOF 持久化</h2><p>你们也知道，我也是基于命令式的，每天的工作就是响应业务程序发来的命令请求。</p><p>回来以后，我决定照葫芦画瓢，学着 MySQL 大哥的样子，把我执行的所有写入命令都记录下来，专门写入了一个文件，并给这种持久化方式也取了一个名字：<strong>AOF（Append Only File）</strong>。</p><p><img data-src="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093602722-1412154764.png"></p><p>不过我遇到了 RDB 方案同样的问题，我该多久写一次文件呢？</p><p>我肯定不能每执行一条写入命令就记录到文件中，那会严重拖垮我的性能！我决定准备一个缓冲区，然后把要记录的命令先临时保存在这里，然后再择机写入文件，我把这个临时缓冲区叫做 <strong>aof_buf</strong>。</p><p><img data-src="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093617225-624157929.png"></p><p>说干就干，我试了一下，竟然发现数据没有写入到文件中去。多方打听才知道，原来操作系统也有个缓存区，我写的数据被他缓存起来了，没有给我写入到文件中去，这不是坑爹呢嘛！</p><p>看来，我写完了还得要去刷新一下，把数据真正给写下去，思来想去，我还是提供一个参数，让业务程序去设置什么时候刷新吧。</p><blockquote><p><code>appendfsync</code>参数，三个取值：</p><ul><li> always: 每个事件周期都同步刷新一次</li><li> everysec: 每一秒都同步刷新一次</li><li> no: 我只管写，让操作系统自己决定什么时候真正写入吧</li></ul></blockquote><h2 id="AOF-重写"><a href="#AOF-重写" class="headerlink" title="AOF 重写"></a>AOF 重写</h2><p>这一次我不像之前那么冲动，我决定先试运行一段时间再去告诉 MySQL 大哥，免得又被他戳到软肋。</p><p>试用了一段时间，各方面都运行良好，不过我发现随着时间的推移，我写的这个 AOF 备份文件越来越大，越来越大！不仅非常占硬盘空间，复制移动，加载分析都非常的麻烦耗时。</p><p>我得想个办法把文件给<strong>压缩</strong>一下，我把这个过程叫做 <strong>AOF 重写</strong>。</p><p><img data-src="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093635265-1903924959.png"></p><p>一开始，我打算去分析原来的 AOF 文件，然后将其中的冗余指令去掉，来给 AOF 文件瘦瘦身，不过我很快放弃了这个想法，这工作量实在太大了，分析起来也颇为麻烦，浪费很多精力跟时间。</p><p>原来的一条条记录这种方式实在是太笨了，数据改来改去，有很多中间状态都没用，我何不就把最终都数据状态记录下来就好了？</p><p>比如：</p><blockquote><ul><li> RPUSH name_list <strong>&#39;编程技术宇宙&#39;</strong></li><li> RPUSH name_list <strong>&#39;帅地玩编程&#39;</strong></li><li> RPUSH name_list <strong>&#39;后端技术学堂&#39;</strong></li></ul><p>可以合并成一条搞定：</p><ul><li> RPUSH name_list <strong>&#39;编程技术宇宙&#39;</strong> <strong>&#39;帅地玩编程&#39;</strong> <strong>&#39;后端技术学堂&#39;</strong></li></ul></blockquote><p>AOF 文件重写的思路我是有了，不过这件事干起来还是很耗时间，我决定和 RDB 方式一样，fork 出一个子进程来做这件事情。</p><p>谨慎如我，发现这样做之后，子进程在重写期间，我要是修改了数据，就会出现和重写的内容不一致的情况！MySQL 大哥肯定会挑刺儿，我还得把这个漏洞给补上。</p><p><img data-src="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093649276-503763230.png"></p><p>于是，我在之前的 <strong>aof_buf</strong> 之外，又准备了一个缓冲区：<strong>AOF 重写缓冲区</strong>。</p><p>从创建重写子进程开始的那一刻起，我把后面来的写入命令也 copy 一份写到这个重写缓冲区中，等到子进程重写 AOF 文件结束之后，我再把这个缓冲区中的命令写入到新的 AOF 文件中。</p><p>最后再重命名新的 AOF 文件，替换掉原来的那个臃肿不堪的大文件，终于大功告成！</p><p><img data-src="https://img2020.cnblogs.com/blog/659280/202009/659280-20200918093705093-426892580.png"></p><p>再三确定我的思路没有问题之后，我带着新的方案再次找到了 MySQL 大哥，我都做到这份儿上了，这一次，想必他应该无话可说了吧？</p><p>MySQL 大哥看了我的方案露出了满意的笑容，只是问了一个问题：</p><blockquote><p>这 AOF 方案这么好了，RDB 方案是不是可以不要了呢？</p></blockquote><p>万万没想到，他居然问我这个问题，我竟陷入了沉思，你觉得我该怎么回答好呢？</p><blockquote><p>RDB优点： 全量数据快照，文件小，恢复快。</p><p>RDB缺点：无法保存最后一次快照之后的数据。</p><p>AOF优点：可读性高适合保存增强数据，数据不易丢失。</p><p>AOF缺点：文件体积大，恢复时间长。</p><p>RDB-AOF混合持久化模式。</p></blockquote><h1 id="一个好汉，三个帮。高可用"><a href="#一个好汉，三个帮。高可用" class="headerlink" title="一个好汉，三个帮。高可用"></a>一个好汉，三个帮。高可用</h1><blockquote><p>“你怎么又崩溃了？”</p><p>“不好意思，又遇到 bug 了，不过不用担心，我现在可以快速恢复了！”</p><p>“那老崩溃也不是事儿啊，你只有一个实例太不可靠了，去找几个帮手吧！”</p></blockquote><p>那天，Redis 基友群里，许久未见的大白发来了一条消息 ···</p><p><img data-src="https://img-blog.csdnimg.cn/img_convert/a2be9290263ca5406980a8fce912645e.png" style="zoom:50%"> <img data-src="https://img-blog.csdnimg.cn/img_convert/0f6676eec30701ba83ec9da78a4299b7.png" style="zoom:50%"></p><h2 id="主从模式"><a href="#主从模式" class="headerlink" title="主从模式"></a>主从模式</h2><p>于是，大白拉了一个新的群</p> <img data-src="https://img-blog.csdnimg.cn/img_convert/d9ac1eb5a48f8766ac7537b674963ccc.png" style="zoom:50%"><p>以后的日子中，咱们哥仨相互配合，日常工作中最多的就是数据同步了</p> <img data-src="https://img-blog.csdnimg.cn/img_convert/a5d22f5e6a84530571b04d77db8ba6cb.png" style="zoom:50%"><p>如果主节点有数据写入、删除、修改命令，也会把这些命令挨个通知到从节点，我们把这叫做<strong>命令传播</strong>。</p> <img data-src="https://img-blog.csdnimg.cn/img_convert/a55a8545e2dbbd18cc283c4939271531.png" style="zoom:50%"><p>通过这样的方式，我们主节点与从节点之间数据就能保持同步了～</p><h2 id="缓冲区、复制偏移量、运行ID"><a href="#缓冲区、复制偏移量、运行ID" class="headerlink" title="缓冲区、复制偏移量、运行ID"></a>缓冲区、复制偏移量、运行ID</h2><blockquote><p>新的版本使用完整重同步和部分重同步 而部分重同步可以解决下面的问题</p><p>部分重同步分为三个部分：主服务器的复制偏移量、主服务器的复制积压缓冲区、服务器的运行ID。</p><p>如果主从服务器的复制偏移量不一样那么就去复制积压缓冲区查找，如果从的偏移量在缓冲区那么就进行部分重同步操作，</p><p>如果没有那么就进行完整重同步操作。</p><p>每个redis服务器都有自己的运行ID</p><p>断线重连后通过服务器运行ID判断重新连接的是否是之前的主服务器如果是则进行部分重同步操作</p><p>如果不是则进行完整重同步操作。</p></blockquote><p>有一次，我不小心掉线了～</p><p><img data-src="https://img-blog.csdnimg.cn/img_convert/cdb841bbc733ffa59630cfe95867abe7.png" style="zoom:50%"> <img data-src="https://img-blog.csdnimg.cn/img_convert/74dccdcab3357dd3d888315b99a824d0.png" style="zoom:50%"></p> <img data-src="https://img-blog.csdnimg.cn/img_convert/c19184dbac17dafa1ec024fddb7e4259.png" style="zoom:50%"><p>我们用上了新的数据同步策略，效率高了不少，就算偶尔掉个线，也能很快把缺失的数据给补上。</p><h2 id="哨兵、主从切换"><a href="#哨兵、主从切换" class="headerlink" title="哨兵、主从切换"></a>哨兵、主从切换</h2><blockquote><p>解决主从同步master宕机后的主从切换问题。</p><p>监控：检查主从服务器是否运行异常</p><p>提醒：通过API向管理员或者其他应用程序发送故障通知。</p><p>自动故障迁移：主从切换。</p></blockquote><p>就这样过了一段时间 ···</p> <img data-src="https://img-blog.csdnimg.cn/img_convert/4afab5b3e65616754f134b6bf63c97b7.png" style="zoom:50%"> <img data-src="https://img-blog.csdnimg.cn/img_convert/f25482c7311bfde9e098b91ee3233741.png" style="zoom:50%"><p>新添了人手，我们准备大干一场！</p><p>为了及时获得和更新主从节点的信息，咱们哨兵每隔十秒钟就要用 INFO 命令去问候一下主节点，主节点会告诉我他有哪些从节点</p> <img data-src="https://img-blog.csdnimg.cn/img_convert/b7d1222315dd896c2747289940f68d0d.png" style="zoom:50%"><p>为了更加及时知道大家是否掉线，咱们哨兵每隔一秒都要用 PING 命令问候一下群里的各个小伙伴：</p> <img data-src="https://img-blog.csdnimg.cn/img_convert/79f71b69579739a20b57309c8b7e0f79.png" style="zoom:50%"> <img data-src="https://img-blog.csdnimg.cn/img_convert/a5e066942d13a7fec9f53dff599adbae.png" style="zoom:50%"><p>如果在设置的时间里没有收到回复，我就知道这家伙多半是跪了，就该启动故障转移了</p><p>不过这只是我的主观意见，光我一个人说了不算，为了防止误判，我还得去管理员小群里征求一下大家的意见：</p> <img data-src="https://img-blog.csdnimg.cn/img_convert/4357b830a588ba6a4eab756a6b83b39e.png" style="zoom:50%"> <img data-src="https://img-blog.csdnimg.cn/img_convert/b62b0e66c0ff81a645aebcdbc0c75a1f.png" style="zoom:50%"> <img data-src="https://img-blog.csdnimg.cn/img_convert/55b0f04a336e43574e2f4b69645b470e.png" style="zoom:50%"> <img data-src="https://img-blog.csdnimg.cn/img_convert/59a81c8f052fca1e592a7f17a048baa6.png" style="zoom:50%"><p>接下来，咱们就开始了第一次选举。</p> <img data-src="https://img-blog.csdnimg.cn/img_convert/acd5bb05a04e84328773033912ffaf02.png" style="zoom:50%"> <img data-src="https://img-blog.csdnimg.cn/img_convert/d40392b27be2462b9a89c2f3ab0bf095.png" style="zoom:50%"> <img data-src="https://img-blog.csdnimg.cn/img_convert/1142bfb0b6538187b308680643552ded.png" style="zoom:50%"><p>经过一番努力，我终于完成了故障转移，现在 R2 是主节点了。</p><p>不过没过多久，R1 又回来了：</p> <img data-src="https://img-blog.csdnimg.cn/img_convert/b1f53bd8064fbf5eff14ccd3f33731e6.png" style="zoom:50%"><p>以上就是我们的日常工作了，通过咱们几个小伙伴的齐心协力，构成了一个高可用的缓存服务，MySQL 大哥再也不敢小瞧我们了。</p> <img data-src="https://img-blog.csdnimg.cn/img_convert/44197e037f88802b6626fe322f8474d2.png" style="zoom:50%"><h1 id="原文地址"><a href="#原文地址" class="headerlink" title="原文地址"></a>原文地址</h1><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xuanyuan/p/13665170.html">还不懂Redis？看完这个故事就明白了！</a></p><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xuanyuan/p/13689484.html">突然挂了！Redis缓存都在内存中，这下完了！</a></p><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xuanyuan/p/13917844.html">假如把Redis服务器们拉到一个群，看看他们是怎么工作的？</a></p></div><div class="popular-posts-header">相关文章</div><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><a href="/2021/02/26/redis常用命令/" rel="bookmark">redis常用命令</a></div></li></ul><footer class="post-footer"><div class="post-tags"> <a href="/tags/redis/" rel="tag"># redis</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2021/03/30/VirtualBox%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8F%8C%E7%BD%91%E5%8D%A1%E8%AE%BF%E9%97%AE%E5%86%85%E5%A4%96%E7%BD%91/" rel="prev" title="VirtualBox虚拟机配置双网卡访问内外网"><i class="fa fa-chevron-left"></i> VirtualBox虚拟机配置双网卡访问内外网</a></div><div class="post-nav-item"> <a href="/2021/04/03/Flex%E5%B8%83%E5%B1%80%E4%BB%8B%E7%BB%8D/" rel="next" title="Flex布局介绍">Flex布局介绍<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">湘ICP备19011756号-1</a></div><div class="copyright"> &copy; <span itemprop="copyrightYear">2021</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">JIAHE</span></div><div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/prismjs@1.24.1/components/prism-core.min.js" integrity="sha256-dz05jjFU9qYuMvQQlE6iWDtNAnEsmu6uMb1vWhKdkEM=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/prismjs@1.24.1/plugins/autoloader/prism-autoloader.min.js" integrity="sha256-sttoa+EIAvFFfeeIkmPn8ypyOOb6no2sZ2NbxtBXgqU=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/prismjs@1.24.1/plugins/line-numbers/prism-line-numbers.min.js" integrity="sha256-K837BwIyiXo5k/9fCYgqUyA14bN4/Ve9P2SIT0KmZD0=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script><script src="/js/third-party/search/local-search.js"></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdn.jsdelivr.net/npm/pdfobject@2.2.6/pdfobject.min.js","integrity":"sha256-77geM50MfxCD17eqyJR+Dag1svjJOLN+BJ2F/DMqMEY="},"url":"/lib/pdf/web/viewer.html"}</script><script src="/js/third-party/tags/pdf.js"></script><script src="https://cdn.jsdelivr.net/npm/quicklink@2.2.0/dist/quicklink.umd.js" integrity="sha256-4kQf9z5ntdQrzsBC3YSHnEz02Z9C1UeW/E9OgnvlzSY=" crossorigin="anonymous"></script><script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"ignores":null,"url":"https://www.xiaojianzheng.cn/2021/04/02/Redis%E5%85%A5%E9%97%A8%E4%BA%86%E8%A7%A3/"}</script><script src="/js/third-party/quicklink.js"></script></body></html>