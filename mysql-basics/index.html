<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"xiaojianzheng.cn","root":"/","images":"/images","scheme":"Mist","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":true,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}};
  </script>
<meta name="description" content="连接# 命令行连接mysql mysql -u root -p &gt; Enter password: ******  # 退出 mysql&gt; exit   数据库的基本操作创建数据库# 连接MySQL后，创建 CREATE database 数据库名;  # 建议使用这种方式进行创建数据库 CREATE database if not exists 数据库名 default charse">
<meta property="og:type" content="website">
<meta property="og:title" content="JIAHE">
<meta property="og:url" content="https://xiaojianzheng.cn/mysql-basics/index.html">
<meta property="og:site_name" content="JIAHE">
<meta property="og:description" content="连接# 命令行连接mysql mysql -u root -p &gt; Enter password: ******  # 退出 mysql&gt; exit   数据库的基本操作创建数据库# 连接MySQL后，创建 CREATE database 数据库名;  # 建议使用这种方式进行创建数据库 CREATE database if not exists 数据库名 default charse">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-04-11T13:10:40.888Z">
<meta property="article:modified_time" content="2021-04-11T13:10:40.888Z">
<meta property="article:author" content="JIAHE">
<meta property="article:tag" content="JIAHE">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://xiaojianzheng.cn/mysql-basics/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>
<title> | JIAHE
</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">JIAHE</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-navigation"><a href="/navigation/" rel="section"><i class="fa fa-location-arrow fa-fw"></i>导航</a></li>
        <li class="menu-item menu-item-java基础"><a href="/java-basics/" rel="section"><i class="fa fa-code fa-fw"></i>Java基础</a></li>
        <li class="menu-item menu-item-git基础"><a href="/git-basics/" rel="section"><i class="fab fa-git-alt fa-fw"></i>Git基础</a></li>
        <li class="menu-item menu-item-vim-cheat-sheet"><a href="/vim-cheat-sheet/" rel="section"><i class="fab fa-vimeo-square fa-fw"></i>Vim Cheat Sheet</a></li>
        <li class="menu-item menu-item-experience"><a href="/experience/" rel="section"><i class="fa fa-lightbulb fa-fw"></i>巨人的肩膀</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-常用软件"><a href="/windows-software-cheat-sheet/" rel="section"><i class="fab fa-windows fa-fw"></i>常用软件</a></li>
        <li class="menu-item menu-item-redis基础"><a href="/redis-basics/" rel="section"><i class="fas fa-database fa-fw"></i>Redis基础</a></li>
        <li class="menu-item menu-item-mysql基础"><a href="/mysql-basics/" rel="section"><i class="fas fa-database fa-fw"></i>MySQL基础</a></li>
        <li class="menu-item menu-item-html元素参考"><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element" rel="noopener" target="_blank"><i class="fab fa-html5 fa-fw"></i>HTML元素参考</a></li>
        <li class="menu-item menu-item-css-参考"><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Reference" rel="noopener" target="_blank"><i class="fab fa-css3-alt fa-fw"></i>CSS 参考</a></li>
        <li class="menu-item menu-item-javascript-参考"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference" rel="noopener" target="_blank"><i class="fab fa-js-square fa-fw"></i>JavaScript 参考</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BF%9E%E6%8E%A5"><span class="nav-number">1.</span> <span class="nav-text">连接</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="nav-number">2.</span> <span class="nav-text">数据库的基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">2.1.</span> <span class="nav-text">创建数据库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4"><span class="nav-number">2.2.</span> <span class="nav-text">删除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%89%E6%8B%A9"><span class="nav-number">2.3.</span> <span class="nav-text">选择</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B"><span class="nav-number">2.4.</span> <span class="nav-text">查看</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="nav-number">3.</span> <span class="nav-text">数据表</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="nav-number">3.1.</span> <span class="nav-text">创建数据表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">3.1.1.</span> <span class="nav-text">使用主键约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">3.1.2.</span> <span class="nav-text">使用外键约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="nav-number">3.1.3.</span> <span class="nav-text">使用非空约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%94%AF%E4%B8%80%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="nav-number">3.1.4.</span> <span class="nav-text">使用唯一性约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E7%BA%A6%E6%9D%9F"><span class="nav-number">3.1.5.</span> <span class="nav-text">使用默认约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E8%A1%A8%E7%9A%84%E5%B1%9E%E6%80%A7%E5%80%BC%E8%87%AA%E5%8A%A8%E5%A2%9E%E5%8A%A0"><span class="nav-number">3.1.6.</span> <span class="nav-text">设置表的属性值自动增加</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="nav-number">3.2.</span> <span class="nav-text">查看数据表结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="nav-number">3.3.</span> <span class="nav-text">修改数据表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="nav-number">3.4.</span> <span class="nav-text">删除数据表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL8-0%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7"><span class="nav-number">3.5.</span> <span class="nav-text">MySQL8.0的新特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%92%E5%85%A5"><span class="nav-number">3.6.</span> <span class="nav-text">插入</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.</span> <span class="nav-text">数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E5%80%BC"><span class="nav-number">4.1.</span> <span class="nav-text">数值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4"><span class="nav-number">4.2.</span> <span class="nav-text">日期和时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">4.3.</span> <span class="nav-text">字符串</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE"><span class="nav-number">5.</span> <span class="nav-text">查询数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5"><span class="nav-number">5.1.</span> <span class="nav-text">基本查询语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.2.</span> <span class="nav-text">单表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%AD%97%E6%AE%B5"><span class="nav-number">5.2.1.</span> <span class="nav-text">查询所有字段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8SELECT%E8%AF%AD%E5%8F%A5%E4%B8%AD%E6%8C%87%E5%AE%9A%E5%AD%97%E6%AE%B5%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.2.2.</span> <span class="nav-text">在SELECT语句中指定字段查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.2.3.</span> <span class="nav-text">根据条件查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A6IN%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.2.4.</span> <span class="nav-text">带IN关键字的查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A6BETWEEN-AND%E7%9A%84%E8%8C%83%E5%9B%B4%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.2.5.</span> <span class="nav-text">带BETWEEN AND的范围查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A6LIKE%E7%9A%84%E5%AD%97%E7%AC%A6%E5%8C%B9%E9%85%8D%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.2.6.</span> <span class="nav-text">带LIKE的字符匹配查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E7%A9%BA%E5%80%BC%E6%88%96%E9%9D%9E%E7%A9%BA%E5%80%BC"><span class="nav-number">5.2.7.</span> <span class="nav-text">查询空值或非空值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A6AND%E7%9A%84%E5%A4%9A%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.2.8.</span> <span class="nav-text">带AND的多条件查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A6OR%E7%9A%84%E5%A4%9A%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.2.9.</span> <span class="nav-text">带OR的多条件查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E4%B8%8D%E9%87%8D%E5%A4%8D"><span class="nav-number">5.2.10.</span> <span class="nav-text">查询结果不重复</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8E%92%E5%BA%8F"><span class="nav-number">5.2.11.</span> <span class="nav-text">对查询结果排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.2.12.</span> <span class="nav-text">分组查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8LIMIT%E9%99%90%E5%88%B6%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E7%9A%84%E6%95%B0%E9%87%8F"><span class="nav-number">5.2.13.</span> <span class="nav-text">使用LIMIT限制查询结果的数量</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.3.</span> <span class="nav-text">使用集合函数查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.4.</span> <span class="nav-text">连接查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.4.1.</span> <span class="nav-text">内连接查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.4.2.</span> <span class="nav-text">外连接查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%8D%E5%90%88%E6%9D%A1%E4%BB%B6%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.4.3.</span> <span class="nav-text">复合条件连接查询</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.5.</span> <span class="nav-text">子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A6%E6%9C%89ANY%E3%80%81SOME%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.5.1.</span> <span class="nav-text">带有ANY、SOME关键字的子查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A6ALL%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.5.2.</span> <span class="nav-text">带ALL关键字的子查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A6EXISTS%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.5.3.</span> <span class="nav-text">带EXISTS关键字的子查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A6IN%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.5.4.</span> <span class="nav-text">带IN关键字的子查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A6%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.5.5.</span> <span class="nav-text">带比较运算符的子查询</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%88%E5%B9%B6%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C"><span class="nav-number">5.6.</span> <span class="nav-text">合并查询结果</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BA%E8%A1%A8%E5%92%8C%E5%AD%97%E6%AE%B5%E5%8F%96%E5%88%AB%E5%90%8D"><span class="nav-number">5.7.</span> <span class="nav-text">为表和字段取别名</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E8%A1%A8%E5%8F%96%E5%88%AB%E5%90%8D"><span class="nav-number">5.7.1.</span> <span class="nav-text">为表取别名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E5%AD%97%E6%AE%B5%E5%8F%96%E5%88%AB%E5%90%8D"><span class="nav-number">5.7.2.</span> <span class="nav-text">为字段取别名</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.8.</span> <span class="nav-text">使用正则表达式查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL8-0%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7-1"><span class="nav-number">5.9.</span> <span class="nav-text">MySQL8.0的新特性</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8F%92%E5%85%A5%E3%80%81%E6%9B%B4%E6%96%B0%E4%B8%8E%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="nav-number">6.</span> <span class="nav-text">插入、更新与删除数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-number">6.1.</span> <span class="nav-text">插入数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E8%A1%A8%E7%9A%84%E6%89%80%E6%9C%89%E5%AD%97%E6%AE%B5%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-number">6.1.1.</span> <span class="nav-text">为表的所有字段插入数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8C%E6%97%B6%E6%8F%92%E5%85%A5%E5%A4%9A%E6%9D%A1%E8%AE%B0%E5%BD%95"><span class="nav-number">6.1.2.</span> <span class="nav-text">同时插入多条记录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%86%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8F%92%E5%85%A5%E5%88%B0%E8%A1%A8%E4%B8%AD"><span class="nav-number">6.1.3.</span> <span class="nav-text">将查询结果插入到表中</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE"><span class="nav-number">6.2.</span> <span class="nav-text">更新数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="nav-number">6.3.</span> <span class="nav-text">删除数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BA%E8%A1%A8%E5%A2%9E%E5%8A%A0%E8%AE%A1%E7%AE%97%E5%88%97"><span class="nav-number">6.4.</span> <span class="nav-text">为表增加计算列</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL8-0%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7-2"><span class="nav-number">6.5.</span> <span class="nav-text">MySQL8.0的新特性</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95"><span class="nav-number">7.</span> <span class="nav-text">索引</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E7%AE%80%E4%BB%8B"><span class="nav-number">7.1.</span> <span class="nav-text">索引简介</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%90%AB%E4%B9%89%E5%92%8C%E7%89%B9%E7%82%B9"><span class="nav-number">7.1.1.</span> <span class="nav-text">索引的含义和特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-number">7.1.2.</span> <span class="nav-text">索引的分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99"><span class="nav-number">7.1.3.</span> <span class="nav-text">索引的设计原则</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="nav-number">7.2.</span> <span class="nav-text">创建索引</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E6%97%B6%E5%80%99%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="nav-number">7.2.1.</span> <span class="nav-text">在创建表的时候创建索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%E7%9A%84%E8%A1%A8%E4%B8%8A%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="nav-number">7.2.2.</span> <span class="nav-text">在已经存在的表上创建索引</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="nav-number">7.3.</span> <span class="nav-text">删除索引</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%B4%A2%E5%BC%95%E4%BF%A1%E6%81%AF"><span class="nav-number">7.4.</span> <span class="nav-text">查看索引信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL8-0%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7-3"><span class="nav-number">7.5.</span> <span class="nav-text">MySQL8.0的新特性</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%92%8C%E5%87%BD%E6%95%B0"><span class="nav-number">8.</span> <span class="nav-text">存储过程和函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA"><span class="nav-number">8.1.</span> <span class="nav-text">创建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B0%83%E7%94%A8"><span class="nav-number">8.2.</span> <span class="nav-text">调用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B-1"><span class="nav-number">8.3.</span> <span class="nav-text">查看</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9"><span class="nav-number">8.4.</span> <span class="nav-text">修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4-1"><span class="nav-number">8.5.</span> <span class="nav-text">删除</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AF%BC%E5%87%BA%E3%80%81%E5%AF%BC%E5%85%A5"><span class="nav-number">9.</span> <span class="nav-text">导出、导入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BC%E5%87%BA"><span class="nav-number">9.1.</span> <span class="nav-text">导出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5"><span class="nav-number">9.2.</span> <span class="nav-text">导入</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#explain"><span class="nav-number">10.</span> <span class="nav-text">explain</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E6%AE%B5%E5%90%AB%E4%B9%89"><span class="nav-number">10.1.</span> <span class="nav-text">字段含义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#select-type"><span class="nav-number">10.2.</span> <span class="nav-text">select_type</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#union"><span class="nav-number">10.2.1.</span> <span class="nav-text">union</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DEPENDENT-UNION-%E4%B8%8E-DEPENDENT-SUBQUERY"><span class="nav-number">10.2.2.</span> <span class="nav-text">DEPENDENT UNION 与 DEPENDENT SUBQUERY</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SUBQUERY"><span class="nav-number">10.2.3.</span> <span class="nav-text">SUBQUERY</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DERIVED"><span class="nav-number">10.2.4.</span> <span class="nav-text">DERIVED</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#type"><span class="nav-number">10.3.</span> <span class="nav-text">type</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#system"><span class="nav-number">10.3.1.</span> <span class="nav-text">system</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#const"><span class="nav-number">10.3.2.</span> <span class="nav-text">const</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#eq-ref"><span class="nav-number">10.3.3.</span> <span class="nav-text">eq_ref</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ref"><span class="nav-number">10.3.4.</span> <span class="nav-text">ref</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#unique-subquery"><span class="nav-number">10.3.5.</span> <span class="nav-text">unique_subquery</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#index-subquery"><span class="nav-number">10.3.6.</span> <span class="nav-text">index_subquery</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#range-%E5%8F%AA%E6%A3%80%E7%B4%A2%E7%BB%99%E5%AE%9A%E8%8C%83%E5%9B%B4%E7%9A%84%E8%A1%8C"><span class="nav-number">10.3.7.</span> <span class="nav-text">range 只检索给定范围的行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#index-%E5%8F%AA%E9%81%8D%E5%8E%86%E7%B4%A2%E5%BC%95%E6%A0%91"><span class="nav-number">10.3.8.</span> <span class="nav-text">index 只遍历索引树</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#all-%E9%81%8D%E5%8E%86%E5%85%A8%E8%A1%A8"><span class="nav-number">10.3.9.</span> <span class="nav-text">all 遍历全表</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">11.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E5%87%BD%E6%95%B0"><span class="nav-number">11.1.</span> <span class="nav-text">系统信息函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="nav-number">11.2.</span> <span class="nav-text">字符串函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E5%80%BC-1"><span class="nav-number">11.3.</span> <span class="nav-text">数值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F"><span class="nav-number">11.4.</span> <span class="nav-text">日期</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">12.</span> <span class="nav-text">运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">12.1.</span> <span class="nav-text">算数运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">12.2.</span> <span class="nav-text">比较运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">12.3.</span> <span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%8D%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">12.4.</span> <span class="nav-text">位运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%98%E5%85%88%E7%BA%A7"><span class="nav-number">12.5.</span> <span class="nav-text">优先级</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9D%83%E9%99%90"><span class="nav-number">13.</span> <span class="nav-text">权限</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="nav-number">14.</span> <span class="nav-text">问题及解决办法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%AF%E5%88%A0MySQL%E4%B8%ADroot%E6%89%80%E6%9C%89%E6%9D%83%E9%99%90%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">14.1.</span> <span class="nav-text">误删MySQL中root所有权限的方法</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">JIAHE</p>
  <div class="site-description" itemprop="description">Collection & Reuse</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">26</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">41</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner page posts-expand">
  
  


    
    
    
    <div class="post-block" lang="zh-CN"><header class="post-header">

<h1 class="post-title" itemprop="name headline">
</h1>

<div class="post-meta-container">
</div>

</header>

      
      
      <div class="post-body">
          <h1 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h1><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 命令行连接mysql
mysql -u root -p
&gt; Enter password: ******

# 退出
mysql&gt; exit
</code></pre>

<h1 id="数据库的基本操作"><a href="#数据库的基本操作" class="headerlink" title="数据库的基本操作"></a>数据库的基本操作</h1><h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"># 连接MySQL后，创建
CREATE database 数据库名;

# 建议使用这种方式进行创建数据库
CREATE database if not exists 数据库名 default charset utf8;

# 通过mysqladmin命令直接创建
mysqladmin -u root -p CREATE 数据库名;
Enter password:******
</code></pre>

<h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">DROP DATABASE database_name;</code></pre>

<h2 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">USE database_name;</code></pre>

<h2 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h2><p>查看数据库的定义</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SHOW CREATE DATABASE database_name;</code></pre>

<p>查看所有数据库</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SHOW databases;</code></pre>

<h1 id="数据表"><a href="#数据表" class="headerlink" title="数据表"></a>数据表</h1><h2 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">CREATE TABLE &lt;表名&gt;
(
    字段名1, 数据类型 [列级别约束条件] (默认值),
    字段名2, 数据类型 [列级别约束条件] (默认值),
    ......
    [表级约束条件]
);</code></pre>

<h3 id="使用主键约束"><a href="#使用主键约束" class="headerlink" title="使用主键约束"></a>使用主键约束</h3><ol>
<li>单字段主键</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- 方式1
字段名 数据类型 PRIMARY KEY [默认值]</code></pre>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- 方式2
[CONSTRAINT &lt;约束名&gt;] PRIMARY KEY [字段名]</code></pre>

<ol start="2">
<li>多字段联合主键</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">PRIMARY KEY [字段1, 字段2, ..., 字段n]</code></pre>

<h3 id="使用外键约束"><a href="#使用外键约束" class="headerlink" title="使用外键约束"></a>使用外键约束</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">[CONSTRAINT &lt;外键名&gt;] FOREIGN KEY 字段名1 [, 字段名2, ...] REFERENCES &lt;主表名&gt; 主键列1 [, 主键列2, ...]</code></pre>

<blockquote>
<p>关联指的是在关系型数据库中相关表之间的联系，它是通过相容或相同的属性或属性组来表示的，子表的外键必须关联父表的主键，且关联字段的数据类型必须匹配，如果类型不一样，则创建子表时，就会出现错误&quot;ERROR 1005（HY000）：Can&#39;t create table &#39;database。tablename&#39;(errno: 150)&quot;。</p>
</blockquote>
<h3 id="使用非空约束"><a href="#使用非空约束" class="headerlink" title="使用非空约束"></a>使用非空约束</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">字段名 数据类型 NOT NULL</code></pre>

<h3 id="使用唯一性约束"><a href="#使用唯一性约束" class="headerlink" title="使用唯一性约束"></a>使用唯一性约束</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- 方式1
字段名 数据类型 UNIQUE</code></pre>

<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- 方式2
[CONSTRAINT &lt;约束名&gt;] UNIQUE(&lt;字段名&gt;)</code></pre>

<h3 id="使用默认约束"><a href="#使用默认约束" class="headerlink" title="使用默认约束"></a>使用默认约束</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">字段名 数据类型 DEFAULT 默认值</code></pre>

<h3 id="设置表的属性值自动增加"><a href="#设置表的属性值自动增加" class="headerlink" title="设置表的属性值自动增加"></a>设置表的属性值自动增加</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">字段名 数据类型 AUTO_INCREMENT</code></pre>
<p>ENGINE 设置存储引擎，CHARSET 设置编码。</p>
<h2 id="查看数据表结构"><a href="#查看数据表结构" class="headerlink" title="查看数据表结构"></a>查看数据表结构</h2><ol>
<li>查看表基本结构语句</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- 方式1
DESCRIBE &lt;表名&gt;</code></pre>

<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- 方式2
DESC &lt;表名&gt;</code></pre>

<ol start="2">
<li>查看表详细结构语句</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SHOW CREATE TABLE &lt;表名&gt;</code></pre>

<h2 id="修改数据表"><a href="#修改数据表" class="headerlink" title="修改数据表"></a>修改数据表</h2><ol>
<li>修改表名</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- TO为可选参数，使用与否不影响结果
ALTER TABLE &lt;旧表名&gt; RENAME [TO] &lt;新表名&gt;;</code></pre>

<ol start="2">
<li>修改字段的数据类型</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">ALTER TABLE &lt;表名&gt; MODIFY &lt;字段名&gt; &lt;新数据类型&gt;</code></pre>

<ol start="3">
<li>修改字段名</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">ALTER TABLE &lt;表名&gt; CHANGE &lt;旧字段名&gt; &lt;新字段名&gt; &lt;新数据类型&gt;;</code></pre>

<blockquote>
<p>CHANGE也可以只修改数据类型，实现和MODIFY同样的效果，方法是将SQL语句中的“新字段名”和“旧字段名”设置为相同的名称，只改变“数据类型”。<br>由于不同类型的数据在机器中存储的方式及长度并不相同，修改数据类型可以会影响到数据表中已有的数据记录，因此当数据库表中已有数据时，不要轻易修改数据类型。</p>
</blockquote>
<ol start="4">
<li>添加字段</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">ALTER TABLE &lt;表名&gt; ADD &lt;新字段名&gt; &lt;数据类型&gt; [约束条件] [FIRST | AFTER 已存在字段名];</code></pre>

<ol start="5">
<li>删除字段</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">ALTER TABLE &lt;表名&gt; DROP &lt;字段名&gt;;</code></pre>

<ol start="6">
<li>修改字段的排列位置</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">ALTER TABLE &lt;表名&gt; MODIFY &lt;字段1&gt; &lt;数据类型&gt; FIRST | AFTER &lt;字段2&gt;;</code></pre>

<ol start="7">
<li>更改表的存储引擎</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">ALTER TABLE &lt;表名&gt; ENGINE&#x3D;&lt;更改后的存储引擎名&gt;</code></pre>

<table>
<thead>
<tr>
<th>引擎名</th>
<th>是否支持</th>
</tr>
</thead>
<tbody><tr>
<td>FEDERATED</td>
<td>否</td>
</tr>
<tr>
<td>MRG_MYISAM</td>
<td>是</td>
</tr>
<tr>
<td>MyISAM</td>
<td>是</td>
</tr>
<tr>
<td>BLACKHOLE</td>
<td>是</td>
</tr>
<tr>
<td>CSV</td>
<td>是</td>
</tr>
<tr>
<td>MEMORY</td>
<td>是</td>
</tr>
<tr>
<td>ARCHIVE</td>
<td>是</td>
</tr>
<tr>
<td>InnoDB</td>
<td>是，默认的存储引擎</td>
</tr>
<tr>
<td>PERFORMANCE_SCHEMA</td>
<td>是</td>
</tr>
</tbody></table>
<ol start="8">
<li>删除表的外键约束</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- “外键约束名”指在定义表时CONSTRAINT关键字后面的参数
ALTER TABLE &lt;表名&gt; DROP FOREIGN KEY &lt;外键约束名&gt;</code></pre>

<h2 id="删除数据表"><a href="#删除数据表" class="headerlink" title="删除数据表"></a>删除数据表</h2><ol>
<li>删除没有被关联的表</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">DROP TABLE [IF EXISTS] 表1，表2，...，表n;
</code></pre>

<ol start="2">
<li>删除被其他表关联的主表</li>
</ol>
<p>在数据表之间存在外键关联的情况下，如果直接删除父表，结果会显示失败，原因是直接删除将破坏表的参照完整性。如果必须要删除，可以先删除与它关联的子表，在删除父表，只是这样就同时删除了两个表中的数据。有的情况下可能要保留子表，这是若要单独删除父表，只需要将关联的表的外键约束条件取消，然后就可以删除父表了。</p>
<h2 id="MySQL8-0的新特性"><a href="#MySQL8-0的新特性" class="headerlink" title="MySQL8.0的新特性"></a>MySQL8.0的新特性</h2><ul>
<li><p>默认字符集改为utf8mb4</p>
<blockquote>
<p>在MySQL8.0版本之前，默认字符集为latin1，utf8字符集指向的是utf8mb3。</p>
</blockquote>
</li>
<li><p>自增变量的持久化</p>
<blockquote>
<p>以MySQL5.7版本为例<br>假如当前最后一个记录的id为3，此时删除id=3的记录，然后再插入一条新记录，此时最后一个记录的id为4。若将当前id=4的记录删除之后，重启MySQL服务，按照之前的id自增逻辑来看，此时新增记录后，id应该为5。但是实际上id为3，因为MySQL重置了AUTO_INCREMENT=max(primary key)+1，MySQL对重启之前的id自增到4的记录没有持久化保存下来，随着服务的重启而丢失了。这种现象可能导致业务主键冲突或其他难以发现的问题。</p>
</blockquote>
</li>
</ul>
<h2 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- 基本语法
INSERT INTO table_name ( field1, field2, ..., fieldN )
                       values
                       ( value1, value2, ..., valueN );</code></pre>

<blockquote>
<p>如果数据是字符型，必须使用单引号或者双引号，如：&quot;value&quot;。</p>
</blockquote>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- 字段和值要一一对应
INSERT INTO &#96;t_user_info&#96;
(&#96;id&#96;, &#96;gmt_CREATE&#96;, &#96;gmt_modified&#96;, &#96;creator&#96;, &#96;modifier&#96;, &#96;is_deleted&#96;, &#96;phone&#96;, &#96;name&#96;, &#96;role_id&#96;, &#96;role_name&#96;, &#96;company_id&#96;, &#96;company_name&#96;, &#96;dept_id&#96;, &#96;dept_name&#96;, &#96;user_type&#96;, &#96;status&#96;, &#96;is_frozen&#96;, &#96;is_test&#96;, &#96;is_invest_frozen&#96;, &#96;password&#96;, &#96;salt&#96;, &#96;court_id&#96;, &#96;court_name&#96;, &#96;legal_type&#96;) 
VALUES
(525, &#39;2019-04-26 09:46:00&#39;, &#39;2020-06-11 14:06:49&#39;, &#39;system&#39;, &#39;系统管理员&#39;, &#39;n&#39;, 13634184519, &#39;系统管理员&#39;, 0, &#39;管理员&#39;, NULL, NULL, NULL, NULL, &#39;operator&#39;, &#39;normal&#39;, &#39;n&#39;, &#39;n&#39;, &#39;n&#39;, &#39;42f29eb14a981acdce097cef6a45150d&#39;, &#39;j78pqrq9p47kcqu1&#39;, &#39;&#39;, &#39;&#39;, &#39;company&#39;);

-- 插入多条数据
INSERT INTO &#96;t_user_info&#96;
(&#96;gmt_CREATE&#96;, &#96;gmt_modified&#96;, &#96;creator&#96;, &#96;modifier&#96;, &#96;is_deleted&#96;, &#96;phone&#96;, &#96;name&#96;, &#96;role_id&#96;, &#96;role_name&#96;, &#96;company_id&#96;, &#96;company_name&#96;, &#96;dept_id&#96;, &#96;dept_name&#96;, &#96;user_type&#96;, &#96;status&#96;, &#96;is_frozen&#96;, &#96;is_test&#96;, &#96;is_invest_frozen&#96;, &#96;password&#96;, &#96;salt&#96;, &#96;court_id&#96;, &#96;court_name&#96;, &#96;legal_type&#96;) 
VALUES 
(&#39;2019-04-26 09:46:00&#39;, &#39;2020-06-11 14:06:49&#39;, &#39;system&#39;, &#39;系统管理员&#39;, &#39;n&#39;, 13634184519, &#39;系统管理员&#39;, 0, &#39;管理员&#39;, NULL, NULL, NULL, NULL, &#39;operator&#39;, &#39;normal&#39;, &#39;n&#39;, &#39;n&#39;, &#39;n&#39;, &#39;42f29eb14a981acdce097cef6a45150d&#39;, &#39;j78pqrq9p47kcqu1&#39;, NULL, &#39;&#39;, &#39;company&#39;), 
(533, &#39;2019-07-02 19:24:25&#39;, &#39;2020-11-16 17:15:54&#39;, &#39;管理员&#39;, &#39;系统管理员&#39;, &#39;n&#39;, 15155555555, &#39;打工人-张三&#39;, 3, &#39;打工人&#39;, NULL, NULL, 1, &#39;测试部门&#39;, &#39;person&#39;, &#39;normal&#39;, &#39;n&#39;, &#39;n&#39;, &#39;n&#39;, &#39;26d2014872f282ff7e682a5271ffbbed&#39;, &#39;9cpt983corj1n59d&#39;, 298, &#39;测试法院&#39;, &#39;court&#39;);</code></pre>

<blockquote>
<p>如果没有提供<code>id</code>，则会自动递增</p>
</blockquote>
<h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><p>后续如果要对数据库做性能优化，了解清楚数据类型是前置条件。</p>
<p>MySQL支持多种类型，大致可以分为三类：数值、日期/时间和字符串(字符)类型。</p>
<h2 id="数值"><a href="#数值" class="headerlink" title="数值"></a>数值</h2><table>
<thead>
<tr>
<th>类型</th>
<th align="left">大小</th>
<th align="left">范围（有符号）</th>
<th align="left">范围（无符号）</th>
<th align="left">用途</th>
</tr>
</thead>
<tbody><tr>
<td>TINYINT</td>
<td align="left">1 byte</td>
<td align="left">(-128，127)</td>
<td align="left">(0，255)</td>
<td align="left">小整数值</td>
</tr>
<tr>
<td>SMALLINT</td>
<td align="left">2 bytes</td>
<td align="left">(-32 768，32 767)</td>
<td align="left">(0，65 535)</td>
<td align="left">大整数值</td>
</tr>
<tr>
<td>MEDIUMINT</td>
<td align="left">3 bytes</td>
<td align="left">(-8 388 608，8 388 607)</td>
<td align="left">(0，16 777 215)</td>
<td align="left">大整数值</td>
</tr>
<tr>
<td>INT或INTEGER</td>
<td align="left">4 bytes</td>
<td align="left">(-2 147 483 648，2 147 483 647)</td>
<td align="left">(0，4 294 967 295)</td>
<td align="left">大整数值</td>
</tr>
<tr>
<td>BIGINT</td>
<td align="left">8 bytes</td>
<td align="left">(-9,223,372,036,854,775,808，<br />9 223 372 036 854 775 807)</td>
<td align="left">(0，18 446 744 073 709 551 615)</td>
<td align="left">极大整数值</td>
</tr>
<tr>
<td>FLOAT</td>
<td align="left">4 bytes</td>
<td align="left">(-3.402 823 466 E+38，-1.175 494 351 E-38)，<br />0，<br />(1.175 494 351 E-38，3.402 823 466 351 E+38)</td>
<td align="left">0，(1.175 494 351 E-38，3.402 823 466 E+38)</td>
<td align="left">单精度 浮点数值</td>
</tr>
<tr>
<td>DOUBLE</td>
<td align="left">8 bytes</td>
<td align="left">(-1.797 693 134 862 315 7 E+308，-2.225 073 858 507 201 4 E-308)，<br />0，<br />(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td>
<td align="left">0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td>
<td align="left">双精度 浮点数值</td>
</tr>
<tr>
<td>DECIMAL</td>
<td align="left">对DECIMAL(M,D) ，如果M&gt;D，为M+2否则为D+2</td>
<td align="left">依赖于M和D的值</td>
<td align="left">依赖于M和D的值</td>
<td align="left">小数值</td>
</tr>
</tbody></table>
<h2 id="日期和时间"><a href="#日期和时间" class="headerlink" title="日期和时间"></a>日期和时间</h2><p>每个时间类型有一个有效值范围和一个&quot;零&quot;值，当指定不合法的MySQL不能表示的值时使用&quot;零&quot;值。</p>
<table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">大小</th>
<th align="left">范围</th>
<th align="left">格式</th>
<th align="left">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="left">DATE</td>
<td align="left">3bytes</td>
<td align="left">1000-01-01/9999-12-31</td>
<td align="left">YYYY-MM-DD</td>
<td align="left">日期值</td>
</tr>
<tr>
<td align="left">TIME</td>
<td align="left">3bytes</td>
<td align="left">&#39;-838:59:59&#39;/&#39;838:59:59&#39;</td>
<td align="left">HH:MM:SS</td>
<td align="left">时间值或持续时间</td>
</tr>
<tr>
<td align="left">YEAR</td>
<td align="left">1bytes</td>
<td align="left">1901/2155</td>
<td align="left">YYYY</td>
<td align="left">年份值</td>
</tr>
<tr>
<td align="left">DATETIME</td>
<td align="left">8bytes</td>
<td align="left">1000-01-01 00:00:00/9999-12-31 23:59:59</td>
<td align="left">YYYY-MM-DD HH:MM:SS</td>
<td align="left">混合日期和时间值</td>
</tr>
<tr>
<td align="left">TIMESTAMP</td>
<td align="left">4bytes</td>
<td align="left">1970-01-01 00:00:00/2038结束时间是第 <strong>2147483647</strong> 秒，北京时间 <strong>2038-1-19 11:14:07</strong>，格林尼治时间 2038年1月19日 凌晨 03:14:07</td>
<td align="left">YYYYMMDD HHMMSS</td>
<td align="left">混合日期和时间值，时间戳</td>
</tr>
</tbody></table>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">大小</th>
<th align="left">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="left">CHAR</td>
<td align="left">0 - 255 bytes</td>
<td align="left">定长字符串</td>
</tr>
<tr>
<td align="left">VARCHAR</td>
<td align="left">0 - 65535 bytes</td>
<td align="left">变长字符串</td>
</tr>
<tr>
<td align="left">TINYBLOB</td>
<td align="left">0 - 255 bytes</td>
<td align="left">不超过 255 个字符的二进制字符串</td>
</tr>
<tr>
<td align="left">TINYTEXT</td>
<td align="left">0 - 255 bytes</td>
<td align="left">短文本字符串</td>
</tr>
<tr>
<td align="left">BLOB</td>
<td align="left">0 - 65 535 bytes</td>
<td align="left">二进制形式的长文本数据</td>
</tr>
<tr>
<td align="left">TEXT</td>
<td align="left">0 - 65 535 bytes</td>
<td align="left">长文本数据</td>
</tr>
<tr>
<td align="left">MEDIUMBLOB</td>
<td align="left">0 - 16 777 215 bytes</td>
<td align="left">二进制形式的中等长度文本数据</td>
</tr>
<tr>
<td align="left">MEDIUMTEXT</td>
<td align="left">0 - 16 777 215 bytes</td>
<td align="left">中等长度文本数据</td>
</tr>
<tr>
<td align="left">LONGBLOB</td>
<td align="left">0 - 4 294 967 295 bytes</td>
<td align="left">二进制形式的极大文本数据</td>
</tr>
<tr>
<td align="left">LONGTEXT</td>
<td align="left">0 - 4 294 967 295 bytes</td>
<td align="left">极大文本数据</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>注意</strong>：char(n) 和 varchar(n) 中括号中 n 代表字符的个数，并不代表字节个数，比如 CHAR(30) 就可以存储 30 个字符。</p>
</blockquote>
<h1 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h1><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- 执行顺序
1.  from 
2.  on
3.  join
4.  where 
5.  group by (开始使用select中的别名，后面的语句中都可以使用)
6.  avg, sum等函数
7.  having 
8.  select 
9.  distinct 
10. order by
11. limit 

-- 子句执行顺序
-&gt; 开始 
-&gt; FROM 子句 
-&gt; WHERE 子句 
-&gt; GROUP BY 子句 
-&gt; HAVING 子句 
-&gt; ORDER BY 子句 
-&gt; SELECT 子句 
-&gt; LIMIT 子句
-&gt; 最终结果 </code></pre>

<h2 id="基本查询语句"><a href="#基本查询语句" class="headerlink" title="基本查询语句"></a>基本查询语句</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT
    &#123; * | &lt;字段列表&gt; &#125;
    [
        FROM &lt;表1&gt;, &lt;表2&gt; ...
        [WHERE &lt;表达式&gt;]
        [GROUP BY &lt;group by definition&gt;]
        [HAVING &lt;expression&gt; [&#123;&lt;operator&gt; &lt;expression&gt;&#125; ...]]
        [ORDER BY &lt;order by definition&gt;]
        [LIMIT [&lt;offset&gt;,] &lt;row count&gt;]
    ]
SELECT [字段1, 字段2, ..., 字段n]
FROM [表或视图]
WHERE [查询条件];</code></pre>

<h2 id="单表查询"><a href="#单表查询" class="headerlink" title="单表查询"></a>单表查询</h2><h3 id="查询所有字段"><a href="#查询所有字段" class="headerlink" title="查询所有字段"></a>查询所有字段</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT * FROM &lt;表名&gt;</code></pre>

<h3 id="在SELECT语句中指定字段查询"><a href="#在SELECT语句中指定字段查询" class="headerlink" title="在SELECT语句中指定字段查询"></a>在SELECT语句中指定字段查询</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT [字段名1, 字段名2, ..., 字段名n] FROM &lt;表名&gt;</code></pre>

<h3 id="根据条件查询"><a href="#根据条件查询" class="headerlink" title="根据条件查询"></a>根据条件查询</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT [字段名1, 字段名2, ..., 字段名n]
FROM &lt;表名&gt;
WHERE &lt;查询条件&gt;</code></pre>

<h3 id="带IN关键字的查询"><a href="#带IN关键字的查询" class="headerlink" title="带IN关键字的查询"></a>带IN关键字的查询</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT [字段名1, 字段名2, ..., 字段名n]
FROM &lt;表名&gt;
WHERE 字段名 [NOT] IN (value1, value2, ..., valueN)</code></pre>

<h3 id="带BETWEEN-AND的范围查询"><a href="#带BETWEEN-AND的范围查询" class="headerlink" title="带BETWEEN AND的范围查询"></a>带BETWEEN AND的范围查询</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT [字段名1, 字段名2, ..., 字段名n]
FROM &lt;表名&gt;
WHERE 字段名 [NOT] BETWEEN value_min AND value_max</code></pre>

<h3 id="带LIKE的字符匹配查询"><a href="#带LIKE的字符匹配查询" class="headerlink" title="带LIKE的字符匹配查询"></a>带LIKE的字符匹配查询</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT [字段名1, 字段名2, ..., 字段名n]
FROM &lt;表名&gt;
WHERE 字段名 LIKE &lt;模糊表达式&gt;</code></pre>

<pre class="line-numbers language-none"><code class="language-none">&#39;%a&#39;     &#x2F;&#x2F;以a结尾的字符串
&#39;a%&#39;     &#x2F;&#x2F;以a开头的字符串
&#39;%a%&#39;    &#x2F;&#x2F;含有a的数据
&#39;_a_&#39;    &#x2F;&#x2F;三位且中间字母是a的
&#39;_a&#39;     &#x2F;&#x2F;两位且结尾字母是a的_
&#39;a_&#39;     &#x2F;&#x2F;两位且开头字母是a的</code></pre>

<ul>
<li><code>%</code>：表示任意 0 个或多个字符。可匹配任意类型和长度的字符，有些情况下若是中文，请使用两个百分号（%%）表示。</li>
<li><code>_</code>：表示任意单个字符。匹配单个任意字符，它常用来限制表达式的字符长度语句。</li>
<li><code>[]</code>：表示括号内所列字符中的一个（类似正则表达式）。指定一个字符、字符串或范围，要求所匹配对象为它们中的任一个。</li>
<li><code>[^]</code> ：表示不在括号所列之内的单个字符。其取值和 [] 相同，但它要求所匹配对象为指定字符以外的任一个字符。</li>
<li>查询内容包含通配符时,由于通配符的缘故，导致我们查询特殊字符 “%”、“_”、“[” 的语句无法正常实现，而把特殊字符用 “[ ]” 括起便可正常查询。</li>
</ul>
<h3 id="查询空值或非空值"><a href="#查询空值或非空值" class="headerlink" title="查询空值或非空值"></a>查询空值或非空值</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT [字段名1, 字段名2, ..., 字段名n]
FROM &lt;表名&gt;
WHERE 字段名 IS [NOT] NULL</code></pre>

<h3 id="带AND的多条件查询"><a href="#带AND的多条件查询" class="headerlink" title="带AND的多条件查询"></a>带AND的多条件查询</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT [字段名1, 字段名2, ..., 字段名n]
FROM &lt;表名&gt;
WHERE &lt;条件表达式1&gt; AND &lt;条件表达式2&gt; AND ... AND &lt;条件表达式n&gt;</code></pre>

<h3 id="带OR的多条件查询"><a href="#带OR的多条件查询" class="headerlink" title="带OR的多条件查询"></a>带OR的多条件查询</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT [字段名1, 字段名2, ..., 字段名n]
FROM &lt;表名&gt;
WHERE &lt;条件表达式1&gt; OR &lt;条件表达式2&gt; OR ... OR &lt;条件表达式n&gt;</code></pre>

<blockquote>
<p>OR可以和AND一起使用，但是在使用时要注意两者的优先级，由于AND的优先级高于OR，因此先对AND两边的操作数进行操作，再与OR中的操作数结合。</p>
</blockquote>
<h3 id="查询结果不重复"><a href="#查询结果不重复" class="headerlink" title="查询结果不重复"></a>查询结果不重复</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT DISTINCT 字段名 FROM &lt;表名&gt;</code></pre>

<h3 id="对查询结果排序"><a href="#对查询结果排序" class="headerlink" title="对查询结果排序"></a>对查询结果排序</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT [字段名1, 字段名2, ..., 字段名n]
FROM &lt;表名&gt;
ORDER BY 字段名1 [, 字段名2, ..., 字段名n] [ASC(默认) | DESC]</code></pre>

<blockquote>
<p>在对多列进行排序的时候，首先排序的第一列必须有相同的列值，才会对第二列进行排序，如果第一列数据中所有值都是唯一的，将不再对第二列进行排序。</p>
</blockquote>
<blockquote>
<p>ASC和DESC关键字只对其前面的字段起作用，如果需要对多列进行排序并且指定排序方式时，需要在每个字段后面都加上排序方式，如：ORDER BY a DESC, b ASC</p>
</blockquote>
<h3 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">[GROUP BY 字段] [HAVING &lt;条件表达式&gt;]</code></pre>

<h3 id="使用LIMIT限制查询结果的数量"><a href="#使用LIMIT限制查询结果的数量" class="headerlink" title="使用LIMIT限制查询结果的数量"></a>使用LIMIT限制查询结果的数量</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">LIMIT [位置偏移量,] 行数</code></pre>

<blockquote>
<p>位置偏移量从0开始，所以&quot;LIMIT 1, 1&quot;将返回第二行，而不是第一行</p>
</blockquote>
<h2 id="使用集合函数查询"><a href="#使用集合函数查询" class="headerlink" title="使用集合函数查询"></a>使用集合函数查询</h2><h2 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h2><h3 id="内连接查询"><a href="#内连接查询" class="headerlink" title="内连接查询"></a>内连接查询</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- 方式1
SELECT T1.*, T2.*
FROM t_1 AS T1, t_2 AS T2
WHERE T1.字段1 &#x3D; T2.字段2</code></pre>

<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- 方式2
SELECT T1.*, T2.*
FROM t_1 AS T1 INNER JOIN t_2 AS T2
ON T1.字段1 &#x3D; T2.字段2</code></pre>

<h3 id="外连接查询"><a href="#外连接查询" class="headerlink" title="外连接查询"></a>外连接查询</h3><ol>
<li><p>LEFT JOIN 左连接：返回包括左表中所有记录和右表中连接字段相等的记录</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT T1.*, T2.*
FROM t_1 AS T1 LEFT JOIN t_2 AS T2
ON T1.字段1 &#x3D; T2.字段2</code></pre></li>
<li><p>RIGHT JOIN 右连接：返回包括右表中所有记录和左表中连接字段相等的记录</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT T1.*, T2.*
FROM t_1 AS T1 RIGHT JOIN t_2 AS T2
ON T1.字段1 &#x3D; T2.字段2</code></pre></li>
</ol>
<h3 id="复合条件连接查询"><a href="#复合条件连接查询" class="headerlink" title="复合条件连接查询"></a>复合条件连接查询</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">[LEFT | INNER | RIGHT] &lt;表名&gt;
ON &lt;等值条件表达式1&gt; AND &lt;等值条件表达式2&gt;</code></pre>

<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><h3 id="带有ANY、SOME关键字的子查询"><a href="#带有ANY、SOME关键字的子查询" class="headerlink" title="带有ANY、SOME关键字的子查询"></a>带有ANY、SOME关键字的子查询</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">WHERE &lt;字段名&gt; &lt;运算符&gt; [ANY | SOME] (SELECT语句)</code></pre>

<blockquote>
<p>ANY和SOME关键字是同义词，表示满足其中任一条件，他们允许创建一个表达式对子查询的返回值列表进行比较，只要满足内层子查询中的任何一个比较条件，就返回一个结果作为外层查询的条件。</p>
</blockquote>
<h3 id="带ALL关键字的子查询"><a href="#带ALL关键字的子查询" class="headerlink" title="带ALL关键字的子查询"></a>带ALL关键字的子查询</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">WHERE &lt;字段名&gt; &lt;运算符&gt; ALL (SELECT语句)</code></pre>

<blockquote>
<p>与ANY和SOME相反，需要满足所有内层查询的条件。</p>
</blockquote>
<h3 id="带EXISTS关键字的子查询"><a href="#带EXISTS关键字的子查询" class="headerlink" title="带EXISTS关键字的子查询"></a>带EXISTS关键字的子查询</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">WHERE [NOT] EXISTS (SELECT语句)</code></pre>

<blockquote>
<p>只要EXISTS关键字后面的子查询返回的行数大于0，则返回TRUE；外层查询才会继续查询。加上NOT关键字，则含义相反。</p>
</blockquote>
<h3 id="带IN关键字的子查询"><a href="#带IN关键字的子查询" class="headerlink" title="带IN关键字的子查询"></a>带IN关键字的子查询</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">WHERE 字段名1 [NOT] IN (SELECT 字段名2 FROM ...)</code></pre>

<h3 id="带比较运算符的子查询"><a href="#带比较运算符的子查询" class="headerlink" title="带比较运算符的子查询"></a>带比较运算符的子查询</h3><h2 id="合并查询结果"><a href="#合并查询结果" class="headerlink" title="合并查询结果"></a>合并查询结果</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT [字段名1, 字段名2, ..., 字段名n] FROM &lt;表名1&gt;
UNION [ALL]
SELECT [字段名1, 字段名2, ..., 字段名n] FROM &lt;表名2&gt;</code></pre>

<blockquote>
<p>利用UNION关键字，可以给出多条SELECT语句，并将它们的结果组合成单个结果集，合并时，两个表对应的列数和数据类型必须相同。各个SELECT语句之间使用UNION或UNION ALL关键字分隔，UNION不使用关键字ALL，执行的时候删除重复的记录，所有返回的行都是唯一的，使用关键字ALL的作用是不删除重复行也不对结果集进排序。</p>
</blockquote>
<h2 id="为表和字段取别名"><a href="#为表和字段取别名" class="headerlink" title="为表和字段取别名"></a>为表和字段取别名</h2><h3 id="为表取别名"><a href="#为表取别名" class="headerlink" title="为表取别名"></a>为表取别名</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">&lt;表名&gt; [AS] 表别名</code></pre>

<h3 id="为字段取别名"><a href="#为字段取别名" class="headerlink" title="为字段取别名"></a>为字段取别名</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">&lt;列名&gt; [AS] 列别名</code></pre>

<h2 id="使用正则表达式查询"><a href="#使用正则表达式查询" class="headerlink" title="使用正则表达式查询"></a>使用正则表达式查询</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">WHERE 字段名 REGEXP &#39;正则表达式字符串&#39;</code></pre>

<table>
<thead>
<tr>
<th align="left">模式</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">^</td>
<td align="left">匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 &#39;\n&#39; 或 &#39;\r&#39; 之后的位置。</td>
</tr>
<tr>
<td align="left">$</td>
<td align="left">匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 &#39;\n&#39; 或 &#39;\r&#39; 之前的位置。</td>
</tr>
<tr>
<td align="left">.</td>
<td align="left">匹配除 &quot;\n&quot; 之外的任何单个字符。要匹配包括 &#39;\n&#39; 在内的任何字符，请使用像 &#39;[.\n]&#39; 的模式。</td>
</tr>
<tr>
<td align="left">[...]</td>
<td align="left">字符集合。匹配所包含的任意一个字符。例如， &#39;[abc]&#39; 可以匹配 &quot;plain&quot; 中的 &#39;a&#39;。</td>
</tr>
<tr>
<td align="left">[^...]</td>
<td align="left">负值字符集合。匹配未包含的任意字符。例如， &#39;[^abc]&#39; 可以匹配 &quot;plain&quot; 中的&#39;p&#39;。</td>
</tr>
<tr>
<td align="left">p1|p2|p3</td>
<td align="left">匹配 p1 或 p2 或 p3。例如，&#39;z|food&#39; 能匹配 &quot;z&quot; 或 &quot;food&quot;。&#39;(z|f)ood&#39; 则匹配 &quot;zood&quot; 或 &quot;food&quot;。</td>
</tr>
<tr>
<td align="left">*</td>
<td align="left">匹配前面的子表达式零次或多次。例如，zo* 能匹配 &quot;z&quot; 以及 &quot;zoo&quot;。* 等价于{0,}。</td>
</tr>
<tr>
<td align="left">+</td>
<td align="left">匹配前面的子表达式一次或多次。例如，&#39;zo+&#39; 能匹配 &quot;zo&quot; 以及 &quot;zoo&quot;，但不能匹配 &quot;z&quot;。+ 等价于 {1,}。</td>
</tr>
<tr>
<td align="left">{n}</td>
<td align="left">n 是一个非负整数。匹配确定的 n 次。例如，&#39;o{2}&#39; 不能匹配 &quot;Bob&quot; 中的 &#39;o&#39;，但是能匹配 &quot;food&quot; 中的两个 o。</td>
</tr>
<tr>
<td align="left">{n,m}</td>
<td align="left">m 和 n 均为非负整数，其中n &lt;= m。最少匹配 n 次且最多匹配 m 次。</td>
</tr>
</tbody></table>
<h2 id="MySQL8-0的新特性-1"><a href="#MySQL8-0的新特性-1" class="headerlink" title="MySQL8.0的新特性"></a>MySQL8.0的新特性</h2><ul>
<li>GROUP BY 不再隐式排序</li>
<li>新增通用表表达式CTE（Common Table Expression）</li>
</ul>
<h1 id="插入、更新与删除数据"><a href="#插入、更新与删除数据" class="headerlink" title="插入、更新与删除数据"></a>插入、更新与删除数据</h1><h2 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h2><h3 id="为表的所有字段插入数据"><a href="#为表的所有字段插入数据" class="headerlink" title="为表的所有字段插入数据"></a>为表的所有字段插入数据</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">INSERT INTO &lt;表名&gt; (字段名列表) VALUES (字段值列表)</code></pre>

<blockquote>
<p>若字段名列表省略，则字段值列表必须与整个表的字段名相对应，位置和数量都要相同。</p>
</blockquote>
<h3 id="同时插入多条记录"><a href="#同时插入多条记录" class="headerlink" title="同时插入多条记录"></a>同时插入多条记录</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">INSERT INTO &lt;表名&gt; (字段名列表)
VALUES (字段值列表1), (字段值列表2), ..., (字段值列表n)</code></pre>

<h3 id="将查询结果插入到表中"><a href="#将查询结果插入到表中" class="headerlink" title="将查询结果插入到表中"></a>将查询结果插入到表中</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">INSERT INTO &lt;表名1&gt; (字段名列表1)
SELECT (字段名列表2) FROM &lt;表名2&gt; WHERE (condition)</code></pre>

<blockquote>
<p>字段名列表1和字段名列表2要个数相同、数据类型相同</p>
</blockquote>
<h2 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">UPDATE &lt;表名&gt;
SET 字段名1 &#x3D; 字段值1, 字段名2 &#x3D; 字段值2, ..., 字段名n &#x3D; 字段值n
WHERE (condition)</code></pre>

<h2 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"># 清空数据表，保留表结构，支持where
# 对于 MyISAM 会立刻释放磁盘空间，InnoDB 不会释放磁盘空间
# 带条件的删除，表结构不变，不管是 innodb 还是 MyISAM 都不会释放磁盘空间
# 使用 optimize table table_name 会立刻释放磁盘空间，不管是 innodb 还是 myisam
DELETE FROM &lt;表名&gt; [WHERE &lt;condition&gt;]

# 该命令直接删除原来的表，并重新创建一个表，因为是直接删除表而不是删除记录，所以执行速度比DELETE快
TRUNCATE table table_name;</code></pre>

<h2 id="为表增加计算列"><a href="#为表增加计算列" class="headerlink" title="为表增加计算列"></a>为表增加计算列</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">CRAETE TABLE &lt;表名&gt;
(
    &lt;字段名&gt; &lt;数据类型&gt; [GENERATED ALWAYS] AS (expression) [VIRTUAL | STORED] [UNIQUE [KEY]] [COMMENT comment] [NOT NULL | NULL] [[PRIMARY] KEY]
)</code></pre>

<h2 id="MySQL8-0的新特性-2"><a href="#MySQL8-0的新特性-2" class="headerlink" title="MySQL8.0的新特性"></a>MySQL8.0的新特性</h2><ul>
<li>DDL的原子化</li>
</ul>
<h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><h2 id="索引简介"><a href="#索引简介" class="headerlink" title="索引简介"></a>索引简介</h2><h3 id="索引的含义和特点"><a href="#索引的含义和特点" class="headerlink" title="索引的含义和特点"></a>索引的含义和特点</h3><p>索引是一个单独的、存储在磁盘上的数据库结构，包含着对数据表里所有记录的引用指针。使用索引可以快速找出在某个或多个列中有一特定值的行，所有 MySQL列类型都可以被索引，对相关列使用索引是提高査询操作速度的最佳途径。</p>
<p>例如，数据库中有2万条记录，现在要执行一个查询&quot;SELECT * FROM table where num=10000&quot;，如果没有索引，就必须遍历整个表，直到num等于100的这一行被找到为止如果在num列上创建索引， MySQL不需要任何扫描，直接在索引里面找10000就可以得知这行的位置。可见，索引的建立可以提高数据库的查询速度。</p>
<p>索引是在存储引擎中实现的，因此，每种存储引擎的索引都不一定完全相同，并且每种存储引擎也不一定支持所有索引类型。根据存储引擎定义每个表的最大索引数和最大索引长度。所有存储引擎支持每个表至少16个索引，总索引长度至少为256字节。大多数存储引擎有更高的限制。MySQL中索引的存储类型有两种，即BTREE和HASH，具体和表的存储引擎相关；MyISAM和InnoDB存储引擎只支持BTREE索引；MEMORY/HEAP存储引擎可以支持HASH和BTREE索引。</p>
<p>索引的优点主要有以下几条：</p>
<ol>
<li>通过创建唯一索引，可以保证数据库表中每一行数据的唯一性。</li>
<li>可以大大加快数据的查询速度，这也是创建索引的主要原因。</li>
<li>在实现数据的参考完整性方面，可以加速表和表之间的连接。</li>
<li>在使用分组和排序子句进行数据查询时，也可以显著减少查询中分组和排序的时间。</li>
</ol>
<p>增加索引也有许多不利的方面，主要表现在如下几个方面：</p>
<ol>
<li>创建索引和维护索引要耗费时间，并且随着薮据量的增加所耗费的时间也会增加。</li>
<li>索引需要占磁盘空间，除了数据表占数据空间之外，每一个索引还要占一定的物理空间，如果有大量的索引，索引文件可能比数据文件更快达到最大文件尺寸。</li>
<li>当对表中的数据进行增加、删除和修改的时候，索引也要动态地维护，这样就降低了数据的维护速度。</li>
</ol>
<h3 id="索引的分类"><a href="#索引的分类" class="headerlink" title="索引的分类"></a>索引的分类</h3><ol>
<li><p>普通索引和唯一索引</p>
<blockquote>
<p>普通索引是MySQL中基本索引类型，允许定义索引的列中插入重复值和空值。<br>唯一索引要求索引列的值必须位置，但允许有空值。如果是组合索引，则列值的组合必须唯一，主键索引是一种特殊的唯一索引，不允许有空值。</p>
</blockquote>
</li>
<li><p>单列索引和组合索引</p>
<blockquote>
<p>单列索引即一个索引只包含单个列，一个表可以有多个单列索引。<br>组合索引是指在表的多个字段组合上创建的索引，只有在查询条件中使用了这些字段的左边字段时，索引才会被使用，使用组合索引时遵循最左前缀集合。</p>
</blockquote>
</li>
<li><p>全文索引</p>
<blockquote>
<p>全文索引类型为 FULLTEXT,在定义索引的列上支持值的全文查找,允许在这些索引列中插入重复值和空值。全文索引可以在CHAR、VARCHAR或者TEXT类型的列上创建。MySQL中只有MyISAM存储引擎支持全文索引。</p>
</blockquote>
</li>
<li><p>空间索引</p>
<blockquote>
<p>空间索引是对空间数据类型的字段建立的索引, MySQL中的空间数据类型有4种,分别是GEOMETRY、PONT、LINESTRING和POLYGON。MySQL使用SPATIAL关键字进行扩展,使得能够用创建正规索引类似的语法创建空间索引。创建空间索引的列,必须将其声明为NOT NULL,空间索引只能在存储引擎为 MyISAM的表中创建。</p>
</blockquote>
</li>
</ol>
<h3 id="索引的设计原则"><a href="#索引的设计原则" class="headerlink" title="索引的设计原则"></a>索引的设计原则</h3><p>索引设计不合理或者缺少索引都会对数据库和应用程序的性能造成障碍。高效的索引对于获<br>得良好的性能非常重要。设计索引时，应该考虑以下准则:</p>
<ol>
<li>索引并非越多越好，一个表中如有大量的索引，不仅占用磁盘空间，还会影响 INSERTDELETE、 UPDATE等语句的性能，因为在表中的数据更改时，索引也会进行调整和更新。</li>
<li>避免对经常更新的表进行过多的索引，并且索引中的列要尽可能少。应该经常用于查询的字段创建索引，但要避免添加不必要的字段</li>
<li>数据量小的表最好不要使用索引，由于数据较少，查询花费的时间可能比遍历索引的时间还要短，索引可能不会产生优化效果。</li>
<li>在条件表达式中经常用到的不同值较多的列上建立索引，在不同值很少的列上不要建立索引。比如在学生表的“性别”字段上只有“男”与“女”两个不同值，因此就无须建立索引，如果建立索引不但不会提高査询效率，反而会严重降低数据更新速度。</li>
<li>当唯一性是某种数据本身的特征时，指定唯一索引。使用唯一索引需能确保定义的列的数据完整性，以提高査询速度。</li>
<li>在频繁进行排序或分组(即进行 group by或 order by操作)的列上建立索引，如果待排序的列有多个，可以在这些列上建立组合索引。</li>
</ol>
<h2 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h2><h3 id="在创建表的时候创建索引"><a href="#在创建表的时候创建索引" class="headerlink" title="在创建表的时候创建索引"></a>在创建表的时候创建索引</h3><h3 id="在已经存在的表上创建索引"><a href="#在已经存在的表上创建索引" class="headerlink" title="在已经存在的表上创建索引"></a>在已经存在的表上创建索引</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- 方式1
ALTER TABLE &lt;表名&gt;
ADD [UNIQUE|FULLTEXT|SPATIAL] INDEX [索引名称] (字段名[长度], ...) [ASC|DESC]</code></pre>

<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- 方式2
CREATE [UNIQUE|FULLTEXT|SPATIAL] INDEX [索引名称]
ON &lt;表名&gt; (字段名[长度], ...) [ASC|DESC]</code></pre>

<h2 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- 方式1
ALTER TABLE &lt;表名&gt; DROP INDEX 索引名称</code></pre>

<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">-- 方式2
DROP INDEX 索引名称 ON &lt;表名&gt;</code></pre>

<blockquote>
<p>添加AUTO_INCREMENT约束字段的唯一索引不能被删除。</p>
</blockquote>
<blockquote>
<p>删除表中的列时，如果要删除的列为索引的组成部分，则该列也会从索引中删除，如果组成索引的所有列都被删除，则整个索引将被删除。</p>
</blockquote>
<h2 id="查看索引信息"><a href="#查看索引信息" class="headerlink" title="查看索引信息"></a>查看索引信息</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SHOW INDEX FROM &lt;表名&gt;;</code></pre>

<h2 id="MySQL8-0的新特性-3"><a href="#MySQL8-0的新特性-3" class="headerlink" title="MySQL8.0的新特性"></a>MySQL8.0的新特性</h2><ul>
<li>支持降序索引</li>
<li>统计直方图</li>
</ul>
<h1 id="存储过程和函数"><a href="#存储过程和函数" class="headerlink" title="存储过程和函数"></a>存储过程和函数</h1><h2 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h2><p>创建存储过程</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">CREATE PROCEDURE sp_name ( [proc_parameter] )
[characteristics ...] routine_body</code></pre>
<ol>
<li>CREATE PROCEDURE 是用来创建存储函数的关键字</li>
<li>sp_name 是存储过程的名称</li>
<li>proc_parameter 执行存储过程的参数列表 <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">[ IN | OUT | INOUT ] param_name type</code></pre>
<ul>
<li>IN 输入参数</li>
<li>OUT 输出参数</li>
<li>INOUT 既可以输入也可以输出</li>
<li>param_name 参数名称</li>
<li>type 参数类型</li>
</ul>
</li>
<li>characteristics 指定存储过程的特性<ul>
<li>LANGUAGE SQL 说明routine_body部分是由SQL语句组成的</li>
<li>[NOT] DETERMINISTIC 指明存储过程指定的结果是否正确</li>
<li>{ CONTAINS SQL | NOT SQL | READS SQL DATA | MODIFIES SQL DATA } 知名子程序使用SQL语句的限制<ul>
<li>CONTAINS SQL 子程序包含SQL语句，但是不包含读写数据的语句（默认）</li>
<li>NOT SQL 子程序不包含SQL语句</li>
<li>READS SQL DATA 子程序包含读数据的语句</li>
<li>MODIFIES SQL DATA 子程序包含写数据的语句</li>
</ul>
</li>
<li>SQL SECURITY { DEFINER | INVOKER } 知名谁有权限来执行<ul>
<li>DEFINER 只有定义者才能执行（默认）</li>
<li>INVOKER 拥有权限的调用者可以执行</li>
</ul>
</li>
<li>COMMENT &#39;string&#39; 注释信息，可以用来描述存储过程或函数</li>
</ul>
</li>
<li>routine_body SQL代码的内容，可以用BEGIN...END来表示SQL代码的开始和结束。</li>
</ol>
<p>创建存储函数</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">CREATE FUNCTION func_name ( [func_parameter] )
RETURNS type
[characteristic ...] routine_body</code></pre>
<ol>
<li>CREATE FUNCTION 用来创建存储函数的关键字</li>
<li>func_name 存储函数的名称</li>
<li>func_parameter 存储过程的参数列表<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">[ IN | OUT | INOUT ] param_name type</code></pre>
<ul>
<li>IN 输入参数</li>
<li>OUT 输出参数</li>
<li>INOUT 既可以输入也可以输出</li>
<li>param_name 参数名称</li>
<li>type 参数类型，该类型可以是MySQL数据库中的任意类型</li>
</ul>
</li>
<li>RETURNS type 表示函数返回数据的类型</li>
<li>characteristic 指定存储函数的特性，取值与创建存储过程相同</li>
</ol>
<blockquote>
<p>指定参数为IN、OUT或INOUT只对PROCEDURE是合法的。（FUNCTION中总是默认为IN参数）。RETURNS子句只能对FUNCTION做指定，对函数而言这是强制的，它用来指定函数的返回类型，而且函数体必须包含一个RETURN value语句。</p>
</blockquote>
<h2 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h2><h2 id="查看-1"><a href="#查看-1" class="headerlink" title="查看"></a>查看</h2><h2 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h2><h2 id="删除-1"><a href="#删除-1" class="headerlink" title="删除"></a>删除</h2><h1 id="导出、导入"><a href="#导出、导入" class="headerlink" title="导出、导入"></a>导出、导入</h1><h2 id="导出"><a href="#导出" class="headerlink" title="导出"></a>导出</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 导出整个数据库
mysqldump -u root -p databaseName &gt; databaseName.sql

# 导出整个表
mysqldump -u root -p databaseName tableName &gt; tableName.sql

# 进入mysql交互环境，通过SELECT ... INTO OUTFILE 命令导出
mysql&gt; SELECT * FROM tableName
    -&gt; INTO OUTFILE &#39;&#x2F;home&#x2F;haigui&#x2F;tableName.sql&#39;;
</code></pre>

<p>SELECT ... INTO OUTFILE 语句有以下属性：</p>
<ul>
<li>LOAD DATA INFILE是SELECT ... INTO OUTFILE的逆操作，SELECT句法。为了将一个数据库的数据写入一个文件，使用SELECT ... INTO OUTFILE，为了将文件读回数据库，使用LOAD DATA INFILE。</li>
<li>SELECT...INTO OUTFILE &#39;file_name&#39;形式的SELECT可以把被选择的行写入一个文件中。该文件被创建到服务器主机上，因此您必须拥有FILE权限，才能使用此语法。</li>
<li>输出不能是一个已存在的文件。防止文件数据被篡改。</li>
<li>你需要有一个登陆服务器的账号来检索文件。否则 SELECT ... INTO OUTFILE 不会起任何作用。</li>
<li>在UNIX中，该文件被创建后是可读的，权限由MySQL服务器所拥有。这意味着，虽然你就可以读取该文件，但可能无法将其删除。</li>
</ul>
<h2 id="导入"><a href="#导入" class="headerlink" title="导入"></a>导入</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 导入整个数据库
mysql -u root -p password &lt; meteor.sql

# 导入数据表
mysqlimport -u root -p --local tableName dump.txt
Enter password: ******

# 进入mysql交互环境，通过source命令导入
mysql&gt; create database test;
mysql&gt; use test;
mysql&gt; set names utf8;
mysql&gt; source &#x2F;home&#x2F;haigui&#x2F;meteor.sql;

# 插入数据到表
mysql&gt; LOAD DATA LOCAL INFILE &#39;dump.txt&#39; INTO TABLE tableName;
</code></pre>

<p>msyqlimport常用参数</p>
<table>
<thead>
<tr>
<th align="left">选项</th>
<th align="left">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-d or --delete</td>
<td align="left">新数据导入数据表中之前删除数据数据表中的所有信息</td>
</tr>
<tr>
<td align="left">-f or --force</td>
<td align="left">不管是否遇到错误，mysqlimport将强制继续插入数据</td>
</tr>
<tr>
<td align="left">-i or --ignore</td>
<td align="left">mysqlimport跳过或者忽略那些有相同唯一 关键字的行， 导入文件中的数据将被忽略。</td>
</tr>
<tr>
<td align="left">-l or -lock-tables</td>
<td align="left">数据被插入之前锁住表，这样就防止了， 你在更新数据库时，用户的查询和更新受到影响。</td>
</tr>
<tr>
<td align="left">-r or -replace</td>
<td align="left">这个选项与－i选项的作用相反；此选项将替代 表中有相同唯一关键字的记录。</td>
</tr>
<tr>
<td align="left">--fields-enclosed- by= char</td>
<td align="left">指定文本文件中数据的记录时以什么括起的， 很多情况下 数据以双引号括起。 默认的情况下数据是没有被字符括起的。</td>
</tr>
<tr>
<td align="left">--fields-terminated- by=char</td>
<td align="left">指定各个数据的值之间的分隔符，在句号分隔的文件中， 分隔符是句号。您可以用此选项指定数据之间的分隔符。 默认的分隔符是跳格符（Tab）</td>
</tr>
<tr>
<td align="left">--lines-terminated- by=str</td>
<td align="left">此选项指定文本文件中行与行之间数据的分隔字符串 或者字符。 默认的情况下mysqlimport以newline为行分隔符。 您可以选择用一个字符串来替代一个单个的字符： 一个新行或者一个回车。</td>
</tr>
</tbody></table>
<h1 id="explain"><a href="#explain" class="headerlink" title="explain"></a>explain</h1><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">EXPLAIN SELECT * FROM t_user_info WHERE field_name &#x3D; &#39;1111&#39; or id &#x3D; 2020

-- 输出结果如下表</code></pre>

<table>
<thead>
<tr>
<th>id</th>
<th>select_type</th>
<th>table</th>
<th>type</th>
<th>possible_keys</th>
<th>key</th>
<th>key_len</th>
<th>ref</th>
<th>rows</th>
<th>filtered</th>
<th>Extra</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>SIMPLE</td>
<td>t_user_info</td>
<td>index_merge</td>
<td>PRIMARY,field_name</td>
<td>field_name,PRIMARY</td>
<td>768,8</td>
<td></td>
<td>2</td>
<td>100.00</td>
<td>Using sort_union(field_name,PRIMARY); Using where</td>
</tr>
</tbody></table>
<h2 id="字段含义"><a href="#字段含义" class="headerlink" title="字段含义"></a>字段含义</h2><blockquote>
<p>官方文档<br><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain-output-columns">https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain-output-columns</a></p>
</blockquote>
<table>
<thead>
<tr>
<th>列名</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><strong>id</strong></td>
<td>SELECT识别符。这是SELECT的查询序列号</td>
</tr>
<tr>
<td><strong>select_type</strong></td>
<td>SELECT类型，可以为以下任何一种：<br /><strong>SIMPLE</strong>：简单SELECT(不使用UNION或子查询)<br /><strong>PRIMARY</strong>：最外面的SELECT<br /><strong>UNION</strong>：UNION中的第二个或后面的SELECT语句<br /><strong>DEPENDENT UNION</strong>：UNION中的第二个或后面的SELECT语句，取决于外面的查询<br /><strong>UNION RESULT</strong>：UNION 的结果<br /><strong>SUBQUERY</strong>：子查询中的第一个SELECT<br /><strong>DEPENDENT SUBQUERY</strong>：子查询中的第一个SELECT，取决于外面的查询<br /><strong>DERIVED</strong>：导出表的SELECT(FROM子句的子查询)</td>
</tr>
<tr>
<td><strong>table</strong></td>
<td>输出的行所引用的表</td>
</tr>
<tr>
<td><strong>type</strong></td>
<td>联接类型。下面给出各种联接类型，按照从最佳类型到最坏类型进行排序：<br /><strong>system</strong>：表仅有一行(=系统表)。这是const联接类型的一个特例。<br /><strong>const</strong>：表最多有一个匹配行，它将在查询开始时被读取。因为仅有一行，在这行的列值可被优化器剩余部分认为是常数。const表很快，因为它们只读取一次!<br /><strong>eq_ref</strong>：对于每个来自于前面的表的行组合，从该表中读取一行。这可能是最好的联接类型，除了const类型。<br /><strong>ref</strong>：对于每个来自于前面的表的行组合，所有有匹配索引值的行将从这张表中读取。<br /><strong>ref_or_null</strong>：该联接类型如同ref，但是添加了MySQL可以专门搜索包含NULL值的行。<br /><strong>index_merge</strong>：该联接类型表示使用了索引合并优化方法。<br /><strong>unique_subquery</strong>：该类型替换了下面形式的IN子查询的ref： value IN (SELECT primary_key FROM single_table WHERE some_expr) unique_subquery是一个索引查找函数，可以完全替换子查询，效率更高。<br /><strong>index_subquery</strong>：该联接类型类似于unique_subquery。可以替换IN子查询，但只适合下列形式的子查询中的非唯一索引：value IN (SELECT key_column FROM single_table WHERE some_expr)<br /><strong>range</strong>：只检索给定范围的行，使用一个索引来选择行。<br /><strong>index</strong>：该联接类型与ALL相同，除了只有索引树被扫描。这通常比ALL快，因为索引文件通常比数据文件小。<br /><strong>ALL</strong>：对于每个来自于先前的表的行组合，进行完整的表扫描。</td>
</tr>
<tr>
<td><strong>possible_keys</strong></td>
<td>指出MySQL能使用哪个索引在该表中找到行</td>
</tr>
<tr>
<td><strong>key</strong></td>
<td>显示MySQL实际决定使用的键(索引)。如果没有选择索引，键是NULL。</td>
</tr>
<tr>
<td><strong>key_len</strong></td>
<td>显示MySQL决定使用的键长度。如果键是NULL，则长度为NULL。</td>
</tr>
<tr>
<td><strong>ref</strong></td>
<td>显示使用哪个列或常数与key一起从表中选择行。</td>
</tr>
<tr>
<td><strong>rows</strong></td>
<td>显示MySQL认为它执行查询时必须检查的行数。多行之间的数据相乘可以估算要处理的行数。</td>
</tr>
<tr>
<td><strong>filtered</strong></td>
<td>显示了通过条件过滤出的行数的百分比估计值。</td>
</tr>
<tr>
<td><strong>Extra</strong></td>
<td>该列包含MySQL解决查询的详细信息<br /> <strong>Distinct</strong> ：MySQL发现第1个匹配行后，停止为当前的行组合搜索更多的行。<br /> <strong>Not exists</strong> ：MySQL能够对查询进行LEFT JOIN优化，发现1个匹配LEFT JOIN标准的行后，不再为前面的的行组合在该表内检查更多的行。<br /> <strong>range checked for each record (index map： #)</strong> ：MySQL没有发现好的可以使用的索引，但发现如果来自前面的表的列值已知，可能部分索引可以使用。<br /><strong>Using filesort</strong>：MySQL需要额外的一次传递，以找出如何按排序顺序检索行。<br /> <strong>Using index</strong>：从只使用索引树中的信息而不需要进一步搜索读取实际的行来检索表中的列信息。<br /><strong>Using temporary</strong>：为了解决查询，MySQL需要创建一个临时表来容纳结果。<br /> <strong>Using where</strong> ：WHERE 子句用于限制哪一个行匹配下一个表或发送到客户。<br /> <strong>Using sort_union(...)， Using union(...)， Using intersect(...)</strong> ：这些函数说明如何为index_merge联接类型合并索引扫描。<br /><strong>Using index for group-by</strong>：类似于访问表的Using index方式，Using index for group-by表示MySQL发现了一个索引，可以用来查 询GROUP BY或DISTINCT查询的所有列，而不要额外搜索硬盘访问实际的表。</td>
</tr>
</tbody></table>
<h2 id="select-type"><a href="#select-type" class="headerlink" title="select_type"></a>select_type</h2><h3 id="union"><a href="#union" class="headerlink" title="union"></a>union</h3><blockquote>
<p>当通过union来连接多个查询结果时，第二个之后的select其select_type为UNION</p>
</blockquote>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">EXPLAIN 

SELECT * FROM t_user_info WHERE id &#x3D; 1161 
UNION
SELECT * FROM t_user_info WHERE id &#x3D; 1166</code></pre>

<table>
<thead>
<tr>
<th>id</th>
<th>select_type</th>
<th>table</th>
<th>type</th>
<th>possible_keys</th>
<th>key</th>
<th>key_len</th>
<th>ref</th>
<th>rows</th>
<th>filtered</th>
<th>Extra</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>PRIMARY</td>
<td>t_user_info</td>
<td>const</td>
<td>PRIMARY</td>
<td>PRIMARY</td>
<td>8</td>
<td>const</td>
<td>1</td>
<td>100.00</td>
<td>NULL</td>
</tr>
<tr>
<td>2</td>
<td>UNION</td>
<td>t_user_info</td>
<td>const</td>
<td>PRIMARY</td>
<td>PRIMARY</td>
<td>8</td>
<td>const</td>
<td>1</td>
<td>100.00</td>
<td>NULL</td>
</tr>
<tr>
<td>NULL</td>
<td>UNION RESULT</td>
<td>&lt;union1,2&gt;</td>
<td>ALL</td>
<td>NULL</td>
<td>NULL</td>
<td>NULL</td>
<td>NULL</td>
<td>NULL</td>
<td>NULL</td>
<td>Using temporary</td>
</tr>
</tbody></table>
<h3 id="DEPENDENT-UNION-与-DEPENDENT-SUBQUERY"><a href="#DEPENDENT-UNION-与-DEPENDENT-SUBQUERY" class="headerlink" title="DEPENDENT UNION 与 DEPENDENT SUBQUERY"></a>DEPENDENT UNION 与 DEPENDENT SUBQUERY</h3><blockquote>
<p>当union作为子查询时，其中第一个子查询的select_type则是DEPENDENT SUBQUERY，第二个union的select_type就是DEPENDENT UNION。</p>
</blockquote>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">EXPLAIN 

SELECT * FROM t_user_info WHERE id IN (
	SELECT id FROM t_user_info WHERE id &#x3D; 1161
	UNION
	SELECT id FROM t_user_info WHERE id &#x3D; 1166
)</code></pre>

<table>
<thead>
<tr>
<th>id</th>
<th>select_type</th>
<th>table</th>
<th>type</th>
<th>possible_keys</th>
<th>key</th>
<th>key_len</th>
<th>ref</th>
<th>rows</th>
<th>filtered</th>
<th>Extra</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>PRIMARY</td>
<td>t_user_info</td>
<td>ALL</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>616</td>
<td>100.00</td>
<td>Using where</td>
</tr>
<tr>
<td>2</td>
<td>DEPENDENT SUBQUERY</td>
<td>t_user_info</td>
<td>const</td>
<td>PRIMARY</td>
<td>PRIMARY</td>
<td>8</td>
<td>const</td>
<td>1</td>
<td>100.00</td>
<td>Using index</td>
</tr>
<tr>
<td>3</td>
<td>DEPENDENT UNION</td>
<td>t_user_info</td>
<td>const</td>
<td>PRIMARY</td>
<td>PRIMARY</td>
<td>8</td>
<td>const</td>
<td>1</td>
<td>100.00</td>
<td>Using index</td>
</tr>
<tr>
<td></td>
<td>UNION RESULT</td>
<td>&lt;union2,3&gt;</td>
<td>ALL</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>Using temporary</td>
</tr>
</tbody></table>
<h3 id="SUBQUERY"><a href="#SUBQUERY" class="headerlink" title="SUBQUERY"></a>SUBQUERY</h3><blockquote>
<p>子查询中的第一个select其select_type为SUBQUERY</p>
</blockquote>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">EXPLAIN 

SELECT * FROM t_user_info WHERE id &#x3D; (
	SELECT id FROM t_user_info WHERE id &#x3D; 1161
)</code></pre>

<table>
<thead>
<tr>
<th>id</th>
<th>select_type</th>
<th>table</th>
<th>partitions</th>
<th>type</th>
<th>possible_keys</th>
<th>key</th>
<th>key_len</th>
<th>ref</th>
<th>rows</th>
<th>filtered</th>
<th>Extra</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>PRIMARY</td>
<td>t_user_info</td>
<td></td>
<td>const</td>
<td>PRIMARY</td>
<td>PRIMARY</td>
<td>8</td>
<td>const</td>
<td>1</td>
<td>100.00</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>SUBQUERY</td>
<td>t_user_info</td>
<td></td>
<td>const</td>
<td>PRIMARY</td>
<td>PRIMARY</td>
<td>8</td>
<td>const</td>
<td>1</td>
<td>100.00</td>
<td>Using index</td>
</tr>
</tbody></table>
<h3 id="DERIVED"><a href="#DERIVED" class="headerlink" title="DERIVED"></a>DERIVED</h3><blockquote>
<p>当子查询是from子句时，其select_type为DERIVED。</p>
</blockquote>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">EXPLAIN 

SELECT * FROM (
	SELECT id FROM t_user_info WHERE id &#x3D; 1161
) AS aliasName</code></pre>

<h2 id="type"><a href="#type" class="headerlink" title="type"></a>type</h2><blockquote>
<p>注意:一般保证查询至少达到range级别，最好能达到ref。</p>
</blockquote>
<h3 id="system"><a href="#system" class="headerlink" title="system"></a>system</h3><blockquote>
<p>该表只有一行（=系统表）。这是<a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#jointype_const"><code>const</code></a>联接类型的特例 。</p>
</blockquote>
<h3 id="const"><a href="#const" class="headerlink" title="const"></a>const</h3><blockquote>
<p>通过索引一次就找到</p>
</blockquote>
<h3 id="eq-ref"><a href="#eq-ref" class="headerlink" title="eq_ref"></a>eq_ref</h3><blockquote>
<p>唯一性索引扫描</p>
</blockquote>
<h3 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h3><blockquote>
<p>非唯一性索引扫描</p>
</blockquote>
<h3 id="unique-subquery"><a href="#unique-subquery" class="headerlink" title="unique_subquery"></a>unique_subquery</h3><blockquote>
<p>该联接类型用于替换value IN (SELECT primary_key FROM single_table WHERE some_expr)这样的子查询的ref。注意ref列，其中第二行显示的是func，表明unique_subquery是一个函数，而不是一个普通的ref。</p>
</blockquote>
<h3 id="index-subquery"><a href="#index-subquery" class="headerlink" title="index_subquery"></a>index_subquery</h3><blockquote>
<p>该联接类型与上面的太像了，唯一的差别就是子查询查的不是主键而是非唯一索引。</p>
</blockquote>
<h3 id="range-只检索给定范围的行"><a href="#range-只检索给定范围的行" class="headerlink" title="range 只检索给定范围的行"></a>range 只检索给定范围的行</h3><blockquote>
<p>按指定的范围进行检索，很常见。</p>
</blockquote>
<h3 id="index-只遍历索引树"><a href="#index-只遍历索引树" class="headerlink" title="index 只遍历索引树"></a>index 只遍历索引树</h3><blockquote>
<p>在进行统计时非常常见，此联接类型实际上会扫描索引树，仅比ALL快些。</p>
</blockquote>
<h3 id="all-遍历全表"><a href="#all-遍历全表" class="headerlink" title="all 遍历全表"></a>all 遍历全表</h3><blockquote>
<p>完整的扫描全表，最慢的联接类型，尽可能的避免。</p>
</blockquote>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="系统信息函数"><a href="#系统信息函数" class="headerlink" title="系统信息函数"></a>系统信息函数</h2><table>
<thead>
<tr>
<th>函数名</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>VERSION</td>
<td>返回指示MySQL服务器版本的字符串</td>
<td>SELECT VERSION()</td>
</tr>
<tr>
<td>CONNECTION_ID</td>
<td>返回MySQL服务器当前连接的次数，每个连接都有各自唯一的ID</td>
<td>SELECT CONNECTION_ID()</td>
</tr>
<tr>
<td>SHOW PROCESSLIST<br />SHOW FULL PROCESSLIST</td>
<td>返回当前运行的线程的详细情况<br />- Id：用户登录MySQL时，系统分配的”connection id”<br />- User：显示当前用户，如果不是root，仅显示用户权限范围内的SQL语句<br />- Host：显示该语句是从哪个IP的哪个端口上发出来的，可以用来跟踪出现问题语句的用户<br />- db：显示这个进程目前连接的是哪个数据库<br />- Command：显示当前连接执行的命令，一般取值为休眠（Sleep）、查询（Query）、连接（Connect）<br />- Time：显示这个状态持续的时间，单位是秒<br />- State：显示使用当前连接的SQL语句的状态<br />- Info：显示这个SQL语句，是判断问题语句的一个重要依据</td>
<td></td>
</tr>
<tr>
<td>DATABASE</td>
<td>返回使用utf8字符集的默认（当前）数据库名</td>
<td>SELECT DATABASE</td>
</tr>
<tr>
<td>SCHEMA</td>
<td>返回使用utf8字符集的默认（当前）数据库名</td>
<td>SELECT SCHEMA()</td>
</tr>
<tr>
<td>CHARSET</td>
<td>返回字符串使用的字符集</td>
<td>SELECT CHARSET(&#39;abc&#39;)</td>
</tr>
<tr>
<td>USER<br />CURRENT_USER<br />SYSTEM_USER</td>
<td>返回当前呗MySQL服务器验证的用户名和主机名组合</td>
<td>SELECT USER(), CURRENT_USER(), SYSTEM_USER()</td>
</tr>
<tr>
<td>LAST_INSERT_ID</td>
<td>返回最后生成的AUTO_INCREMENT的值</td>
<td>SELECT LAST_INSERT_ID()</td>
</tr>
</tbody></table>
<h2 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h2><table>
<thead>
<tr>
<th align="left">函数</th>
<th align="left">描述</th>
<th align="left">实例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ASCII(s)</td>
<td align="left">返回字符串 s 的第一个字符的 ASCII 码。</td>
<td align="left">返回 CustomerName 字段第一个字母的 ASCII 码：<br /><code>SELECT ASCII(CustomerName) AS NumCodeOfFirstChar FROM Customers;</code></td>
</tr>
<tr>
<td align="left">CHAR_LENGTH(s)</td>
<td align="left">返回字符串 s 的字符数</td>
<td align="left">返回字符串 meteor 的字符数<br /><code>SELECT CHAR_LENGTH(&quot;meteor&quot;) AS LengthOfString;</code></td>
</tr>
<tr>
<td align="left">CHARACTER_LENGTH(s)</td>
<td align="left">返回字符串 s 的字符数</td>
<td align="left">返回字符串 meteor 的字符数<br /><code>SELECT CHARACTER_LENGTH(&quot;meteor&quot;) AS LengthOfString;</code></td>
</tr>
<tr>
<td align="left">CONCAT(s1,s2...sn)</td>
<td align="left">字符串 s1,s2 等多个字符串合并为一个字符串</td>
<td align="left">合并多个字符串<br /><code>SELECT CONCAT(&quot;SQL &quot;, &quot;meteor &quot;, &quot;Gooogle &quot;, &quot;Facebook&quot;) AS ConcatenatedString;</code></td>
</tr>
<tr>
<td align="left">CONCAT_WS(x, s1,s2...sn)</td>
<td align="left">同 CONCAT(s1,s2,...) 函数，但是每个字符串之间要加上 x，x 可以是分隔符</td>
<td align="left">合并多个字符串，并添加分隔符：<br /><code>SELECT CONCAT_WS(&quot;-&quot;, &quot;SQL&quot;, &quot;Tutorial&quot;, &quot;is&quot;, &quot;fun!&quot;)AS ConcatenatedString;</code></td>
</tr>
<tr>
<td align="left">FIELD(s,s1,s2...)</td>
<td align="left">返回第一个字符串 s 在字符串列表(s1,s2...)中的位置</td>
<td align="left">返回字符串 c 在列表值中的位置：<br /><code>SELECT FIELD(&quot;c&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;);</code></td>
</tr>
<tr>
<td align="left">FIND_IN_SET(s1,s2)</td>
<td align="left">返回在字符串s2中与s1匹配的字符串的位置</td>
<td align="left">返回字符串 c 在指定字符串中的位置：<br /><code>SELECT FIND_IN_SET(&quot;c&quot;, &quot;a,b,c,d,e&quot;);</code></td>
</tr>
<tr>
<td align="left">FORMAT(x,n)</td>
<td align="left">函数可以将数字 x 进行格式化 &quot;#,###.##&quot;, 将 x 保留到小数点后 n 位，最后一位四舍五入。</td>
<td align="left">格式化数字 &quot;#,###.##&quot; 形式：<br /><code>SELECT FORMAT(250500.5634, 2);     -- 输出 250,500.56</code></td>
</tr>
<tr>
<td align="left">INSERT(s1,x,len,s2)</td>
<td align="left">字符串 s2 替换 s1 的 x 位置开始长度为 len 的字符串</td>
<td align="left">从字符串第一个位置开始的 6 个字符替换为 meteor：<br /><code>SELECT INSERT(&quot;baidu.com&quot;, 1, 6, &quot;meteor&quot;);  -- 输出：meteor.com</code></td>
</tr>
<tr>
<td align="left">LOCATE(s1,s)</td>
<td align="left">从字符串 s 中获取 s1 的开始位置</td>
<td align="left">获取 b 在字符串 abc 中的位置：<br /><code>SELECT LOCATE(&#39;st&#39;,&#39;myteststring&#39;);  -- 5</code>返回字符串 abc 中 b 的位置：<code>SELECT LOCATE(&#39;b&#39;, &#39;abc&#39;) -- 2</code></td>
</tr>
<tr>
<td align="left">LCASE(s)</td>
<td align="left">将字符串 s 的所有字母变成小写字母</td>
<td align="left">字符串 meteor 转换为小写：<br /><code>SELECT LCASE(&#39;meteor&#39;) -- meteor</code></td>
</tr>
<tr>
<td align="left">LEFT(s,n)</td>
<td align="left">返回字符串 s 的前 n 个字符</td>
<td align="left">返回字符串 meteor 中的前两个字符：<br /><code>SELECT LEFT(&#39;meteor&#39;,2) -- ru</code></td>
</tr>
<tr>
<td align="left">LOWER(s)</td>
<td align="left">将字符串 s 的所有字母变成小写字母</td>
<td align="left">字符串 meteor 转换为小写：<br /><code>SELECT LOWER(&#39;meteor&#39;) -- meteor</code></td>
</tr>
<tr>
<td align="left">LPAD(s1,len,s2)</td>
<td align="left">在字符串 s1 的开始处填充字符串 s2，使字符串长度达到 len</td>
<td align="left">将字符串 xx 填充到 abc 字符串的开始处：<br /><code>SELECT LPAD(&#39;abc&#39;,5,&#39;xx&#39;) -- xxabc</code></td>
</tr>
<tr>
<td align="left">LTRIM(s)</td>
<td align="left">去掉字符串 s 开始处的空格</td>
<td align="left">去掉字符串 meteor开始处的空格：<br /><code>SELECT LTRIM(&quot;    meteor&quot;) AS LeftTrimmedString;-- meteor</code></td>
</tr>
<tr>
<td align="left">MID(s,n,len)</td>
<td align="left">从字符串 s 的 n 位置截取长度为 len 的子字符串，同 SUBSTRING(s,n,len)</td>
<td align="left">从字符串 meteor 中的第 2 个位置截取 3个 字符：<br /><code>SELECT MID(&quot;meteor&quot;, 2, 3) AS ExtractString; -- UNO</code></td>
</tr>
<tr>
<td align="left">POSITION(s1 IN s)</td>
<td align="left">从字符串 s 中获取 s1 的开始位置</td>
<td align="left">返回字符串 abc 中 b 的位置：<br /><code>SELECT POSITION(&#39;b&#39; in &#39;abc&#39;) -- 2</code></td>
</tr>
<tr>
<td align="left">REPEAT(s,n)</td>
<td align="left">将字符串 s 重复 n 次</td>
<td align="left">将字符串 meteor 重复三次：<br /><code>SELECT REPEAT(&#39;meteor&#39;,3) -- meteormeteormeteor</code></td>
</tr>
<tr>
<td align="left">REPLACE(s,s1,s2)</td>
<td align="left">将字符串 s2 替代字符串 s 中的字符串 s1</td>
<td align="left">将字符串 abc 中的字符 a 替换为字符 x：<br /><code>SELECT REPLACE(&#39;abc&#39;,&#39;a&#39;,&#39;x&#39;) --xbc</code></td>
</tr>
<tr>
<td align="left">REVERSE(s)</td>
<td align="left">将字符串s的顺序反过来</td>
<td align="left">将字符串 abc 的顺序反过来：<br /><code>SELECT REVERSE(&#39;abc&#39;) -- cba</code></td>
</tr>
<tr>
<td align="left">RIGHT(s,n)</td>
<td align="left">返回字符串 s 的后 n 个字符</td>
<td align="left">返回字符串 meteor 的后两个字符：<br /><code>SELECT RIGHT(&#39;meteor&#39;,2) -- ob</code></td>
</tr>
<tr>
<td align="left">RPAD(s1,len,s2)</td>
<td align="left">在字符串 s1 的结尾处添加字符串 s2，使字符串的长度达到 len</td>
<td align="left">将字符串 xx 填充到 abc 字符串的结尾处：<br /><code>SELECT RPAD(&#39;abc&#39;,5,&#39;xx&#39;) -- abcxx</code></td>
</tr>
<tr>
<td align="left">RTRIM(s)</td>
<td align="left">去掉字符串 s 结尾处的空格</td>
<td align="left">去掉字符串 meteor 的末尾空格：<br /><code>SELECT RTRIM(&quot;meteor     &quot;) AS RightTrimmedString;   -- meteor</code></td>
</tr>
<tr>
<td align="left">SPACE(n)</td>
<td align="left">返回 n 个空格</td>
<td align="left">返回 10 个空格：<br /><code>SELECT SPACE(10);</code></td>
</tr>
<tr>
<td align="left">STRCMP(s1,s2)</td>
<td align="left">比较字符串 s1 和 s2，如果 s1 与 s2 相等返回 0 ，如果 s1&gt;s2 返回 1，如果 s1&lt;s2 返回 -1</td>
<td align="left">比较字符串：<br /><code>SELECT STRCMP(&quot;meteor&quot;, &quot;meteor&quot;);  -- 0</code></td>
</tr>
<tr>
<td align="left">SUBSTR(s, start, length)</td>
<td align="left">从字符串 s 的 start 位置截取长度为 length 的子字符串</td>
<td align="left">从字符串 meteor 中的第 2 个位置截取 3个 字符：<br /><code>SELECT SUBSTR(&quot;meteor&quot;, 2, 3) AS ExtractString; -- UNO</code></td>
</tr>
<tr>
<td align="left">SUBSTRING(s, start, length)</td>
<td align="left">从字符串 s 的 start 位置截取长度为 length 的子字符串</td>
<td align="left">从字符串 meteor 中的第 2 个位置截取 3个 字符：<br /><code>SELECT SUBSTRING(&quot;meteor&quot;, 2, 3) AS ExtractString; -- UNO</code></td>
</tr>
<tr>
<td align="left">SUBSTRING_INDEX(s, delimiter, number)</td>
<td align="left">返回从字符串 s 的第 number 个出现的分隔符 delimiter 之后的子串。 如果 number 是正数，返回第 number 个字符左边的字符串。 如果 number 是负数，返回第(number 的绝对值(从右边数))个字符右边的字符串。</td>
<td align="left"><code>SELECT SUBSTRING_INDEX(&#39;a*b&#39;,&#39;*&#39;,1) -- a</code> <br /><code>SELECT SUBSTRING_INDEX(&#39;a*b&#39;,&#39;*&#39;,-1)  -- b</code> <br /><code>SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(&#39;a*b*c*d*e&#39;,&#39;*&#39;,3),&#39;*&#39;,-1)  -- c</code></td>
</tr>
<tr>
<td align="left">TRIM(s)</td>
<td align="left">去掉字符串 s 开始和结尾处的空格</td>
<td align="left">去掉字符串 meteor 的首尾空格：<br /><code>SELECT TRIM(&#39;    meteor    &#39;) AS TrimmedString;</code></td>
</tr>
<tr>
<td align="left">UCASE(s)</td>
<td align="left">将字符串转换为大写</td>
<td align="left">将字符串 meteor 转换为大写：<br /><code>SELECT UCASE(&quot;meteor&quot;); -- METEOR</code></td>
</tr>
<tr>
<td align="left">UPPER(s)</td>
<td align="left">将字符串转换为大写</td>
<td align="left">将字符串 meteor 转换为大写：<br /><code>SELECT UPPER(&quot;meteor&quot;); -- METEOR</code></td>
</tr>
</tbody></table>
<h2 id="数值-1"><a href="#数值-1" class="headerlink" title="数值"></a>数值</h2><table>
<thead>
<tr>
<th align="left">函数名</th>
<th align="left">描述</th>
<th align="left">实例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ABS(x)</td>
<td align="left">返回 x 的绝对值</td>
<td align="left">返回 -1 的绝对值：SELECT ABS(-1) -- 返回1</td>
</tr>
<tr>
<td align="left">ACOS(x)</td>
<td align="left">求 x 的反余弦值(参数是弧度)</td>
<td align="left">SELECT ACOS(0.25);</td>
</tr>
<tr>
<td align="left">ASIN(x)</td>
<td align="left">求反正弦值(参数是弧度)</td>
<td align="left">SELECT ASIN(0.25);</td>
</tr>
<tr>
<td align="left">ATAN(x)</td>
<td align="left">求反正切值(参数是弧度)</td>
<td align="left">SELECT ATAN(2.5);</td>
</tr>
<tr>
<td align="left">ATAN2(n, m)</td>
<td align="left">求反正切值(参数是弧度)</td>
<td align="left">SELECT ATAN2(-0.8, 2);</td>
</tr>
<tr>
<td align="left">AVG(expression)</td>
<td align="left">返回一个表达式的平均值，expression 是一个字段</td>
<td align="left">返回 Products 表中Price 字段的平均值：SELECT AVG(Price) AS AveragePrice FROM Products;</td>
</tr>
<tr>
<td align="left">CEIL(x)</td>
<td align="left">返回大于或等于 x 的最小整数</td>
<td align="left">SELECT CEIL(1.5) -- 返回2</td>
</tr>
<tr>
<td align="left">CEILING(x)</td>
<td align="left">返回大于或等于 x 的最小整数</td>
<td align="left">SELECT CEILING(1.5); -- 返回2</td>
</tr>
<tr>
<td align="left">COS(x)</td>
<td align="left">求余弦值(参数是弧度)</td>
<td align="left">SELECT COS(2);</td>
</tr>
<tr>
<td align="left">COT(x)</td>
<td align="left">求余切值(参数是弧度)</td>
<td align="left">SELECT COT(6);</td>
</tr>
<tr>
<td align="left">COUNT(expression)</td>
<td align="left">返回查询的记录总数，expression 参数是一个字段或者 * 号</td>
<td align="left">返回 Products 表中 products 字段总共有多少条记录：SELECT COUNT(ProductID) AS NumberOfProducts FROM Products;</td>
</tr>
<tr>
<td align="left">DEGREES(x)</td>
<td align="left">将弧度转换为角度</td>
<td align="left">SELECT DEGREES(3.1415926535898) -- 180</td>
</tr>
<tr>
<td align="left">n DIV m</td>
<td align="left">整除，n 为被除数，m 为除数</td>
<td align="left">计算 10 除于 5：SELECT 10 DIV 5;  -- 2</td>
</tr>
<tr>
<td align="left">EXP(x)</td>
<td align="left">返回 e 的 x 次方</td>
<td align="left">计算 e 的三次方：SELECT EXP(3) -- 20.085536923188</td>
</tr>
<tr>
<td align="left">FLOOR(x)</td>
<td align="left">返回小于或等于 x 的最大整数</td>
<td align="left">小于或等于 1.5 的整数：SELECT FLOOR(1.5) -- 返回1</td>
</tr>
<tr>
<td align="left">GREATEST(expr1, expr2, expr3, ...)</td>
<td align="left">返回列表中的最大值</td>
<td align="left">返回以下数字列表中的最大值：SELECT GREATEST(3, 12, 34, 8, 25); -- 34返回以下字符串列表中的最大值：SELECT GREATEST(&quot;Google&quot;, &quot;Runoob&quot;, &quot;Apple&quot;);   -- Runoob</td>
</tr>
<tr>
<td align="left">LEAST(expr1, expr2, expr3, ...)</td>
<td align="left">返回列表中的最小值</td>
<td align="left">返回以下数字列表中的最小值：SELECT LEAST(3, 12, 34, 8, 25); -- 3返回以下字符串列表中的最小值：SELECT LEAST(&quot;Google&quot;, &quot;Runoob&quot;, &quot;Apple&quot;);   -- Apple</td>
</tr>
<tr>
<td align="left">LN</td>
<td align="left">返回数字的自然对数，以 e 为底。</td>
<td align="left">返回 2 的自然对数：SELECT LN(2);  -- 0.6931471805599453</td>
</tr>
<tr>
<td align="left">LOG(x) 或 LOG(base, x)</td>
<td align="left">返回自然对数(以 e 为底的对数)，如果带有 base 参数，则 base 为指定带底数。</td>
<td align="left">SELECT LOG(20.085536923188) -- 3 SELECT LOG(2, 4); -- 2</td>
</tr>
<tr>
<td align="left">LOG10(x)</td>
<td align="left">返回以 10 为底的对数</td>
<td align="left">SELECT LOG10(100) -- 2</td>
</tr>
<tr>
<td align="left">LOG2(x)</td>
<td align="left">返回以 2 为底的对数</td>
<td align="left">返回以 2 为底 6 的对数：SELECT LOG2(6);  -- 2.584962500721156</td>
</tr>
<tr>
<td align="left">MAX(expression)</td>
<td align="left">返回字段 expression 中的最大值</td>
<td align="left">返回数据表 Products 中字段 Price 的最大值：SELECT MAX(Price) AS LargestPrice FROM Products;</td>
</tr>
<tr>
<td align="left">MIN(expression)</td>
<td align="left">返回字段 expression 中的最小值</td>
<td align="left">返回数据表 Products 中字段 Price 的最小值：SELECT MIN(Price) AS MinPrice FROM Products;</td>
</tr>
<tr>
<td align="left">MOD(x,y)</td>
<td align="left">返回 x 除以 y 以后的余数</td>
<td align="left">5 除于 2 的余数：SELECT MOD(5,2) -- 1</td>
</tr>
<tr>
<td align="left">PI()</td>
<td align="left">返回圆周率(3.141593）</td>
<td align="left">SELECT PI() --3.141593</td>
</tr>
<tr>
<td align="left">POW(x,y)</td>
<td align="left">返回 x 的 y 次方</td>
<td align="left">2 的 3 次方：SELECT POW(2,3) -- 8</td>
</tr>
<tr>
<td align="left">POWER(x,y)</td>
<td align="left">返回 x 的 y 次方</td>
<td align="left">2 的 3 次方：SELECT POWER(2,3) -- 8</td>
</tr>
<tr>
<td align="left">RADIANS(x)</td>
<td align="left">将角度转换为弧度</td>
<td align="left">180 度转换为弧度：SELECT RADIANS(180) -- 3.1415926535898</td>
</tr>
<tr>
<td align="left">RAND()</td>
<td align="left">返回 0 到 1 的随机数</td>
<td align="left">SELECT RAND() --0.93099315644334</td>
</tr>
<tr>
<td align="left">ROUND(x)</td>
<td align="left">返回离 x 最近的整数</td>
<td align="left">SELECT ROUND(1.23456) --1</td>
</tr>
<tr>
<td align="left">SIGN(x)</td>
<td align="left">返回 x 的符号，x 是负数、0、正数分别返回 -1、0 和 1</td>
<td align="left">SELECT SIGN(-10) -- (-1)</td>
</tr>
<tr>
<td align="left">SIN(x)</td>
<td align="left">求正弦值(参数是弧度)</td>
<td align="left">SELECT SIN(RADIANS(30)) -- 0.5</td>
</tr>
<tr>
<td align="left">SQRT(x)</td>
<td align="left">返回x的平方根</td>
<td align="left">25 的平方根：SELECT SQRT(25) -- 5</td>
</tr>
<tr>
<td align="left">SUM(expression)</td>
<td align="left">返回指定字段的总和</td>
<td align="left">计算 OrderDetails 表中字段 Quantity 的总和：SELECT SUM(Quantity) AS TotalItemsOrdered FROM OrderDetails;</td>
</tr>
<tr>
<td align="left">TAN(x)</td>
<td align="left">求正切值(参数是弧度)</td>
<td align="left">SELECT TAN(1.75);  -- -5.52037992250933</td>
</tr>
<tr>
<td align="left">TRUNCATE(x,y)</td>
<td align="left">返回数值 x 保留到小数点后 y 位的值（与 ROUND 最大的区别是不会进行四舍五入）</td>
<td align="left">SELECT TRUNCATE(1.23456,3) -- 1.234</td>
</tr>
</tbody></table>
<h2 id="日期"><a href="#日期" class="headerlink" title="日期"></a>日期</h2><table>
<thead>
<tr>
<th align="left">函数名</th>
<th align="left">描述</th>
<th align="left">实例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ADDDATE(d,n)</td>
<td align="left">计算起始日期 d 加上 n 天的日期</td>
<td align="left">SELECT ADDDATE(&quot;2017-06-15&quot;, INTERVAL 10 DAY); -&gt;2017-06-25</td>
</tr>
<tr>
<td align="left">ADDTIME(t,n)</td>
<td align="left">n 是一个时间表达式，时间 t 加上时间表达式 n</td>
<td align="left">加 5 秒：<br />SELECT ADDTIME(&#39;2011-11-11 11:11:11&#39;, 5); -&gt;2011-11-11 11:11:16 (秒)<br />添加 2 小时, 10 分钟, 5 秒: <br />SELECT ADDTIME(&quot;2020-06-15 09:34:21&quot;, &quot;2:10:5&quot;);  -&gt; 2020-06-15 11:44:26</td>
</tr>
<tr>
<td align="left">CURDATE()</td>
<td align="left">返回当前日期</td>
<td align="left">SELECT CURDATE(); -&gt; 2020-12-23</td>
</tr>
<tr>
<td align="left">CURRENT_DATE()</td>
<td align="left">返回当前日期</td>
<td align="left">SELECT CURRENT_DATE(); -&gt; 2020-12-23</td>
</tr>
<tr>
<td align="left">CURRENT_TIME</td>
<td align="left">返回当前时间</td>
<td align="left">SELECT CURRENT_TIME(); -&gt; 19:59:02</td>
</tr>
<tr>
<td align="left">CURRENT_TIMESTAMP()</td>
<td align="left">返回当前日期和时间</td>
<td align="left">SELECT CURRENT_TIMESTAMP() -&gt; 2018-12-23 20:57:43</td>
</tr>
<tr>
<td align="left">CURTIME()</td>
<td align="left">返回当前时间</td>
<td align="left">SELECT CURTIME(); -&gt; 19:59:02</td>
</tr>
<tr>
<td align="left">DATE()</td>
<td align="left">从日期或日期时间表达式中提取日期值</td>
<td align="left">SELECT DATE(&quot;2017-06-15&quot;);     -&gt; 2017-06-15</td>
</tr>
<tr>
<td align="left">DATEDIFF(d1,d2)</td>
<td align="left">计算日期 d1-&gt;d2 之间相隔的天数</td>
<td align="left">SELECT DATEDIFF(&#39;2001-01-01&#39;,&#39;2001-02-02&#39;) -&gt; -32</td>
</tr>
<tr>
<td align="left">DATE_ADD(d，INTERVAL expr type)</td>
<td align="left">计算起始日期 d 加上一个时间段后的日期</td>
<td align="left">SELECT ADDDATE(&#39;2011-11-11 11:11:11&#39;,1) -&gt; 2011-11-12 11:11:11  (默认是天) SELECT ADDDATE(&#39;2011-11-11 11:11:11&#39;, INTERVAL 5 MINUTE) -&gt; 2011-11-11 11:16:11 (TYPE的取值与上面那个列出来的函数类似)</td>
</tr>
<tr>
<td align="left">DATE_FORMAT(d,f)</td>
<td align="left">按表达式 f的要求显示日期 d</td>
<td align="left">SELECT DATE_FORMAT(&#39;2011-11-11 11:11:11&#39;,&#39;%Y-%m-%d %r&#39;) -&gt; 2011-11-11 11:11:11 AM</td>
</tr>
<tr>
<td align="left">DATE_SUB(date,INTERVAL expr type)</td>
<td align="left">函数从日期减去指定的时间间隔。</td>
<td align="left">Orders 表中 OrderDate 字段减去 2 天：<br />SELECT OrderId,DATE_SUB(OrderDate,INTERVAL 2 DAY) AS OrderPayDate FROM Orders</td>
</tr>
<tr>
<td align="left">DAY(d)</td>
<td align="left">返回日期值 d 的日期部分</td>
<td align="left">SELECT DAY(&quot;2017-06-15&quot;);   -&gt; 15</td>
</tr>
<tr>
<td align="left">DAYNAME(d)</td>
<td align="left">返回日期 d 是星期几，如 Monday,Tuesday</td>
<td align="left">SELECT DAYNAME(&#39;2011-11-11 11:11:11&#39;) -&gt;Friday</td>
</tr>
<tr>
<td align="left">DAYOFMONTH(d)</td>
<td align="left">计算日期 d 是本月的第几天</td>
<td align="left">SELECT DAYOFMONTH(&#39;2011-11-11 11:11:11&#39;) -&gt;11</td>
</tr>
<tr>
<td align="left">DAYOFWEEK(d)</td>
<td align="left">日期 d 今天是星期几，1 星期日，2 星期一，以此类推</td>
<td align="left">SELECT DAYOFWEEK(&#39;2011-11-11 11:11:11&#39;) -&gt;6</td>
</tr>
<tr>
<td align="left">DAYOFYEAR(d)</td>
<td align="left">计算日期 d 是本年的第几天</td>
<td align="left">SELECT DAYOFYEAR(&#39;2011-11-11 11:11:11&#39;) -&gt;315</td>
</tr>
<tr>
<td align="left">EXTRACT(type FROM d)</td>
<td align="left">从日期 d 中获取指定的值，type 指定返回的值。<br />type可取值为：<br /> - MICROSECOND<br/>- SECOND<br/>- MINUTE<br/>- HOUR<br/>- DAY<br/>- WEEK<br/>- MONTH<br/>- QUARTER<br/>- YEAR<br/>- SECOND_MICROSECOND<br/>- MINUTE_MICROSECOND<br/>- MINUTE_SECOND<br/>- HOUR_MICROSECOND<br/>- HOUR_SECOND<br/>- HOUR_MINUTE<br/>- DAY_MICROSECOND<br/>- DAY_SECOND<br/>- DAY_MINUTE<br/>- DAY_HOUR<br/>- YEAR_MONTH</td>
<td align="left">SELECT EXTRACT(MINUTE FROM &#39;2011-11-11 11:11:11&#39;)  -&gt; 11</td>
</tr>
<tr>
<td align="left">FROM_DAYS(n)</td>
<td align="left">计算从 0000 年 1 月 1 日开始 n 天后的日期</td>
<td align="left">SELECT FROM_DAYS(1111) -&gt; 0003-01-16</td>
</tr>
<tr>
<td align="left">HOUR(t)</td>
<td align="left">返回 t 中的小时值</td>
<td align="left">SELECT HOUR(&#39;1:2:3&#39;) -&gt; 1</td>
</tr>
<tr>
<td align="left">LAST_DAY(d)</td>
<td align="left">返回给给定日期的那一月份的最后一天</td>
<td align="left">SELECT LAST_DAY(&quot;2017-06-20&quot;); -&gt; 2017-06-30</td>
</tr>
<tr>
<td align="left">LOCALTIME()</td>
<td align="left">返回当前日期和时间</td>
<td align="left">SELECT LOCALTIME() -&gt; 2018-12-23 20:57:43</td>
</tr>
<tr>
<td align="left">LOCALTIMESTAMP()</td>
<td align="left">返回当前日期和时间</td>
<td align="left">SELECT LOCALTIMESTAMP() -&gt; 2018-12-23 20:57:43</td>
</tr>
<tr>
<td align="left">MAKEDATE(year, day-of-year)</td>
<td align="left">基于给定参数年份 year 和所在年中的天数序号 day-of-year 返回一个日期</td>
<td align="left">SELECT MAKEDATE(2017, 3); -&gt; 2017-01-03</td>
</tr>
<tr>
<td align="left">MAKETIME(hour, minute, second)</td>
<td align="left">组合时间，参数分别为小时、分钟、秒</td>
<td align="left">SELECT MAKETIME(11, 35, 4); -&gt; 11:35:04</td>
</tr>
<tr>
<td align="left">MICROSECOND(date)</td>
<td align="left">返回日期参数所对应的微秒数</td>
<td align="left">SELECT MICROSECOND(&quot;2017-06-20 09:34:00.000023&quot;); -&gt; 23</td>
</tr>
<tr>
<td align="left">MINUTE(t)</td>
<td align="left">返回 t 中的分钟值</td>
<td align="left">SELECT MINUTE(&#39;1:2:3&#39;) -&gt; 2</td>
</tr>
<tr>
<td align="left">MONTHNAME(d)</td>
<td align="left">返回日期当中的月份名称，如 November</td>
<td align="left">SELECT MONTHNAME(&#39;2011-11-11 11:11:11&#39;) -&gt; November</td>
</tr>
<tr>
<td align="left">MONTH(d)</td>
<td align="left">返回日期d中的月份值，1 到 12</td>
<td align="left">SELECT MONTH(&#39;2011-11-11 11:11:11&#39;) -&gt;11</td>
</tr>
<tr>
<td align="left">NOW()</td>
<td align="left">返回当前日期和时间</td>
<td align="left">SELECT NOW() -&gt; 2018-12-23 20:57:43</td>
</tr>
<tr>
<td align="left">PERIOD_ADD(period, number)</td>
<td align="left">为 年-月 组合日期添加一个时段</td>
<td align="left">SELECT PERIOD_ADD(201703, 5);    -&gt; 201708</td>
</tr>
<tr>
<td align="left">PERIOD_DIFF(period1, period2)</td>
<td align="left">返回两个时段之间的月份差值</td>
<td align="left">SELECT PERIOD_DIFF(201710, 201703); -&gt; 7</td>
</tr>
<tr>
<td align="left">QUARTER(d)</td>
<td align="left">返回日期d是第几季节，返回 1 到 4</td>
<td align="left">SELECT QUARTER(&#39;2011-11-11 11:11:11&#39;) -&gt; 4</td>
</tr>
<tr>
<td align="left">SECOND(t)</td>
<td align="left">返回 t 中的秒钟值</td>
<td align="left">SELECT SECOND(&#39;1:2:3&#39;) -&gt; 3</td>
</tr>
<tr>
<td align="left">SEC_TO_TIME(s)</td>
<td align="left">将以秒为单位的时间 s 转换为时分秒的格式</td>
<td align="left">SELECT SEC_TO_TIME(4320) -&gt; 01:12:00</td>
</tr>
<tr>
<td align="left">STR_TO_DATE(string, format_mask)</td>
<td align="left">将字符串转变为日期</td>
<td align="left">SELECT STR_TO_DATE(&quot;August 10 2017&quot;, &quot;%M %d %Y&quot;); -&gt; 2017-08-10</td>
</tr>
<tr>
<td align="left">SUBDATE(d,n)</td>
<td align="left">日期 d 减去 n 天后的日期</td>
<td align="left">SELECT SUBDATE(&#39;2011-11-11 11:11:11&#39;, 1) -&gt;2011-11-10 11:11:11 (默认是天)</td>
</tr>
<tr>
<td align="left">SUBTIME(t,n)</td>
<td align="left">时间 t 减去 n 秒的时间</td>
<td align="left">SELECT SUBTIME(&#39;2011-11-11 11:11:11&#39;, 5) -&gt;2011-11-11 11:11:06 (秒)</td>
</tr>
<tr>
<td align="left">SYSDATE()</td>
<td align="left">返回当前日期和时间</td>
<td align="left">SELECT SYSDATE() -&gt; 2018-12-23 20:57:43</td>
</tr>
<tr>
<td align="left">TIME(expression)</td>
<td align="left">提取传入表达式的时间部分</td>
<td align="left">SELECT TIME(&quot;19:30:10&quot;); -&gt; 19:30:10</td>
</tr>
<tr>
<td align="left">TIME_FORMAT(t,f)</td>
<td align="left">按表达式 f 的要求显示时间 t</td>
<td align="left">SELECT TIME_FORMAT(&#39;11:11:11&#39;,&#39;%r&#39;) 11:11:11 AM</td>
</tr>
<tr>
<td align="left">TIME_TO_SEC(t)</td>
<td align="left">将时间 t 转换为秒</td>
<td align="left">SELECT TIME_TO_SEC(&#39;1:12:00&#39;) -&gt; 4320</td>
</tr>
<tr>
<td align="left">TIMEDIFF(time1, time2)</td>
<td align="left">计算时间差值</td>
<td align="left">SELECT TIMEDIFF(&quot;13:10:11&quot;, &quot;13:10:10&quot;); -&gt; 00:00:01</td>
</tr>
<tr>
<td align="left">TIMESTAMP(expression, interval)</td>
<td align="left">单个参数时，函数返回日期或日期时间表达式；有2个参数时，将参数加和</td>
<td align="left">SELECT TIMESTAMP(&quot;2017-07-23&quot;,  &quot;13:10:11&quot;); -&gt; 2017-07-23 13:10:11</td>
</tr>
<tr>
<td align="left">TO_DAYS(d)</td>
<td align="left">计算日期 d 距离 0000 年 1 月 1 日的天数</td>
<td align="left">SELECT TO_DAYS(&#39;0001-01-01 01:01:01&#39;) -&gt; 366</td>
</tr>
<tr>
<td align="left">WEEK(d)</td>
<td align="left">计算日期 d 是本年的第几个星期，范围是 0 到 53</td>
<td align="left">SELECT WEEK(&#39;2011-11-11 11:11:11&#39;) -&gt; 45</td>
</tr>
<tr>
<td align="left">WEEKDAY(d)</td>
<td align="left">日期 d 是星期几，0 表示星期一，1 表示星期二</td>
<td align="left">SELECT WEEKDAY(&quot;2017-06-15&quot;); -&gt; 3</td>
</tr>
<tr>
<td align="left">WEEKOFYEAR(d)</td>
<td align="left">计算日期 d 是本年的第几个星期，范围是 0 到 53</td>
<td align="left">SELECT WEEKOFYEAR(&#39;2011-11-11 11:11:11&#39;) -&gt; 45</td>
</tr>
<tr>
<td align="left">YEAR(d)</td>
<td align="left">返回年份</td>
<td align="left">SELECT YEAR(&quot;2017-06-15&quot;); -&gt; 2017</td>
</tr>
<tr>
<td align="left">YEARWEEK(date, mode)</td>
<td align="left">返回年份及第几周（0到53），mode 中 0 表示周天，1表示周一，以此类推</td>
<td align="left">SELECT YEARWEEK(&quot;2017-06-15&quot;); -&gt; 201724</td>
</tr>
</tbody></table>
<h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><h2 id="算数运算符"><a href="#算数运算符" class="headerlink" title="算数运算符"></a>算数运算符</h2><table>
<thead>
<tr>
<th align="left">运算符</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">+</td>
<td align="left">加法</td>
</tr>
<tr>
<td align="left">-</td>
<td align="left">减法</td>
</tr>
<tr>
<td align="left">*</td>
<td align="left">乘法</td>
</tr>
<tr>
<td align="left">/ 或 DIV</td>
<td align="left">除法</td>
</tr>
<tr>
<td align="left">% 或 MOD</td>
<td align="left">取余</td>
</tr>
</tbody></table>
<h2 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h2><table>
<thead>
<tr>
<th align="left">符号</th>
<th align="left">描述</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left">=</td>
<td align="left">等于</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">&lt;&gt;, !=</td>
<td align="left">不等于</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">&gt;</td>
<td align="left">大于</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">&lt;</td>
<td align="left">小于</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">&lt;=</td>
<td align="left">小于等于</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">&gt;=</td>
<td align="left">大于等于</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">BETWEEN</td>
<td align="left">在两值之间</td>
<td align="left">&gt;=min&amp;&amp;&lt;=max</td>
</tr>
<tr>
<td align="left">NOT BETWEEN</td>
<td align="left">不在两值之间</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">IN</td>
<td align="left">在集合中</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">NOT IN</td>
<td align="left">不在集合中</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">&lt;=&gt;</td>
<td align="left">严格比较两个NULL值是否相等</td>
<td align="left">两个操作码均为NULL时，其所得值为1；<br />而当一个操作码为NULL时，其所得值为0</td>
</tr>
<tr>
<td align="left">LIKE</td>
<td align="left">模糊匹配</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">REGEXP 或 RLIKE</td>
<td align="left">正则式匹配</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">IS NULL</td>
<td align="left">为空</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">IS NOT NULL</td>
<td align="left">不为空</td>
<td align="left"></td>
</tr>
</tbody></table>
<h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><table>
<thead>
<tr>
<th align="left">运算符号</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">NOT 或 !</td>
<td align="left">逻辑非</td>
</tr>
<tr>
<td align="left">AND</td>
<td align="left">逻辑与</td>
</tr>
<tr>
<td align="left">OR</td>
<td align="left">逻辑或</td>
</tr>
<tr>
<td align="left">XOR</td>
<td align="left">逻辑异或</td>
</tr>
</tbody></table>
<h2 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h2><table>
<thead>
<tr>
<th align="left">运算符号</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">&amp;</td>
<td align="left">按位与</td>
</tr>
<tr>
<td align="left">|</td>
<td align="left">按位或</td>
</tr>
<tr>
<td align="left">^</td>
<td align="left">按位异或</td>
</tr>
<tr>
<td align="left">!</td>
<td align="left">取反</td>
</tr>
<tr>
<td align="left">&lt;&lt;</td>
<td align="left">左移</td>
</tr>
<tr>
<td align="left">&gt;&gt;</td>
<td align="left">右移</td>
</tr>
</tbody></table>
<h2 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h2><p>最低优先级为：<b>:=</b>。</p>
<p>最高优先级为：<b>!</b>、<strong>BINARY</strong>、 <strong>COLLATE</strong>。</p>
<table>
<thead>
<tr>
<th>优先级顺序</th>
<th>运算符</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>:=</td>
</tr>
<tr>
<td>2</td>
<td>|| , OR , XOR</td>
</tr>
<tr>
<td>3</td>
<td>&amp;&amp; , AND</td>
</tr>
<tr>
<td>4</td>
<td>NOT</td>
</tr>
<tr>
<td>5</td>
<td>BETWEEN , CASE , WHEN , THEN , ELSE</td>
</tr>
<tr>
<td>6</td>
<td>= , &lt;=&gt; , &gt;= , &gt; , &lt;= , &lt; , &lt;&gt; , != , IS , LIKE, REGEXP , IN</td>
</tr>
<tr>
<td>7</td>
<td>|</td>
</tr>
<tr>
<td>8</td>
<td>&amp;</td>
</tr>
<tr>
<td>9</td>
<td>&lt;&lt; , &gt;&gt;</td>
</tr>
<tr>
<td>10</td>
<td>- , +</td>
</tr>
<tr>
<td>11</td>
<td>*, / , DIV , % , MOD</td>
</tr>
<tr>
<td>12</td>
<td>^</td>
</tr>
<tr>
<td>13</td>
<td>-（一元减号） , ~（一元比特反转）</td>
</tr>
<tr>
<td>14</td>
<td>!</td>
</tr>
</tbody></table>
<h1 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h1><h1 id="问题及解决办法"><a href="#问题及解决办法" class="headerlink" title="问题及解决办法"></a>问题及解决办法</h1><h2 id="误删MySQL中root所有权限的方法"><a href="#误删MySQL中root所有权限的方法" class="headerlink" title="误删MySQL中root所有权限的方法"></a>误删MySQL中root所有权限的方法</h2><ol>
<li>结束MySQL进程</li>
<li>以--skip-grant-tables方式启动<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld_safe  --user mysql --skip-grant-tables</code></pre></li>
<li>更新的MYSQL.USER表的所有字段中为N的为Y<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">&gt; use mysql;
&gt; update user set Select_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Insert_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Update_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Delete_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Create_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Drop_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Reload_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Shutdown_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Process_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set File_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Grant_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set References_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Index_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Alter_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Show_db_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Super_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Create_tmp_table_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Lock_tables_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Execute_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Repl_slave_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Repl_client_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Create_view_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Show_view_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Create_routine_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Alter_routine_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Create_user_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Event_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;
&gt; update user set Trigger_priv &#x3D;&#39;Y&#39; where user &#x3D; &#39;root&#39;;</code></pre></li>
</ol>
<blockquote>
<p>总结</p>
<p>权限问题最后要保证mysql.user表中 host为localhost和%都有root的所有权限<br>host列是指定登录的ip比如说 user=root host=192.168.1.1 这里的意思就是说root用户只能通过 192.168.1.1的客户端去访问而%则是个通配符 如果host=192.168.1.%那么就表示 只要是 ip为host=192.168.1.前缀的客户端都可以连接那么host=%的话则表示所有ip都有权去连接这也就是为什么在开启远程连接的时候大部分人都直接把host改成%的缘故因为省事</p>
</blockquote>

      </div>
      
      
      
    </div>

    
    



<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JIAHE</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/local-search.js"></script>



<script>
if (document.querySelectorAll('.pdf-container').length) {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/pdfobject@2.2.4/pdfobject.min.js', () => {
    document.querySelectorAll('.pdf-container').forEach(element => {
      PDFObject.embed(element.dataset.target, element, {
        pdfOpenParams: {
          navpanes : 0,
          toolbar  : 0,
          statusbar: 0,
          pagemode : 'thumbs',
          view     : 'FitH'
        },
        PDFJS_URL: '/lib/pdf/web/viewer.html',
        height   : element.dataset.height
      });
    });
  }, window.PDFObject);
}
</script>



  




  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.1.0/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink.listen({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://xiaojianzheng.cn/mysql-basics/',]
      });
      });
  </script>

</body>
</html>
