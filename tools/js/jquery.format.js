!function(t){function i(e){this.init(e),e=this.options.method,t.isFunction(this[e])||t.error("'"+e+"' is not a Formatter method."),this.format=function(e){return this[this.options.method].call(this,e)}}i.prototype={options:{},init:function(e){this.options=t.extend({},t.fn.format.defaults,e),this.step=this.options.step,this.preserveComments=this.options.preserveComments,this.shift=function(e){for(var r="    ",r=isNaN(parseInt(e))?e:new Array(e+1).join(" "),s=["\n"],t=0;t<100;t++)s.push(s[t]+r);return s}(this.step)},xml:function(e){for(var r=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),s=r.length,t=!1,i=0,c="",a=0,a=0;a<s;a++)-1<r[a].search(/<!/)?(c+=this.shift[i]+r[a],t=!0,(-1<r[a].search(/-->/)||-1<r[a].search(/\]>/)||-1<r[a].search(/!DOCTYPE/))&&(t=!1)):-1<r[a].search(/-->/)||-1<r[a].search(/\]>/)?(c+=r[a],t=!1):/^<\w/.exec(r[a-1])&&/^<\/\w/.exec(r[a])&&/^<[\w:\-\.\,]+/.exec(r[a-1])==/^<\/[\w:\-\.\,]+/.exec(r[a])[0].replace("/","")?(c+=r[a],t||i--):-1<r[a].search(/<\w/)&&-1==r[a].search(/<\//)&&-1==r[a].search(/\/>/)?c=t?c+r[a]:c+(this.shift[i++]+r[a]):-1<r[a].search(/<\w/)&&-1<r[a].search(/<\//)?c=t?c+r[a]:c+(this.shift[i]+r[a]):-1<r[a].search(/<\//)?c=t?c+r[a]:c+(this.shift[--i]+r[a]):-1<r[a].search(/\/>/)?c=t?c+r[a]:c+(this.shift[i]+r[a]):-1<r[a].search(/<\?/)||-1<r[a].search(/xmlns\:/)||-1<r[a].search(/xmlns\=/)?c+=this.shift[i]+r[a]:c+=r[a];return"\n"==c[0]?c.slice(1):c},xmlmin:function(e){return(this.preserveComments?e:e.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns")).replace(/>\s{0,}</g,"><")},json:function(e){return"undefined"==typeof JSON?e:"string"==typeof e?JSON.stringify(JSON.parse(e),null,this.step):"object"==typeof e?JSON.stringify(e,null,this.step):e},jsonmin:function(e){return"undefined"==typeof JSON?e:JSON.stringify(JSON.parse(e),null,0)},css:function(e){for(var r=e.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),s=r.length,t=0,i="",c=0,c=0;c<s;c++)/\{/.exec(r[c])?i+=this.shift[t++]+r[c]:/\}/.exec(r[c])?i+=this.shift[--t]+r[c]:(/\*\\/.exec(r[c]),i+=this.shift[t]+r[c]);return i.replace(/^\n{1,}/,"")},cssmin:function(e){return(this.preserveComments?e:e.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},sql:function(e){for(var r,s,t,i=e.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),c=i.length,a=[],n=0,l=this.step,p=0,g="",h=0,h=0;h<c;h++)a=h%2?a.concat(i[h]):a.concat((r=i[h],s=l,r.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+s+s+"AND ").replace(/ BETWEEN /gi,"~::~"+s+"BETWEEN ").replace(/ CASE /gi,"~::~"+s+"CASE ").replace(/ ELSE /gi,"~::~"+s+"ELSE ").replace(/ END /gi,"~::~"+s+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+s+"ON ").replace(/ OR /gi,"~::~"+s+s+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+s+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+s).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+s+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")));for(c=a.length,h=0;h<c;h++)t=a[h],p=p-(t.replace(/\(/g,"").length-t.replace(/\)/g,"").length),/\s{0,}\s{0,}SELECT\s{0,}/.exec(a[h])&&(a[h]=a[h].replace(/\,/g,",\n"+l+l)),/\s{0,}\s{0,}SET\s{0,}/.exec(a[h])&&(a[h]=a[h].replace(/\,/g,",\n"+l+l)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(a[h])?g+=this.shift[++n]+a[h]:/\'/.exec(a[h])?(p<1&&n&&n--,g+=a[h]):(g+=this.shift[n]+a[h],p<1&&n&&n--);return g=g.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},sqlmin:function(e){return e.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")}},t.fn.format=function(e){var s=new i(e);return this.each(function(){var e=t(this),r=e.val(),r=s.format(r);e.val(r)})},t.format=function(e,r){return new i(r).format(e)},t.fn.format.defaults={method:"xml",step:"    ",preserveComments:!1}}(jQuery);