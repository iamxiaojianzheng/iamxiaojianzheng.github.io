<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;xiaojianzheng.cn&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Gemini&quot;,&quot;version&quot;:&quot;8.5.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:true,&quot;bookmark&quot;:{&quot;enable&quot;:true,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:true,&quot;pangu&quot;:true,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:false,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:true,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;搜索...&quot;,&quot;empty&quot;:&quot;没有找到任何搜索结果：${query}&quot;,&quot;hits_time&quot;:&quot;找到 ${hits} 个搜索结果（用时 ${time} 毫秒）&quot;,&quot;hits&quot;:&quot;找到 ${hits} 个搜索结果&quot;},&quot;path&quot;:&quot;&#x2F;search.xml&quot;,&quot;localsearch&quot;:{&quot;enable&quot;:true,&quot;trigger&quot;:&quot;auto&quot;,&quot;top_n_per_article&quot;:1,&quot;unescape&quot;:false,&quot;preload&quot;:true}}</script><script src="/js/config.js"></script>
<meta name="description" content="Collection &amp; Reuse">
<meta property="og:type" content="website">
<meta property="og:title" content="JIAHE">
<meta property="og:url" content="https://xiaojianzheng.cn/index.html">
<meta property="og:site_name" content="JIAHE">
<meta property="og:description" content="Collection &amp; Reuse">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="JIAHE">
<meta property="article:tag" content="JIAHE">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://xiaojianzheng.cn/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:true,&quot;isPost&quot;:false,&quot;lang&quot;:&quot;zh-CN&quot;,&quot;comments&quot;:&quot;&quot;,&quot;permalink&quot;:&quot;&quot;,&quot;path&quot;:&quot;index.html&quot;,&quot;title&quot;:&quot;&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>JIAHE</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">JIAHE</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-导航"><a href="/navigation/" rel="section"><i class="fa fa-location-arrow fa-fw"></i>导航</a></li>
        <li class="menu-item menu-item-巨人的肩膀"><a href="/experience/" rel="section"><i class="fa fa-lightbulb fa-fw"></i>巨人的肩膀</a></li>
        
            
  <li class="menu-item menu-item-java"><a href="/java/" rel="section"><i class="fa fa-code fa-fw"></i>Java</a></li>


      
        
            
  <li class="menu-item menu-item-spring全家桶"><a href="/spring-framework/" rel="section"><i class="fa fa-code fa-fw"></i>Spring全家桶</a></li>


      
        <li class="menu-item menu-item-代码可读性"><a href="/code-easy-read/" rel="section"><i class="far fa-file-code fa-fw"></i>代码可读性</a></li>
        
            
  <li class="menu-item menu-item-数据库"><a href="/database/" rel="section"><i class="fas fa-database fa-fw"></i>数据库</a></li>


      
        
            
  <li class="menu-item menu-item-计算机网络"><a href="/network/" rel="section"><i class="fas fa-network-wired fa-fw"></i>计算机网络</a></li>


      
        
            
  <li class="menu-item menu-item-操作系统基础"><a href="/os/" rel="section"><i class="fas fa-laptop fa-fw"></i>操作系统基础</a></li>


      
        
            
  <li class="menu-item menu-item-基础概念"><a href="/basic-concepts/" rel="section"><i class="fas fa-star fa-fw"></i>基础概念</a></li>


      
        
            
  <li class="menu-item menu-item-数据结构与算法"><a href="/data-structure/" rel="section"><i class="fas fa-poll fa-fw"></i>数据结构与算法</a></li>


      
        <li class="menu-item menu-item-git基础"><a href="/git-basics/" rel="section"><i class="fab fa-git-alt fa-fw"></i>Git基础</a></li>
        <li class="menu-item menu-item-vim-cheat-sheet"><a href="/vim-cheat-sheet/" rel="section"><i class="fab fa-vimeo-square fa-fw"></i>Vim Cheat Sheet</a></li>
        
            
  <li class="menu-item menu-item-软件安装部署"><a href="/software-install-and-deploy/" rel="section"><i class="fab fa-windows fa-fw"></i>软件安装部署</a></li>


      
        <li class="menu-item menu-item-html元素参考"><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element" rel="noopener" target="_blank"><i class="fab fa-html5 fa-fw"></i>HTML元素参考</a></li>
        <li class="menu-item menu-item-css-参考"><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Reference" rel="noopener" target="_blank"><i class="fab fa-css3-alt fa-fw"></i>CSS 参考</a></li>
        <li class="menu-item menu-item-javascript-参考"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference" rel="noopener" target="_blank"><i class="fab fa-js-square fa-fw"></i>JavaScript 参考</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">JIAHE</p>
  <div class="site-description" itemprop="description">Collection & Reuse</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">56</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">66</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xiaojianzheng.cn/2021/07/07/Nginx%E6%9C%80%E5%85%A8%E6%93%8D%E4%BD%9C%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JIAHE">
      <meta itemprop="description" content="Collection & Reuse">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JIAHE">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/07/Nginx%E6%9C%80%E5%85%A8%E6%93%8D%E4%BD%9C%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">Nginx最全操作总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-07 15:04:00" itemprop="dateCreated datePublished" datetime="2021-07-07T15:04:00+08:00">2021-07-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>原文地址：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/384752564">https://zhuanlan.zhihu.com/p/384752564</a></p>
</blockquote>
<p>作者：chrootliu，腾讯 QQ 音乐前端开发工程师</p>
<blockquote>
<p>本文将会从：安装 -&gt; 全局配置 -&gt; 常用的各种配置 来书写，其中常用配置写的炒鸡详细，需要的童鞋可以直接滑倒相应的位置查看。</p>
</blockquote>
<h1 id="安装-nginx"><a href="#安装-nginx" class="headerlink" title="安装 nginx"></a>安装 nginx</h1><p><strong>下载 nginx 的压缩包文件到根目录，官网下载地址：<a href="https://link.zhihu.com/?target=http://nginx.org/download/nginx-x.xx.xx.tar.gz">http://nginx.org/download/nginx-x.xx.xx.tar.gz</a></strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">yum update #更新系统软件
cd &#x2F;
wget nginx.org&#x2F;download&#x2F;nginx-1.17.2.tar.gz</code></pre>

<p><strong>解压 tar.gz 压缩包文件，进去 nginx-1.17.2</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">tar -xzvf nginx-1.17.2.tar.gz
cd nginx-1.17.2</code></pre>

<p><strong>进入文件夹后进行配置检查</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">.&#x2F;configure</code></pre>

<p><strong>通过安装前的配置检查，发现有报错。检查中发现一些依赖库没有找到，这时候需要先安装 nginx 的一些依赖库</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">yum -y install pcre* #安装使nginx支持rewrite
yum -y install gcc-c++
yum -y install zlib*
yum -y install openssl openssl-devel</code></pre>

<p><strong>再次进行检查操作 ./configure 没发现报错显示，接下来进行编译并安装的操作</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 检查模块支持
.&#x2F;configure  --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx  --with-http_ssl_module --with-http_v2_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_auth_request_module --with-http_random_index_module --with-http_secure_link_module --with-http_degradation_module --with-http_slice_module --with-http_stub_status_module --with-mail --with-mail_ssl_module --with-stream --with-stream_ssl_module --with-stream_realip_module --with-stream_ssl_preread_module --with-threads --user&#x3D;www --group&#x3D;www</code></pre>

<p>这里得特别注意下，你以后需要用到的功能模块是否存在，不然以后添加新的包会比较麻烦。</p>
<p><strong>查看默认安装的模块支持</strong></p>
<p>命令 <code>ls nginx-1.17.2</code> 查看 nginx 的文件列表，可以发现里面有一个 auto 的目录。</p>
<p>在这个 auto 目录中有一个 options 文件，这个文件里面保存的就是 nginx 编译过程中的所有选项配置。</p>
<p>通过命令：<code>cat nginx-1.17.2/auto/options | grep YES</code>就可以查看</p>
<p><strong><a href="https://link.zhihu.com/?target=https://jingyan.baidu.com/article/454316ab354edcf7a7c03a81.html">nginx 编译安装时，怎么查看安装模块</a></strong></p>
<p><strong>编译并安装</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">make &amp;&amp; make install</code></pre>

<p>这里需要注意，模块的支持跟后续的 nginx 配置有关，比如 SSL，gzip 压缩等等，编译安装前最好检查需要配置的模块存不存在。</p>
<p><strong>查看 nginx 安装后在的目录，可以看到已经安装到 /usr/local/nginx 目录了</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">whereis nginx
$nginx: &#x2F;usr&#x2F;local&#x2F;nginx</code></pre>

<p><strong>启动 nginx 服务</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;
.&#x2F;nginx</code></pre>

<p>服务启动的时候报错了：<code>nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)</code> ，通过命令查看本机网络地址和端口等一些信息，找到被占用的 80 端口 <code>netstat -ntpl</code> 的 tcp 连接，并杀死进程 (kill 进程 pid)</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">netstat -ntpl
kill 进程PID</code></pre>

<p>继续启动 nginx 服务，启动成功</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">.&#x2F;nginx</code></pre>

<p>在浏览器直接访问 ip 地址，页面出现 Welcome to Nginx! 则安装成功。</p>
<h1 id="nginx-配置"><a href="#nginx-配置" class="headerlink" title="nginx 配置"></a>nginx 配置</h1><h1 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h1><pre class="line-numbers language-none"><code class="language-none">main        # 全局配置，对全局生效
├── events  # 配置影响 nginx 服务器或与用户的网络连接
├── http    # 配置代理，缓存，日志定义等绝大多数功能和第三方模块的配置
│   ├── upstream # 配置后端服务器具体地址，负载均衡配置不可或缺的部分
│   ├── server   # 配置虚拟主机的相关参数，一个 http 块中可以有多个 server 块
│   ├── server
│   │   ├── location  # server 块可以包含多个 location 块，location 指令用于匹配 uri
│   │   ├── location
│   │   └── ...
│   └── ...
└── ...</code></pre>

<h1 id="主要配置含义"><a href="#主要配置含义" class="headerlink" title="主要配置含义"></a>主要配置含义</h1><ul>
<li>  main:nginx 的全局配置，对全局生效。</li>
<li>  events: 配置影响 nginx 服务器或与用户的网络连接。</li>
<li>  http：可以嵌套多个 server，配置代理，缓存，日志定义等绝大多数功能和第三方模块的配置。</li>
<li>  server：配置虚拟主机的相关参数，一个 http 中可以有多个 server。</li>
<li>  location：配置请求的路由，以及各种页面的处理情况。</li>
<li>  upstream：配置后端服务器具体地址，负载均衡配置不可或缺的部分。</li>
</ul>
<h1 id="nginx-conf-配置文件的语法规则"><a href="#nginx-conf-配置文件的语法规则" class="headerlink" title="nginx.conf 配置文件的语法规则"></a>nginx.conf 配置文件的语法规则</h1><ol>
<li> 配置文件由指令与指令块构成</li>
<li> 每条指令以 “;” 分号结尾，指令与参数间以空格符号分隔</li>
<li> 指令块以 {} 大括号将多条指令组织在一起</li>
<li> include 语句允许组合多个配置文件以提升可维护性</li>
<li> 通过 # 符号添加注释，提高可读性</li>
<li> 通过 $ 符号使用变量</li>
<li> 部分指令的参数支持正则表达式，例如常用的 location 指令</li>
</ol>
<h3 id="内置变量"><a href="#内置变量" class="headerlink" title="内置变量"></a>内置变量</h3><p>nginx 常用的内置全局变量，你可以在配置中随意使用：</p>
<table>
<thead>
<tr>
<th>TCP</th>
<th>UDP</th>
</tr>
</thead>
<tbody><tr>
<td>$host</td>
<td>请求信息中的 Host，如果请求中没有Host行，则等于设置的服务器名</td>
</tr>
<tr>
<td>$request_method</td>
<td>客户端请求类型,如 GET、POST</td>
</tr>
<tr>
<td>$remote_addr</td>
<td>客户端的 IP 地址</td>
</tr>
<tr>
<td>$args</td>
<td>请求中的参数</td>
</tr>
<tr>
<td>$content_length</td>
<td>请求头中的 Content-length 字段</td>
</tr>
<tr>
<td>$http_user_agent</td>
<td>客户端 agent 信</td>
</tr>
<tr>
<td>$httpcookie</td>
<td>客户端 cookie 信息</td>
</tr>
<tr>
<td>$remote_port</td>
<td>客户端的端口</td>
</tr>
<tr>
<td>$server_protoco</td>
<td>请求使用的协议，如HTTP/1.1</td>
</tr>
<tr>
<td>$server_addr</td>
<td>服务器地址</td>
</tr>
<tr>
<td>$server_name</td>
<td>服务器名称</td>
</tr>
<tr>
<td>$server_port</td>
<td>服务器的端口号</td>
</tr>
</tbody></table>
<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><p>这里列举几个常用的命令：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">nginx -s reload  # 向主进程发送信号，重新加载配置文件，热重启
nginx -s reopen  # 重启 Nginx
nginx -s stop    # 快速关闭
nginx -s quit    # 等待工作进程处理完成后关闭
nginx -T         # 查看当前 Nginx 最终的配置
nginx -t -c &lt;配置路径&gt;  # 检查配置是否有问题，如果已经在配置目录，则不需要 -c</code></pre>

<p>以上命令通过 <code>nginx -h</code> 就可以查看到，还有其它不常用这里未列出。</p>
<p>Linux 系统应用管理工具 systemd 关于 nginx 的常用命令：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl start nginx    # 启动 Nginx
systemctl stop nginx     # 停止 Nginx
systemctl restart nginx  # 重启 Nginx
systemctl reload nginx   # 重新加载 Nginx，用于修改配置后
systemctl enable nginx   # 设置开机启动 Nginx
systemctl disable nginx  # 关闭开机启动 Nginx
systemctl status nginx   # 查看 Nginx 运行状态</code></pre>

<h3 id="配置-nginx-开机自启"><a href="#配置-nginx-开机自启" class="headerlink" title="配置 nginx 开机自启"></a>配置 nginx 开机自启</h3><p><strong>利用 systemctl 命令</strong>：</p>
<p>如果用 yum install 命令安装的 nginx，yum 命令会自动创建 nginx.service 文件，直接用命令:</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl enable nginx   # 设置开机启动 Nginx
systemctl disable nginx  # 关闭开机启动 Nginx</code></pre>

<p>就可以设置开机自启，否则需要在系统服务目录里创建 nginx.service 文件。</p>
<p>创建并打开 nginx.service 文件：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">vi &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;nginx.service</code></pre>

<p>内容如下：</p>
<pre class="line-numbers language-none"><code class="language-none">[Unit]
Description&#x3D;nginx
After&#x3D;network.target

[Service]
Type&#x3D;forking
ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx
ExecReload&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx -s reload
ExecStop&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx -s quit
PrivateTmp&#x3D;true

[Install]
WantedBy&#x3D;multi-user.target</code></pre>

<p><code>:wq</code> 保存退出，运行 <code>systemctl daemon-reload</code> 使文件生效。</p>
<p>这样便可以通过以下命令操作 nginx 了：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl start nginx.service # 启动nginx服务
systemctl enable nginx.service # 设置开机启动
systemctl disable nginx.service # 停止开机自启动
systemctl status nginx.service # 查看服务当前状态
systemctl restart nginx.service # 重新启动服务
systemctl is-enabled nginx.service #查询服务是否开机启动</code></pre>

<p><strong>通过开机启动命令脚本实现开机自启</strong></p>
<p>创建开机启动命令脚本文件：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">vi &#x2F;etc&#x2F;init.d&#x2F;nginx</code></pre>

<p>在这个 nginx 文件中插入一下启动脚本代码，启动脚本代码来源网络复制，实测有效：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">#! &#x2F;bin&#x2F;bash
# chkconfig: - 85 15
PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx
DESC&#x3D;&quot;nginx daemon&quot;
NAME&#x3D;nginx
DAEMON&#x3D;$PATH&#x2F;sbin&#x2F;$NAME
CONFIGFILE&#x3D;$PATH&#x2F;conf&#x2F;$NAME.conf
PIDFILE&#x3D;$PATH&#x2F;logs&#x2F;$NAME.pid
scriptNAME&#x3D;&#x2F;etc&#x2F;init.d&#x2F;$NAME
set -e
[ -x &quot;$DAEMON&quot; ] || exit 0
do_start() &#123;
$DAEMON -c $CONFIGFILE || echo -n &quot;nginx already running&quot;
&#125;
do_stop() &#123;
$DAEMON -s stop || echo -n &quot;nginx not running&quot;
&#125;
do_reload() &#123;
$DAEMON -s reload || echo -n &quot;nginx can&#39;t reload&quot;
&#125;
case &quot;$1&quot; in
start)
echo -n &quot;Starting $DESC: $NAME&quot;
do_start
echo &quot;.&quot;
;;
stop)
echo -n &quot;Stopping $DESC: $NAME&quot;
do_stop
echo &quot;.&quot;
;;
reload|graceful)
echo -n &quot;Reloading $DESC configuration...&quot;
do_reload
echo &quot;.&quot;
;;
restart)
echo -n &quot;Restarting $DESC: $NAME&quot;
do_stop
do_start
echo &quot;.&quot;
;;
*)
echo &quot;Usage: $scriptNAME &#123;start|stop|reload|restart&#125;&quot; &gt;&amp;2
exit 3
;;
esac
exit 0</code></pre>

<p>设置所有人都有对这个启动脚本 nginx 文件的执行权限：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">chmod a+x &#x2F;etc&#x2F;init.d&#x2F;nginx</code></pre>

<p>把 nginx 加入系统服务中：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">chkconfig --add nginx</code></pre>

<p>把服务设置为开机启动：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">chkconfig nginx on</code></pre>

<p>reboot 重启系统生效，可以使用上面 systemctl 方法相同的命令：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl start nginx.service # 启动nginx服务
systemctl enable nginx.service # 设置开机启动
systemctl disable nginx.service # 停止开机自启动
systemctl status nginx.service # 查看服务当前状态
systemctl restart nginx.service # 重新启动服务
systemctl is-enabled nginx.service #查询服务是否开机启动</code></pre>

<p>如果服务启动的时候出现 <code>Restarting nginx daemon: nginxnginx: [error] open() &quot;/usr/local/nginx/logs/nginx.pid&quot; failed (2: No such file or directory) nginx not running</code> 的错误，通过 nginx -c 参数指定配置文件即可解决</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx -c &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;nginx.conf</code></pre>

<p>如果服务启动中出现 <code>nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)</code> 的错误，可以先通过 <code>service nginx stop</code> 停止服务，再启动就好。</p>
<h1 id="配置-nginx-全局可用"><a href="#配置-nginx-全局可用" class="headerlink" title="配置 nginx 全局可用"></a>配置 nginx 全局可用</h1><p>当你每次改了 <code>nginx.conf</code> 配置文件的内容都需要重新到 nginx 启动目录去执行命令，或者通过 -p 参数指向特定目录，会不会感觉很麻烦？</p>
<p>例如： 直接执行 <code>nginx -s reload</code> 会报错 <code>-bash: nginx: command not found</code>，需要到 <code>/usr/local/nginx/sbin</code> 目录下面去执行，并且是执行 <code>./nginx -s reload</code>。</p>
<p>这里有两种方式可以解决，一种是通过脚本对 nginx 命令包装，这里介绍另外一种比较简单：通过把 nginx 配置到环境变量里，用 nginx 执行指令即可。步骤如下：</p>
<p>1、编辑 /etc/profile</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">vi &#x2F;etc&#x2F;profile</code></pre>

<p>2、在最后一行添加配置，:wq 保存</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">export PATH&#x3D;$PATH:&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin</code></pre>

<p>3、使配置立即生效</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">source &#x2F;etc&#x2F;profile</code></pre>

<p>这样就可以愉快的直接在全局使用 nginx 命令了。</p>
<h1 id="nginx-常用功能"><a href="#nginx-常用功能" class="headerlink" title="nginx 常用功能"></a>nginx 常用功能</h1><h1 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h1><p>我们最常说的反向代理的是通过反向代理解决跨域问题。</p>
<p>其实反向代理还可以用来控制缓存（代理缓存 proxy cache），进行访问控制等等，以及后面说的负载均衡其实都是通过反向代理来实现的。</p>
<pre class="line-numbers language-none"><code class="language-none">server &#123;
    listen    8080;
        # 用户访问 ip:8080&#x2F;test 下的所有路径代理到 github
        location &#x2F;test &#123;
         proxy_pass   https:&#x2F;&#x2F;github.com;
        &#125;

        # 所有 &#x2F;api 下的接口访问都代理到本地的 8888 端口
        # 例如你本地运行的 java 服务的端口是 8888，接口都是以 &#x2F;api 开头
        location &#x2F;api &#123;
            proxy_pass   http:&#x2F;&#x2F;127.0.0.1:8888;
        &#125;

&#125;</code></pre>

<h1 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h1><pre class="line-numbers language-none"><code class="language-none">server &#123;
   location ~ ^&#x2F;index.html &#123;
       # 匹配 index.html 页面 除了 127.0.0.1 以外都可以访问
       deny 192.168.1.1;
       deny 192.168.1.2;
       allow all;
 &#125;
&#125;</code></pre>

<p>上面的命令表示禁止 192.168.1.1 和 192.168.1.2 两个 ip 访问，其它全部允许。从上到下的顺序，匹配到了便跳出，可以按你的需求设置。</p>
<h1 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h1><p>通过负载均衡充利用服务器资源，nginx 目前支持自带 4 种负载均衡策略，还有 2 种常用的第三方策略。</p>
<p><strong>轮询策略（默认）</strong></p>
<p>每个请求按时间顺序逐一分配到不同的后端服务器，如果有后端服务器挂掉，能自动剔除。但是如果其中某一台服务器压力太大，出现延迟，会影响所有分配在这台服务器下的用户。</p>
<pre class="line-numbers language-none"><code class="language-none">http &#123;
    upstream test.com &#123;
        server 192.168.1.12:8887;
        server 192.168.1.13:8888;
    &#125;
    server &#123;
        location &#x2F;api &#123;
            proxy_pass  http:&#x2F;&#x2F;test.com;
        &#125;
    &#125;
&#125;</code></pre>

<p><strong>根据服务器权重</strong></p>
<p>例如要配置：10 次请求中大概 1 次访问到 8888 端口，9 次访问到 8887 端口：</p>
<pre class="line-numbers language-none"><code class="language-none">http &#123;
    upstream test.com &#123;
        server 192.168.1.12:8887 weight&#x3D;9;
        server 192.168.1.13:8888 weight&#x3D;1;
    &#125;
    server &#123;
        location &#x2F;api &#123;
            proxy_pass  http:&#x2F;&#x2F;test.com;
        &#125;
    &#125;
&#125;</code></pre>

<p><strong>客户端 ip 绑定（ip_hash）</strong></p>
<p>来自同一个 ip 的请求永远只分配一台服务器，有效解决了动态网页存在的 session 共享问题。例如：比如把登录信息保存到了 session 中，那么跳转到另外一台服务器的时候就需要重新登录了。</p>
<p>所以很多时候我们需要一个客户只访问一个服务器，那么就需要用 ip_hash 了。</p>
<pre class="line-numbers language-none"><code class="language-none">http &#123;
    upstream test.com &#123;
     ip_hash;
        server 192.168.1.12:8887;
        server 192.168.1.13:8888;
    &#125;
    server &#123;
        location &#x2F;api &#123;
            proxy_pass  http:&#x2F;&#x2F;test.com;
        &#125;
    &#125;
&#125;</code></pre>

<p><strong>最小连接数策略</strong></p>
<p>将请求优先分配给压力较小的服务器，它可以平衡每个队列的长度，并避免向压力大的服务器添加更多的请求。</p>
<pre class="line-numbers language-none"><code class="language-none">http &#123;
    upstream test.com &#123;
     least_conn;
        server 192.168.1.12:8887;
        server 192.168.1.13:8888;
    &#125;
    server &#123;
        location &#x2F;api &#123;
            proxy_pass  http:&#x2F;&#x2F;test.com;
        &#125;
    &#125;
&#125;</code></pre>

<p><strong>最快响应时间策略（依赖于第三方 NGINX Plus）</strong></p>
<p>依赖于 NGINX Plus，优先分配给响应时间最短的服务器。</p>
<pre class="line-numbers language-none"><code class="language-none">http &#123;
    upstream test.com &#123;
     fair;
        server 192.168.1.12:8887;
        server 192.168.1.13:8888;
    &#125;
    server &#123;
        location &#x2F;api &#123;
            proxy_pass  http:&#x2F;&#x2F;test.com;
        &#125;
    &#125;
&#125;</code></pre>

<p><strong>按访问 url 的 hash 结果（第三方）</strong></p>
<p>按访问 url 的 hash 结果来分配请求，使每个 url 定向到同一个后端服务器，后端服务器为缓存时比较有效。 在 upstream 中加入 hash 语句，server 语句中不能写入 weight 等其他的参数，hash_method 是使用的 hash 算法</p>
<pre class="line-numbers language-none"><code class="language-none">http &#123;
    upstream test.com &#123;
     hash $request_uri;
     hash_method crc32;
     server 192.168.1.12:8887;
     server 192.168.1.13:8888;
    &#125;
    server &#123;
        location &#x2F;api &#123;
            proxy_pass  http:&#x2F;&#x2F;test.com;
        &#125;
    &#125;
&#125;</code></pre>

<p>采用 HAproxy 的 loadbalance uri 或者 nginx 的 upstream_hash 模块，都可以做到针对 url 进行哈希算法式的负载均衡转发。</p>
<h3 id="gzip-压缩"><a href="#gzip-压缩" class="headerlink" title="gzip 压缩"></a>gzip 压缩</h3><p>开启 gzip 压缩可以大幅减少 http 传输过程中文件的大小，可以极大的提高网站的访问速度，基本是必不可少的优化操作：</p>
<pre class="line-numbers language-none"><code class="language-none">gzip  on; # 开启gzip 压缩
# gzip_types
# gzip_static on;
# gzip_proxied expired no-cache no-store private auth;
# gzip_buffers 16 8k;
gzip_min_length 1k;
gzip_comp_level 4;
gzip_http_version 1.0;
gzip_vary off;
gzip_disable &quot;MSIE [1-6]\.&quot;;</code></pre>

<p>解释一下：</p>
<ol>
<li> gzip_types：要采用 gzip 压缩的 MIME 文件类型，其中 text/html 被系统强制启用；</li>
<li> gzip_static：默认 off，该模块启用后，Nginx 首先检查是否存在请求静态文件的 gz 结尾的文件，如果有则直接返回该 .gz 文件内容；</li>
<li> gzip_proxied：默认 off，nginx 做为反向代理时启用，用于设置启用或禁用从代理服务器上收到相应内容 gzip 压缩；</li>
<li> gzip_buffers：获取多少内存用于缓存压缩结果，16 8k 表示以 8k*16 为单位获得；</li>
<li> gzip_min_length：允许压缩的页面最小字节数，页面字节数从 header 头中的 Content-Length 中进行获取。默认值是 0，不管页面多大都压缩。建议设置成大于 1k 的字节数，小于 1k 可能会越压越大；</li>
<li> gzip_comp_level：gzip 压缩比，压缩级别是 1-9，1 压缩级别最低，9 最高，级别越高压缩率越大，压缩时间越长，建议 4-6；</li>
<li> gzip_http_version：默认 1.1，启用 gzip 所需的 HTTP 最低版本；</li>
<li> gzip_vary：用于在响应消息头中添加 Vary：Accept-Encoding，使代理服务器根据请求头中的 Accept-Encoding 识别是否启用 gzip 压缩；</li>
<li> gzip_disable 指定哪些不需要 gzip 压缩的浏览器</li>
</ol>
<p>其中第 2 点，普遍是结合前端打包的时候打包成 gzip 文件后部署到服务器上，这样服务器就可以直接使用 gzip 的文件了，并且可以把压缩比例提高，这样 nginx 就不用压缩，也就不会影响速度。一般不追求极致的情况下，前端不用做任何配置就可以使用啦~</p>
<p>附前端 webpack 开启 gzip 压缩配置，在 vue-cli3 的 vue.config.js 配置文件中：</p>
<pre class="line-numbers language-none"><code class="language-none">const CompressionWebpackPlugin &#x3D; require(&#39;compression-webpack-plugin&#39;)

module.exports &#x3D; &#123;
  &#x2F;&#x2F; gzip 配置
  configureWebpack: config &#x3D;&gt; &#123;
    if (process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &#39;production&#39;) &#123;
      &#x2F;&#x2F; 生产环境
      return &#123;
        plugins: [new CompressionWebpackPlugin(&#123;
          test: &#x2F;\.js$|\.html$|\.css&#x2F;,    &#x2F;&#x2F; 匹配文件名
          threshold: 1024,               &#x2F;&#x2F; 文件压缩阈值，对超过 1k 的进行压缩
          deleteOriginalAssets: false     &#x2F;&#x2F; 是否删除源文件
        &#125;)]
      &#125;
    &#125;
  &#125;,
  ...
&#125;</code></pre>

<h3 id="HTTP-服务器"><a href="#HTTP-服务器" class="headerlink" title="HTTP 服务器"></a>HTTP 服务器</h3><p>nginx 本身也是一个静态资源的服务器，当只有静态资源的时候，就可以使用 nginx 来做服务器：</p>
<pre class="line-numbers language-none"><code class="language-none">server &#123;
  listen       80;
  server_name  localhost;

  location &#x2F; &#123;
      root   &#x2F;usr&#x2F;local&#x2F;app;
      index  index.html;
  &#125;
&#125;</code></pre>

<p>这样如果访问 <a href="https://link.zhihu.com/?target=http://ip">http://ip</a> 就会默认访问到 /usr/local/app 目录下面的 index.html，如果一个网站只是静态页面的话，那么就可以通过这种方式来实现部署，比如一个静态官网。</p>
<h1 id="动静分离"><a href="#动静分离" class="headerlink" title="动静分离"></a>动静分离</h1><p>就是把动态和静态的请求分开。方式主要有两种：</p>
<ul>
<li>  一种是纯粹把静态文件独立成单独的域名，放在独立的服务器上，也是目前主流推崇的方案</li>
<li>  一种方法就是动态跟静态文件混合在一起发布， 通过 nginx 配置来分开</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none"># 所有静态请求都由nginx处理，存放目录为 html
location ~ \.(gif|jpg|jpeg|png|bmp|swf|css|js)$ &#123;
    root    &#x2F;usr&#x2F;local&#x2F;resource;
    expires     10h; # 设置过期时间为10小时
&#125;

# 所有动态请求都转发给 tomcat 处理
location ~ \.(jsp|do)$ &#123;
    proxy_pass  127.0.0.1:8888;
&#125;</code></pre>

<p>注意上面设置了 expires，当 nginx 设置了 expires 后，例如设置为：expires 10d; 那么，所在的 location 或 if 的内容，用户在 10 天内请求的时候，都只会访问浏览器中的缓存，而不会去请求 nginx 。</p>
<h1 id="请求限制"><a href="#请求限制" class="headerlink" title="请求限制"></a>请求限制</h1><p>对于大流量恶意的访问，会造成带宽的浪费，给服务器增加压力。可以通过 nginx 对于同一 IP 的连接数以及并发数进行限制。合理的控制还可以用来防止 DDos 和 CC 攻击。</p>
<p>关于请求限制主要使用 nginx 默认集成的 2 个模块：</p>
<ul>
<li>  limit_conn_module 连接频率限制模块</li>
<li>  limit_req_module 请求频率限制模块</li>
</ul>
<p>涉及到的配置主要是：</p>
<ul>
<li>  limit_req_zone 限制请求数</li>
<li>  limit_conn_zone 限制并发连接数</li>
</ul>
<p><strong>通过 limit_req_zone 限制请求数</strong></p>
<pre class="line-numbers language-none"><code class="language-none">http&#123;    limit_conn_zone $binary_remote_addrzone&#x3D;limit:10m; &#x2F;&#x2F; 设置共享内存空间大    server&#123;     location &#x2F;&#123;            limit_conn addr 5; # 同一用户地址同一时间只允许有5个连接。        &#125;    &#125;&#125;</code></pre>

<p>如果共享内存空间被耗尽，服务器将会对后续所有的请求返回 503 (Service Temporarily Unavailable) 错误。</p>
<p>当多个 limit_conn_zone 指令被配置时，所有的连接数限制都会生效。比如，下面配置不仅会限制单一 IP 来源的连接数，同时也会限制单一虚拟服务器的总连接数：</p>
<pre class="line-numbers language-none"><code class="language-none">limit_conn_zone $binary_remote_addr zone&#x3D;perip:10m;limit_conn_zone $server_name zone&#x3D;perserver:10m;server &#123;    limit_conn perip 10; # 限制每个 ip 连接到服务器的数量    limit_conn perserver 2000; # 限制连接到服务器的总数&#125;</code></pre>

<p><strong>通过 limit_conn_zone 限制并发连接数</strong></p>
<pre class="line-numbers language-none"><code class="language-none">limit_req_zone $binary_remote_addr zone&#x3D;creq:10 mrate&#x3D;10r&#x2F;s;server&#123;    location &#x2F;&#123;        limit_req zone&#x3D;creq burst&#x3D;5;    &#125;&#125;</code></pre>

<p>限制平均每秒不超过一个请求，同时允许超过频率限制的请求数不多于 5 个。 如果不希望超过的请求被延迟，可以用 nodelay 参数, 如：</p>
<p><code>limit_req zone=creq burst=5 nodelay;</code></p>
<p>这里只是简单讲讲，让大家有这个概念，配置的时候可以深入去找找资料。</p>
<h1 id="正向代理"><a href="#正向代理" class="headerlink" title="正向代理"></a>正向代理</h1><p>正向代理，意思是一个位于客户端和原始服务器 (origin server) 之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求并指定目标(原始服务器)，然后代理向原始服务器转交请求并将获得的内容返回给客户端。客户端才能使用正向代理，比如我们使用的 VPN 服务就是正向代理，直观区别（图片来源于 **<a href="https://link.zhihu.com/?target=https://juejin.im/post/6844903793918738440">前端开发者必备的 Nginx 知识</a>**）：</p>
<p><img data-src="https://pic1.zhimg.com/v2-0667d0978874e27df93a00cb29e49018_r.jpg"></p>
<p>配置正向代理：</p>
<pre class="line-numbers language-none"><code class="language-none">resolver 8.8.8.8 # 谷歌的域名解析地址
server &#123;
    resolver_timeout 5s; &#x2F;&#x2F; 设超时时间
    location &#x2F; &#123;
        # 当客户端请求我的时候，我会把请求转发给它
        # $host 要访问的主机名 $request_uri 请求路径
        proxy_pass http:&#x2F;&#x2F;$host$request_uri;
    &#125;
&#125;</code></pre>

<p>正向代理的对象是客户端，服务器端看不到真正的客户端。</p>
<h1 id="图片防盗链"><a href="#图片防盗链" class="headerlink" title="图片防盗链"></a>图片防盗链</h1><pre class="line-numbers language-none"><code class="language-none">server &#123;
    listen       80;
    server_name  *.test;

    # 图片防盗链
    location ~* \.(gif|jpg|jpeg|png|bmp|swf)$ &#123;
        valid_referers none blocked server_names ~\.google\. ~\.baidu\. *.qq.com;  # 只允许本机 IP 外链引用，将百度和谷歌也加入白名单有利于 SEO
        if ($invalid_referer)&#123;
            return 403;
        &#125;
    &#125;
&#125;</code></pre>

<p>以上设置就能防止其它网站利用外链访问我们的图片，有利于节省流量</p>
<h1 id="适配-PC-或移动设备"><a href="#适配-PC-或移动设备" class="headerlink" title="适配 PC 或移动设备"></a>适配 PC 或移动设备</h1><p>根据用户设备不同返回不同样式的站点，以前经常使用的是纯前端的自适应布局，但是复杂的网站并不适合响应式，无论是复杂性和易用性上面还是不如分开编写的好，比如我们常见的淘宝、京东。</p>
<p>根据用户请求的 user-agent 来判断是返回 PC 还是 H5 站点：</p>
<pre class="line-numbers language-none"><code class="language-none">server &#123;
    listen 80;
    server_name test.com;

    location &#x2F; &#123;
     root  &#x2F;usr&#x2F;local&#x2F;app&#x2F;pc; # pc 的 html 路径
        if ($http_user_agent ~* &#39;(Android|webOS|iPhone|iPod|BlackBerry)&#39;) &#123;
            root &#x2F;usr&#x2F;local&#x2F;app&#x2F;mobile; # mobile 的 html 路径
        &#125;
        index index.html;
    &#125;
&#125;</code></pre>

<h1 id="设置二级域名"><a href="#设置二级域名" class="headerlink" title="设置二级域名"></a>设置二级域名</h1><p>新建一个 server 即可：</p>
<pre class="line-numbers language-none"><code class="language-none">server &#123;
    listen 80;
    server_name admin.test.com; &#x2F;&#x2F; 二级域名

    location &#x2F; &#123;
        root  &#x2F;usr&#x2F;local&#x2F;app&#x2F;admin; # 二级域名的 html 路径
        index index.html;
    &#125;
&#125;</code></pre>

<h1 id="配置-HTTPS"><a href="#配置-HTTPS" class="headerlink" title="配置 HTTPS"></a>配置 HTTPS</h1><p>这里我使用的是 certbot 免费证书，但申请一次有效期只有 3 个月（好像可以用 crontab 尝试配置自动续期，我暂时没试过）：</p>
<p>先安装 certbot</p>
<pre class="line-numbers language-none"><code class="language-none">wget https:&#x2F;&#x2F;dl.eff.org&#x2F;certbot-auto
chmod a+x certbot-auto</code></pre>

<p>申请证书（注意：需要把要申请证书的域名先解析到这台服务器上，才能申请）:</p>
<pre class="line-numbers language-none"><code class="language-none">sudo .&#x2F;certbot-auto certonly --standalone --email admin@abc.com -d test.com -d www.test.com</code></pre>

<p>执行上面指令，按提示操作。</p>
<p>Certbot 会启动一个临时服务器来完成验证（会占用 80 端口或 443 端口，因此需要暂时关闭 Web 服务器），然后 Certbot 会把证书以文件的形式保存，包括完整的证书链文件和私钥文件。</p>
<p>文件保存在 /etc/letsencrypt/live/ 下面的域名目录下。</p>
<p>修改 nginx 配置：</p>
<pre class="line-numbers language-none"><code class="language-none">server&#123;
    listen 443 ssl http2; &#x2F;&#x2F; 这里还启用了 http&#x2F;2.0

    ssl_certificate &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;test.com&#x2F;fullchain.pem; # 证书文件地址
    ssl_certificate_key &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;test.com&#x2F;privkey.pem; # 私钥文件地址

    server_name test.com www.test.com; &#x2F;&#x2F; 证书绑定的域名
&#125;</code></pre>

<h1 id="配置-HTTP-转-HTTPS"><a href="#配置-HTTP-转-HTTPS" class="headerlink" title="配置 HTTP 转 HTTPS"></a>配置 HTTP 转 HTTPS</h1><pre class="line-numbers language-none"><code class="language-none">server &#123;
    listen      80;
    server_name test.com www.test.com;

    # 单域名重定向
    if ($host &#x3D; &#39;www.sherlocked93.club&#39;)&#123;
        return 301 https:&#x2F;&#x2F;www.sherlocked93.club$request_uri;
    &#125;

    # 全局非 https 协议时重定向
    if ($scheme !&#x3D; &#39;https&#39;) &#123;
        return 301 https:&#x2F;&#x2F;$server_name$request_uri;
    &#125;

    # 或者全部重定向
    return 301 https:&#x2F;&#x2F;$server_name$request_uri;
&#125;</code></pre>

<p>以上配置选择自己需要的一条即可，不用全部加。</p>
<h1 id="单页面项目-history-路由配置"><a href="#单页面项目-history-路由配置" class="headerlink" title="单页面项目 history 路由配置"></a>单页面项目 history 路由配置</h1><pre class="line-numbers language-none"><code class="language-none">server &#123;
    listen       80;
    server_name  fe.sherlocked93.club;

    location &#x2F; &#123;
        root       &#x2F;usr&#x2F;local&#x2F;app&#x2F;dist;  # vue 打包后的文件夹
        index      index.html index.htm;
        try_files  $uri $uri&#x2F; &#x2F;index.html @rewrites; # 默认目录下的 index.html，如果都不存在则重定向

        expires -1;                          # 首页一般没有强制缓存
        add_header Cache-Control no-cache;
    &#125;

    location @rewrites &#123; &#x2F;&#x2F; 重定向设置
        rewrite ^(.+)$ &#x2F;index.html break;
    &#125;
&#125;</code></pre>

<p><strong><a href="https://link.zhihu.com/?target=https://router.vuejs.org/zh/guide/essentials/history-mode.html%23%25E5%2590%258E%25E7%25AB%25AF%25E9%2585%258D%25E7%25BD%25AE%25E4%25BE%258B%25E5%25AD%2590">vue-router</a></strong> 官网只有一句话 <code>try_files $uri $uri/ /index.html;</code>，而上面做了一些重定向处理。</p>
<h1 id="配置高可用集群（双机热备）"><a href="#配置高可用集群（双机热备）" class="headerlink" title="配置高可用集群（双机热备）"></a>配置高可用集群（双机热备）</h1><p>当主 nginx 服务器宕机之后，切换到备份的 nginx 服务器</p>
<p>首先安装 keepalived:</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">yum install keepalived -y</code></pre>

<p>然后编辑 <code>/etc/keepalived/keepalived.conf</code> 配置文件，并在配置文件中增加 <code>vrrp_script</code> 定义一个外围检测机制，并在 <code>vrrp_instance</code> 中通过定义 <code>track_script</code> 来追踪脚本执行过程，实现节点转移：</p>
<pre class="line-numbers language-none"><code class="language-none">global_defs&#123;
   notification_email &#123;
        cchroot@gmail.com
   &#125;
   notification_email_from test@firewall.loc
   smtp_server 127.0.0.1
   smtp_connect_timeout 30 &#x2F;&#x2F; 上面都是邮件配置
   router_id LVS_DEVEL     &#x2F;&#x2F; 当前服务器名字，用 hostname 命令来查看
&#125;
vrrp_script chk_maintainace &#123; &#x2F;&#x2F; 检测机制的脚本名称为chk_maintainace
    script &quot;[[ -e&#x2F;etc&#x2F;keepalived&#x2F;down ]] &amp;&amp; exit 1 || exit 0&quot; &#x2F;&#x2F; 可以是脚本路径或脚本命令
    &#x2F;&#x2F; script &quot;&#x2F;etc&#x2F;keepalived&#x2F;nginx_check.sh&quot;    &#x2F;&#x2F; 比如这样的脚本路径
    interval 2  &#x2F;&#x2F; 每隔2秒检测一次
    weight -20  &#x2F;&#x2F; 当脚本执行成立，那么把当前服务器优先级改为-20
&#125;
vrrp_instanceVI_1 &#123;   &#x2F;&#x2F; 每一个vrrp_instance就是定义一个虚拟路由器
    state MASTER      &#x2F;&#x2F; 主机为MASTER，备用机为BACKUP
    interface eth0    &#x2F;&#x2F; 网卡名字，可以从ifconfig中查找
    virtual_router_id 51 &#x2F;&#x2F; 虚拟路由的id号，一般小于255，主备机id需要一样
    priority 100      &#x2F;&#x2F; 优先级，master的优先级比backup的大
    advert_int 1      &#x2F;&#x2F; 默认心跳间隔
    authentication &#123;  &#x2F;&#x2F; 认证机制
        auth_type PASS
        auth_pass 1111   &#x2F;&#x2F; 密码
    &#125;
    virtual_ipaddress &#123;  &#x2F;&#x2F; 虚拟地址vip
       172.16.2.8
    &#125;
&#125;</code></pre>

<p>其中检测脚本 <code>nginx_check.sh</code>，这里提供一个：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">#!&#x2F;bin&#x2F;bash
A&#x3D;&#96;ps -C nginx --no-header | wc -l&#96;
if [ $A -eq 0 ];then
    &#x2F;usr&#x2F;sbin&#x2F;nginx # 尝试重新启动nginx
    sleep 2         # 睡眠2秒
    if [ &#96;ps -C nginx --no-header | wc -l&#96; -eq 0 ];then
        killall keepalived # 启动失败，将keepalived服务杀死。将vip漂移到其它备份节点
    fi
fi</code></pre>

<p>复制一份到备份服务器，备份 nginx 的配置要将 <code>state</code> 后改为 <code>BACKUP</code>，<code>priority</code> 改为比主机小。 设置完毕后各自 <code>service keepalived start</code> 启动，经过访问成功之后，可以把 Master 机的 keepalived 停掉，此时 Master 机就不再是主机了 <code>service keepalived stop</code>，看访问虚拟 IP 时是否能够自动切换到备机 ip addr。</p>
<p>再次启动 Master 的 keepalived，此时 vip 又变到了主机上。</p>
<p>配置高可用集群的内容来源于：**<a href="https://link.zhihu.com/?target=https://juejin.im/post/6844904144235413512%23heading-11">Nginx 从入门到实践，万字详解！</a>**</p>
<h1 id="其它功能和技巧"><a href="#其它功能和技巧" class="headerlink" title="其它功能和技巧"></a>其它功能和技巧</h1><h1 id="代理缓存"><a href="#代理缓存" class="headerlink" title="代理缓存"></a>代理缓存</h1><p>nginx 的 http_proxy 模块，提供类似于 Squid 的缓存功能，使用 proxy_cache_path 来配置。</p>
<p>nginx 可以对访问过的内容在 nginx 服务器本地建立副本，这样在一段时间内再次访问该数据，就不需要通过 nginx 服务器再次向后端服务器发出请求，减小数据传输延迟，提高访问速度：</p>
<pre class="line-numbers language-none"><code class="language-none">proxy_cache_path usr&#x2F;local&#x2F;cache levels&#x3D;1:2 keys_zone&#x3D;my_cache:10m;

server &#123;
  listen       80;
  server_name  test.com;

  location &#x2F; &#123;
      proxy_cache my_cache;
      proxy_pass http:&#x2F;&#x2F;127.0.0.1:8888;
      proxy_set_header Host $host;
  &#125;
&#125;</code></pre>

<p>上面的配置表示： nginx 提供一块 10 M 的内存用于缓存，名字为 my_cache, levels 等级为 1:2，缓存存放的路径为 <code>usr/local/cache</code>。</p>
<h1 id="访问日志"><a href="#访问日志" class="headerlink" title="访问日志"></a>访问日志</h1><p>访问日志默认是注释的状态，需要可以打开和进行更详细的配置，一下是 nginx 的默认配置：</p>
<pre class="line-numbers language-none"><code class="language-none">http &#123;
    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;
                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;
                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;

    access_log  logs&#x2F;access.log  main;
&#125;</code></pre>

<h1 id="错误日志"><a href="#错误日志" class="headerlink" title="错误日志"></a>错误日志</h1><p>错误日志放在 main 全局区块中，童鞋们打开 nginx.conf 就可以看见在配置文件中和下面一样的代码了：</p>
<pre class="line-numbers language-none"><code class="language-none">#error_log  logs&#x2F;error.log;
#error_log  logs&#x2F;error.log  notice;
#error_log  logs&#x2F;error.log  info;</code></pre>

<p>nginx 错误日志默认配置为：</p>
<p><code>error_log logs/error.log error;</code></p>
<h1 id="静态资源服务器"><a href="#静态资源服务器" class="headerlink" title="静态资源服务器"></a>静态资源服务器</h1><pre class="line-numbers language-none"><code class="language-none">server &#123;
    listen       80;
    server_name  static.bin;
    charset utf-8;    # 防止中文文件名乱码

    location &#x2F;download &#123;
        alias           &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;static;  # 静态资源目录

        autoindex               on;    # 开启静态资源列目录，浏览目录权限
        autoindex_exact_size    off;   # on(默认)显示文件的确切大小，单位是byte；off显示文件大概大小，单位KB、MB、GB
        autoindex_localtime     off;   # off(默认)时显示的文件时间为GMT时间；on显示的文件时间为服务器时间
    &#125;
&#125;</code></pre>

<h1 id="禁止指定-user-agent"><a href="#禁止指定-user-agent" class="headerlink" title="禁止指定 user_agent"></a>禁止指定 user_agent</h1><p>nginx 可以禁止指定的浏览器和爬虫框架访问：</p>
<pre class="line-numbers language-none"><code class="language-none"># http_user_agent 为浏览器标识
# 禁止 user_agent 为baidu、360和sohu，~*表示不区分大小写匹配
if ($http_user_agent ~* &#39;baidu|360|sohu&#39;) &#123;
    return 404;
&#125;

# 禁止 Scrapy 等工具的抓取
if ($http_user_agent ~* (Scrapy|Curl|HttpClient)) &#123;
    return 403;</code></pre>

<h1 id="请求过滤"><a href="#请求过滤" class="headerlink" title="请求过滤"></a>请求过滤</h1><p><strong>根据请求类型过滤</strong></p>
<pre class="line-numbers language-none"><code class="language-none"># 非指定请求全返回 403
if ( $request_method !~ ^(GET|POST|HEAD)$ ) &#123;
    return 403;
&#125;</code></pre>

<p><strong>根据状态码过滤</strong></p>
<pre class="line-numbers language-none"><code class="language-none">error_page 502 503 &#x2F;50x.html;
location &#x3D; &#x2F;50x.html &#123;
    root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;
&#125;</code></pre>

<p>这样实际上是一个内部跳转，当访问出现 502、503 的时候就能返回 50x.html 中的内容，这里需要注意是否可以找到 50x.html 页面，所以加了个 location 保证找到你自定义的 50x 页面。</p>
<p><strong>根据 URL 名称过滤</strong></p>
<pre class="line-numbers language-none"><code class="language-none">if ($host &#x3D; zy.com&#39; ) &#123;     #其中 $1是取自regex部分()里的内容,匹配成功后跳转到的URL。     rewrite ^&#x2F;(.*)$  http:&#x2F;&#x2F;www.zy.com&#x2F;$1  permanent；&#125;location &#x2F;test &#123;    &#x2F;&#x2F; &#x2F;test 全部重定向到首页    rewrite  ^(.*)$ &#x2F;index.html  redirect;&#125;</code></pre>

<h1 id="ab-命令"><a href="#ab-命令" class="headerlink" title="ab 命令"></a>ab 命令</h1><p>ab 命令全称为：Apache bench，是 Apache 自带的压力测试工具，也可以测试 Nginx、IIS 等其他 Web 服务器:</p>
<ul>
<li>  -n 总共的请求数</li>
<li>  -c 并发的请求数</li>
<li>  -t 测试所进行的最大秒数，默认值 为 50000</li>
<li>  -p 包含了需要的 POST 的数据文件</li>
<li>  -T POST 数据所使用的 Content-type 头信息</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">ab -n 1000 -c 5000 http:&#x2F;&#x2F;127.0.0.1&#x2F; # 每次发送1000并发的请求数，请求数总数为5000。</code></pre>

<p>测试前需要安装 httpd-tools： <code>yum install httpd-tools</code></p>
<h1 id="泛域名路径分离"><a href="#泛域名路径分离" class="headerlink" title="泛域名路径分离"></a>泛域名路径分离</h1><p>这是一个非常实用的技能，经常有时候我们可能需要配置一些二级或者三级域名，希望通过 nginx 自动指向对应目录，比如：</p>
<ol>
<li> test1.doc.test.club 自动指向 /usr/local/html/doc/test1 服务器地址；</li>
<li> test2.doc.test.club 自动指向 /usr/local/html/doc/test2 服务器地址；</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">server &#123;    listen       80;    server_name  ~^([\w-]+)\.doc\.test\.club$;    root &#x2F;usr&#x2F;local&#x2F;html&#x2F;doc&#x2F;$1;&#125;</code></pre>

<h1 id="泛域名转发"><a href="#泛域名转发" class="headerlink" title="泛域名转发"></a>泛域名转发</h1><p>和之前的功能类似，有时候我们希望把二级或者三级域名链接重写到我们希望的路径，让后端就可以根据路由解析不同的规则：</p>
<ol>
<li> test1.serv.test.club/api?name=a 自动转发到 127.0.0.1:8080/test1/api?name=a</li>
<li> test2.serv.test.club/api?name=a 自动转发到 127.0.0.1:8080/test2/api?name=a</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">server &#123;    listen       80;    server_name ~^([\w-]+)\.serv\.test\.club$;    location &#x2F; &#123;        proxy_set_header        X-Real-IP $remote_addr;        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_set_header        Host $http_host;        proxy_set_header        X-NginX-Proxy true;        proxy_pass              http:&#x2F;&#x2F;127.0.0.1:8080&#x2F;$1$request_uri;    &#125;&#125;</code></pre>

<h1 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h1><h1 id="nginx-中怎么设置变量"><a href="#nginx-中怎么设置变量" class="headerlink" title="nginx 中怎么设置变量"></a>nginx 中怎么设置变量</h1><p>或许你不知道，nginx 的配置文件使用的是一门微型的编程语言。既然是编程语言，一般也就少不了 “变量” 这种东西，但是在 nginx 配置中，变量只能存放一种类型的值，因为也只存在一种类型的值，那就是字符串。</p>
<p>例如我们在 nginx.conf 中有这样一行配置：</p>
<pre class="line-numbers language-none"><code class="language-none">set $name &quot;chroot&quot;;</code></pre>

<p>上面使用了 set 配置指令对变量 <code>$name</code>进行了赋值操作，把 &quot;chroot&quot; 赋值给了 <code>$name</code>。nginx 变量名前面有一个 <code>$</code> 符号，这是记法上的要求。所有的 Nginx 变量在 Nginx 配置文件中引用时都须带上 <code>$</code> 前缀。这种表示方法和 Perl、PHP 这些语言是相似的。</p>
<p>这种表示方法的用处在哪里呢，那就是可以直接把变量嵌入到字符串常量中以构造出新的字符串，例如你需要进行一个字符串拼接：</p>
<pre class="line-numbers language-none"><code class="language-none">server &#123;
  listen       80;
  server_name  test.com;

  location &#x2F; &#123;
     set $temp hello;
     return &quot;$temp world&quot;;
  &#125;
&#125;</code></pre>

<p>以上当匹配成功的时候就会返回字符串 &quot;hello world&quot; 了。需要注意的是，当引用的变量名之后紧跟着变量名的构成字符时（比如后跟字母、数字以及下划线），我们就需要使用特别的记法来消除歧义，例如：</p>
<pre class="line-numbers language-none"><code class="language-none">server &#123;
  listen       80;
  server_name  test.com;

  location &#x2F; &#123;
     set $temp &quot;hello &quot;;
     return &quot;$&#123;temp&#125;world&quot;;
  &#125;
&#125;</code></pre>

<p>这里，我们在配置指令的参数值中引用变量 <code>$temp</code> 的时候，后面紧跟着 <code>world</code> 这个单词，所以如果直接写作 <code>&quot;$tempworld&quot;</code> 则 nginx 的计算引擎会将之识别为引用了变量 <code>$tempworld</code>. 为了解决这个问题，nginx 的字符串支持使用花括号在 <code>$</code> 之后把变量名围起来，比如这里的 <code>$&#123;temp&#125;</code>，所以 上面这个例子返回的还是 &quot;hello world&quot;：</p>
<pre class="line-numbers language-none"><code class="language-none">$ curl &#39;http:&#x2F;&#x2F;test.com&#x2F;&#39;
    hello world</code></pre>

<p>还需要注意的是，若是想输出 <code>$</code> 符号本身，可以这样做：</p>
<pre class="line-numbers language-none"><code class="language-none">geo $dollar &#123;
    default &quot;$&quot;;
&#125;
server &#123;
    listen       80;
    server_name  test.com;

    location &#x2F; &#123;
        set $temp &quot;hello &quot;;
        return &quot;$&#123;temp&#125;world: $dollar&quot;;
    &#125;
&#125;</code></pre>

<p>上面用到了标准模块 ngx_geo 提供的配置指令 geo 来为变量 <code>$dollar</code> 赋予字符串 <code>&quot;$&quot;</code> ，这样，这里的返回值就是 &quot;hello world: $&quot; 了。</p>
<h1 id="附-nginx-内置预定义变量"><a href="#附-nginx-内置预定义变量" class="headerlink" title="附 nginx 内置预定义变量"></a>附 nginx 内置预定义变量</h1><p>按字母顺序，变量名与对应定义：</p>
<ul>
<li>  <code>$arg_PARAMETER</code> #GET 请求中变量名 PARAMETER 参数的值</li>
<li>  <code>$args</code> #这个变量等于 GET 请求中的参数，例如，foo=123&amp;bar=blahblah; 这个变量可以被修改</li>
<li>  <code>$binary_remote_addr</code> #二进制码形式的客户端地址</li>
<li>  <code>$body_bytes_sent</code> #传送页面的字节数</li>
<li>  <code>$content_length</code> #请求头中的 Content-length 字段</li>
<li>  <code>$content_type</code> #请求头中的 Content-Type 字段</li>
<li>  <code>$cookie_COOKIE</code> #cookie COOKIE 的值</li>
<li>  <code>$document_root</code> #当前请求在 root 指令中指定的值</li>
<li>  <code>$document_uri</code> #与 $uri 相同</li>
<li>  <code>$host</code> #请求中的主机头 (Host) 字段，如果请求中的主机头不可用或者空，则为处理请求的 server 名称(处理请求的 server 的 server_name 指令的值)。值为小写，不包含端口</li>
<li>  <code>$hostname</code> #机器名使用 gethostname 系统调用的值</li>
<li>  <code>$http_HEADER</code> #HTTP 请求头中的内容，HEADER 为 HTTP 请求中的内容转为小写，- 变为_(破折号变为下划线)，例如：$http_user_agent(Uaer-Agent 的值)</li>
<li>  <code>$sent_http_HEADER</code> #HTTP 响应头中的内容，HEADER 为 HTTP 响应中的内容转为小写，- 变为_(破折号变为下划线)，例如：<img data-src="https://www.zhihu.com/equation?tex=sent_http_cache_control%E3%80%81">sent_http_content_type…</li>
<li>  <code>$is_args</code> #如果 $args 设置，值为 &quot;?&quot;，否则为 &quot;&quot;</li>
<li>  <code>$limit_rate</code> #这个变量可以限制连接速率</li>
<li>  <code>$nginx_version</code> #当前运行的 nginx 版本号</li>
<li>  <code>$query_string</code> #与 $args 相同</li>
<li>  <code>$remote_addr</code> #客户端的 IP 地址</li>
<li>  <code>$remote_port</code> #客户端的端口</li>
<li>  <code>$remote_port</code> #已经经过 Auth Basic Module 验证的用户名</li>
<li>  <code>$request_filename</code> #当前连接请求的文件路径，由 root 或 alias 指令与 URI 请求生成</li>
<li>  <code>$request_body</code> #这个变量（0.7.58+）包含请求的主要信息。在使用 proxy_pass 或 fastcgi_pass 指令的 location 中比较有意义</li>
<li>  <code>$request_body_file</code> #客户端请求主体信息的临时文件名</li>
<li>  <code>$request_completion</code> #如果请求成功，设为 &quot;OK&quot;；如果请求未完成或者不是一系列请求中最后一部分则设为空</li>
<li>  <code>$request_method</code> #这个变量是客户端请求的动作，通常为 GET 或 POST。包括 0.8.20 及之前的版本中，这个变量总为 main request 中的动作，如果当前请求是一个子请求，并不使用这个当前请求的动作</li>
<li>  <code>$request_uri</code> #这个变量等于包含一些客户端请求参数的原始 URI，它无法修改，请查看 $uri 更改或重写 URI</li>
<li>  <code>$scheme</code> #所用的协议，例如 http 或者是 https，例如 <code>rewrite ^(.+)$$scheme://example.com$1 redirect</code></li>
<li>  <code>$server_addr</code> #服务器地址，在完成一次系统调用后可以确定这个值，如果要绕开系统调用，则必须在 listen 中指定地址并且使用 bind 参数</li>
<li>  <code>$server_name</code> #服务器名称</li>
<li>  <code>$server_port</code> #请求到达服务器的端口号</li>
<li>  <code>$server_protocol</code> #请求使用的协议，通常是 HTTP/1.0、HTTP/1.1 或 HTTP/2</li>
<li>  <code>$uri</code> #请求中的当前 URI(不带请求参数，参数位于 args) ， 不 同 于 浏 览 器 传 递 的 args)，不同于浏览器传递的 args)，不同于浏览器传递的 request_uri 的值，它可以通过内部重定向，或者使用 index 指令进行修改。不包括协议和主机名，例如 /foo/bar.html</li>
</ul>
<h1 id="附-nginx-模块"><a href="#附-nginx-模块" class="headerlink" title="附 nginx 模块"></a>附 nginx 模块</h1><h1 id="nginx-模块分类"><a href="#nginx-模块分类" class="headerlink" title="nginx 模块分类"></a>nginx 模块分类</h1><ul>
<li>  核心模块：nginx 最基本最核心的服务，如进程管理、权限控制、日志记录；</li>
<li>  标准 HTTP 模块：nginx 服务器的标准 HTTP 功能；</li>
<li>  可选 HTTP 模块：处理特殊的 HTTP 请求</li>
<li>  邮件服务模块：邮件服务</li>
<li>  第三方模块：作为扩展，完成特殊功能</li>
</ul>
<h1 id="模块清单"><a href="#模块清单" class="headerlink" title="模块清单"></a>模块清单</h1><p><strong>核心模块</strong>：</p>
<ul>
<li>  ngx_core</li>
<li>  ngx_errlog</li>
<li>  ngx_conf</li>
<li>  ngx_events</li>
<li>  ngx_event_core</li>
<li>  ngx_epll</li>
<li>  ngx_regex</li>
</ul>
<p><strong>标准 HTTP 模块</strong>：</p>
<ul>
<li>  ngx_http</li>
<li>  ngx_http_core #配置端口，URI 分析，服务器相应错误处理，别名控制 (alias) 等</li>
<li>  ngx_http_log #自定义 access 日志</li>
<li>  ngx_http_upstream #定义一组服务器，可以接受来自 proxy, Fastcgi,Memcache 的重定向；主要用作负载均衡</li>
<li>  ngx_http_static</li>
<li>  ngx_http_autoindex #自动生成目录列表</li>
<li>  ngx_http_index #处理以 / 结尾的请求，如果没有找到 index 页，则看是否开启了 random_index；如开启，则用之，否则用 autoindex</li>
<li>  ngx_http_auth_basic #基于 http 的身份认证 (auth_basic)</li>
<li>  ngx_http_access #基于 IP 地址的访问控制 (deny,allow)</li>
<li>  ngx_http_limit_conn #限制来自客户端的连接的响应和处理速率</li>
<li>  ngx_http_limit_req #限制来自客户端的请求的响应和处理速率</li>
<li>  ngx_http_geo</li>
<li>  ngx_http_map #创建任意的键值对变量</li>
<li>  ngx_http_split_clients</li>
<li>  ngx_http_referer #过滤 HTTP 头中 Referer 为空的对象</li>
<li>  ngx_http_rewrite #通过正则表达式重定向请求</li>
<li>  ngx_http_proxy</li>
<li>  ngx_http_fastcgi #支持 fastcgi</li>
<li>  ngx_http_uwsgi</li>
<li>  ngx_http_scgi</li>
<li>  ngx_http_memcached</li>
<li>  ngx_http_empty_gif #从内存创建一个 1×1 的透明 gif 图片，可以快速调用</li>
<li>  ngx_http_browser #解析 http 请求头部的 User-Agent 值</li>
<li>  ngx_http_charset #指定网页编码</li>
<li>  ngx_http_upstream_ip_hash</li>
<li>  ngx_http_upstream_least_conn</li>
<li>  ngx_http_upstream_keepalive</li>
<li>  ngx_http_write_filter</li>
<li>  ngx_http_header_filter</li>
<li>  ngx_http_chunked_filter</li>
<li>  ngx_http_range_header</li>
<li>  ngx_http_gzip_filter</li>
<li>  ngx_http_postpone_filter</li>
<li>  ngx_http_ssi_filter</li>
<li>  ngx_http_charset_filter</li>
<li>  ngx_http_userid_filter</li>
<li>  ngx_http_headers_filter #设置 http 响应头</li>
<li>  ngx_http_copy_filter</li>
<li>  ngx_http_range_body_filter</li>
<li>  ngx_http_not_modified_filter</li>
</ul>
<p><strong>可选 HTTP 模块</strong>:</p>
<ul>
<li>  ngx_http_addition #在响应请求的页面开始或者结尾添加文本信息</li>
<li>  ngx_http_degradation #在低内存的情况下允许服务器返回 444 或者 204 错误</li>
<li>  ngx_http_perl</li>
<li>  ngx_http_flv #支持将 Flash 多媒体信息按照流文件传输，可以根据客户端指定的开始位置返回 Flash</li>
<li>  ngx_http_geoip #支持解析基于 GeoIP 数据库的客户端请求</li>
<li>  ngx_google_perftools</li>
<li>  ngx_http_gzip #gzip 压缩请求的响应</li>
<li>  ngx_http_gzip_static #搜索并使用预压缩的以. gz 为后缀的文件代替一般文件响应客户端请求</li>
<li>  ngx_http_image_filter #支持改变 png，jpeg，gif 图片的尺寸和旋转方向</li>
<li>  ngx_http_mp4 #支持. mp4,.m4v,.m4a 等多媒体信息按照流文件传输，常与 ngx_http_flv 一起使用</li>
<li>  ngx_http_random_index #当收到 / 结尾的请求时，在指定目录下随机选择一个文件作为 index</li>
<li>  ngx_http_secure_link #支持对请求链接的有效性检查</li>
<li>  ngx_http_ssl #支持 https</li>
<li>  ngx_http_stub_status</li>
<li>  ngx_http_sub_module #使用指定的字符串替换响应中的信息</li>
<li>  ngx_http_dav #支持 HTTP 和 WebDAV 协议中的 PUT/DELETE/MKCOL/COPY/MOVE 方法</li>
<li>  ngx_http_xslt #将 XML 响应信息使用 XSLT 进行转换</li>
</ul>
<p><strong>邮件服务模块</strong>:</p>
<ul>
<li>  ngx_mail_core</li>
<li>  ngx_mail_pop3</li>
<li>  ngx_mail_imap</li>
<li>  ngx_mail_smtp</li>
<li>  ngx_mail_auth_http</li>
<li>  ngx_mail_proxy</li>
<li>  ngx_mail_ssl</li>
</ul>
<p><strong>第三方模块</strong>：</p>
<ul>
<li>  echo-nginx-module #支持在 nginx 配置文件中使用 echo/sleep/time/exec 等类 Shell 命令</li>
<li>  memc-nginx-module</li>
<li>  rds-json-nginx-module #使 nginx 支持 json 数据的处理</li>
<li>  lua-nginx-module</li>
</ul>
<p>感谢阅读~</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xiaojianzheng.cn/2021/07/06/TransactionUtil-java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JIAHE">
      <meta itemprop="description" content="Collection & Reuse">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JIAHE">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/06/TransactionUtil-java/" class="post-title-link" itemprop="url">TransactionUtil-java</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-06 17:47:23" itemprop="dateCreated datePublished" datetime="2021-07-06T17:47:23+08:00">2021-07-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <pre class="line-numbers language-java" data-language="java"><code class="language-java">import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.datasource.DataSourceTransactionManager;
import org.springframework.stereotype.Service;
import org.springframework.transaction.TransactionDefinition;
import org.springframework.transaction.TransactionStatus;
import org.springframework.transaction.support.DefaultTransactionDefinition;
import org.springframework.transaction.support.TransactionSynchronizationAdapter;
import org.springframework.transaction.support.TransactionSynchronizationManager;

import java.util.concurrent.Callable;

@Service
public class TransactionUtil &#123;

    private static Logger log &#x3D; LoggerFactory.getLogger(TransactionUtil.class);

    @Autowired
    private DataSourceTransactionManager dataSourceTransactionManager;

    public &lt;T&gt; T doTransaction(Callable&lt;T&gt; job, Runnable rollback) &#123;
        DefaultTransactionDefinition def &#x3D; new DefaultTransactionDefinition();
        def.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRED);
        TransactionStatus status &#x3D; dataSourceTransactionManager.getTransaction(def);
        try &#123;
            T t &#x3D; job.call();
            dataSourceTransactionManager.commit(status);
            return t;
        &#125; catch (Exception e) &#123;
            dataSourceTransactionManager.rollback(status);
            if (rollback !&#x3D; null) &#123;
                rollback.run();
            &#125;
            log.error(e.getMessage(), e);
            throw new RuntimeException(e);
        &#125;
    &#125;

    public &lt;T&gt; T doTransaction(Callable&lt;T&gt; job) &#123;
        return doTransaction(job, null);
    &#125;

    &#x2F;**
    * 开启事务(PROPAGATION_REQUIRED)
    *&#x2F;
    public TransactionStatus begin() &#123;
        return getTransactionStatus(TransactionDefinition.PROPAGATION_REQUIRED);
    &#125;

    &#x2F;**
    * 开启事务(PROPAGATION_REQUIRES_NEW)
    *&#x2F;
    public TransactionStatus beginNew() &#123;
        return getTransactionStatus(TransactionDefinition.PROPAGATION_REQUIRES_NEW);
    &#125;

    &#x2F;**
    * 事务提交
    *&#x2F;
    public void commit(TransactionStatus status) &#123;
        dataSourceTransactionManager.commit(status);
    &#125;

    &#x2F;**
    * 事务回滚
    *&#x2F;
    public void rollback(TransactionStatus status) &#123;
        dataSourceTransactionManager.rollback(status);
    &#125;

    private TransactionStatus getTransactionStatus(int propagationRequiresNew) &#123;
        DefaultTransactionDefinition def &#x3D; new DefaultTransactionDefinition();
        def.setPropagationBehavior(propagationRequiresNew);
        TransactionStatus status &#x3D; dataSourceTransactionManager.getTransaction(def);
        return status;
    &#125;

    &#x2F;**
    * 判断当前线程是否处于事物中，是就等事物提交后再执行，否则直接执行
    * @param runnable 线程任务
    *&#x2F;
    public static void executeAfterCommit(Runnable runnable) &#123;
        if (TransactionSynchronizationManager.isActualTransactionActive()) &#123;
            TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() &#123;
                @Override
                public void afterCommit() &#123;
                    runnable.run();
                &#125;
            &#125;);
        &#125;else&#123;
            runnable.run();
        &#125;
    &#125;

&#125;</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xiaojianzheng.cn/2021/07/06/HttpUtil-java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JIAHE">
      <meta itemprop="description" content="Collection & Reuse">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JIAHE">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/06/HttpUtil-java/" class="post-title-link" itemprop="url">HttpUtil-java</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-06 16:24:24" itemprop="dateCreated datePublished" datetime="2021-07-06T16:24:24+08:00">2021-07-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <pre class="line-numbers language-java" data-language="java"><code class="language-java">import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;
import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

&#x2F;**
 * 简易的 HTTP 请求类
 *&#x2F;
public class HttpUtil &#123;

    private static final Logger log &#x3D; LoggerFactory.getLogger(HttpUtil.class);

    private static final int API_TIMEOUT &#x3D; 180000;

    private static final String POST &#x3D; &quot;POST&quot;;

    private static final String GET &#x3D; &quot;GET&quot;;

    private static String defaultEncoding &#x3D; &quot;utf-8&quot;;

    &#x2F;**
     * http post 请求.请求参数自由组织
     *
     * @param url 地址
     * @param data 请求参数，请求参数可以是 name1&#x3D;value1&amp;name2&#x3D;value2 的形式，也可以是xml、json等其他格式
     * @param charset 字符编码
     * @return
     *&#x2F;
    public static String post(String url, String data, String charset) &#123;
        return httpAccessJDK(url, data, charset, POST);
    &#125;

    &#x2F;**
     * http post 请求
     *
     * @param url 地址
     * @param params 请求参数键值对
     * @param charset 编码
     * @return 以字符串形式返回
     *&#x2F;
    public static String post(String url, Map&lt;String, String&gt; params, String charset) &#123;
        String paramStr &#x3D; getHttpRequestParams(url, params, charset);
        return httpAccessJDK(url, paramStr, charset, POST);
    &#125;

    &#x2F;**
     * http post 请求.默认编码（utf-8)
     *
     * @param url 地址
     * @param params 请求参数键值对
     * @return 以字符串形式返回
     *&#x2F;
    public static String post(String url, Map&lt;String, String&gt; params) &#123;
        String paramStr &#x3D; getHttpRequestParams(url, params, defaultEncoding);
        return httpAccessJDK(url, paramStr, defaultEncoding, POST);
    &#125;

    &#x2F;**
     * http post 请求
     *
     * @param url 地址
     * @param charset 编码
     * @return 以字符串形式返回
     *&#x2F;
    public static String post(String url, String charset) &#123;
        return httpAccessJDK(url, null, charset, POST);
    &#125;

    &#x2F;**
     * http post 请求.默认编码（utf-8)
     *
     * @param url 地址
     * @return 以字符串形式返回
     *&#x2F;
    public static String post(String url) &#123;
        return httpAccessJDK(url, null, defaultEncoding, POST);
    &#125;

    &#x2F;**
     * http get 请求
     *
     * @param url 地址（可带参数）
     * @param params 请求参数键值对
     * @param charset 编码
     * @return 以字符串形式返回
     *&#x2F;
    public static String get(String url, Map&lt;String, String&gt; params, String charset) &#123;
        String paramStr &#x3D; getHttpRequestParams(url, params, charset);
        return httpAccessJDK(url, paramStr, charset, GET);
    &#125;

    &#x2F;**
     * http get 请求.默认编码（utf-8)
     *
     * @param url 地址（可带参数）
     * @param params 请求参数键值对
     * @return 以字符串形式返回
     *&#x2F;
    public static String get(String url, Map&lt;String, String&gt; params) &#123;
        String paramStr &#x3D; getHttpRequestParams(url, params, defaultEncoding);
        return httpAccessJDK(url, paramStr, defaultEncoding, GET);
    &#125;

    &#x2F;**
     * http get 请求
     *
     * @param url 地址
     * @param charset 编码
     * @return 以字符串形式返回
     *&#x2F;
    public static String get(String url, String charset) &#123;
        return httpAccessJDK(url, null, charset, GET);
    &#125;

    &#x2F;**
     * http get 请求.默认编码（utf-8)
     *
     * @param url 地址
     * @return 以字符串形式返回
     *&#x2F;
    public static String get(String url) &#123;
        return httpAccessJDK(url, null, defaultEncoding, GET);
    &#125;

    &#x2F;**
     * 生成参数
     *
     * @param url
     * @param params
     * @param charset
     * @return
     *&#x2F;
    public static String getHttpRequestParams(String url, Map&lt;String, String&gt; params, String charset) &#123;
        if (params &#x3D;&#x3D; null || params.size() &#x3D;&#x3D; 0) &#123;
            return null;
        &#125;
        StringBuilder paramSb &#x3D; new StringBuilder();
        if (charset &#x3D;&#x3D; null) &#123;
            charset &#x3D; defaultEncoding;
        &#125;
        try &#123;
            int i &#x3D; 0, len &#x3D; params !&#x3D; null ? params.size() : 0;
            for (Map.Entry&lt;String, String&gt; entry : params.entrySet()) &#123;
                if (entry.getKey() &#x3D;&#x3D; null || entry.getValue() &#x3D;&#x3D; null) &#123;
                    i++;
                    continue;
                &#125;
                paramSb.append(URLEncoder.encode(entry.getKey(), charset)).append(&quot;&#x3D;&quot;).append(URLEncoder.encode(entry.getValue(), charset));
                if (i !&#x3D; len - 1) &#123;
                    paramSb.append(&quot;&amp;&quot;);
                &#125;
                i++;
            &#125;
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
            throw new RuntimeException(e);
        &#125;
        return paramSb.toString();
    &#125;

    &#x2F;**
     * 请求
     *
     * @param url 地址
     * @param data 请求参数，请求参数应该是 name1&#x3D;value1&amp;name2&#x3D;value2 的形式。
     * @param charset 字符编码
     * @param method
     * @return
     *&#x2F;
    private static String httpAccessJDK(String url, String data, String charset, String method) &#123;
        if (method &#x3D;&#x3D; null) &#123;
            method &#x3D; GET;
        &#125;
        if (charset &#x3D;&#x3D; null) &#123;
            charset &#x3D; defaultEncoding;
        &#125;

        StringBuilder content &#x3D; new StringBuilder();
        int sequence &#x3D; -1;

        try &#123;
            if (data !&#x3D; null &amp;&amp; method.equals(GET)) &#123;
                if (url.indexOf(&quot;?&quot;) &#x3D;&#x3D; -1) &#123;
                    url &#x3D; new StringBuilder(url).append(&quot;?&quot;).append(data).toString();
                &#125;
                else &#123;
                    url &#x3D; new StringBuilder(url).append(&quot;&amp;&quot;).append(data).toString();
                &#125;
            &#125;

            if (log.isInfoEnabled()) &#123;
                sequence &#x3D; (int) (Math.random() * 500000);
                log.info(&quot;[http](&quot; + sequence + &quot;) &quot; + method.toLowerCase() + &quot;: &quot; + url);
                if (data !&#x3D; null) &#123;
                    log.info(&quot;[http](&quot; + sequence + &quot;) param: &quot; + (data.length() &gt; 100 ? data.substring(0, 100) + &quot;...&quot; : data));
                &#125;
                else &#123;
                    log.info(&quot;[http](&quot; + sequence + &quot;) param: &quot; + data);
                &#125;

            &#125;

            HttpURLConnection conn &#x3D; null;

            URL getUrl &#x3D; new URL(url);
            conn &#x3D; (HttpURLConnection) getUrl.openConnection();
            conn.setConnectTimeout(API_TIMEOUT);
            conn.setReadTimeout(API_TIMEOUT);

            conn.setDoOutput(true);
            conn.setDoInput(true);
            conn.setRequestMethod(method);
            conn.setUseCaches(false);
            conn.setInstanceFollowRedirects(true);

            conn.connect();
            if (data !&#x3D; null &amp;&amp; method.equals(POST)) &#123;
                byte[] bdata &#x3D; data.getBytes(charset);
                DataOutputStream out &#x3D; new DataOutputStream(conn.getOutputStream());
                out.write(bdata);
                out.flush();
                out.close();
            &#125;

            BufferedReader reader &#x3D; new BufferedReader(new InputStreamReader(conn.getInputStream(), charset));
            String inputLine;

            while ((inputLine &#x3D; reader.readLine()) !&#x3D; null) &#123;
                content.append(inputLine);
            &#125;
            reader.close();
            conn.disconnect();
        &#125; catch (Exception e) &#123;
            &#x2F;&#x2F; log.error(e.getMessage(), e);
            throw new RuntimeException(e);
        &#125;

        String result &#x3D; content.toString();
        if (log.isInfoEnabled()) &#123;
            log.info(&quot;[http](&quot; + sequence + &quot;) response: &quot; + result);
        &#125;

        return result;
    &#125;

&#125;</code></pre>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xiaojianzheng.cn/2021/07/06/UUIDShort-java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JIAHE">
      <meta itemprop="description" content="Collection & Reuse">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JIAHE">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/06/UUIDShort-java/" class="post-title-link" itemprop="url">UUIDShort-java</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-06 16:11:01" itemprop="dateCreated datePublished" datetime="2021-07-06T16:11:01+08:00">2021-07-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <pre class="line-numbers language-java" data-language="java"><code class="language-java">import java.security.SecureRandom;
import java.util.UUID;

&#x2F;**
 * 长度为16的 UUID 字符串生成器， 仿 java.util.UUID 实现，修改内容如下： 将16位byte数组缩短为10位，将16进制字符转换改为32进制转换
 *&#x2F;
public class UUIDShort &#123;

    private static char[] digits &#x3D; &#123; &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;, &#39;h&#39;, &#39;i&#39;, &#39;j&#39;, &#39;k&#39;, &#39;l&#39;, &#39;m&#39;, &#39;n&#39;, &#39;o&#39;, &#39;p&#39;, &#39;q&#39;, &#39;r&#39;, &#39;s&#39;, &#39;t&#39;, &#39;u&#39;, &#39;v&#39;, &#39;w&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39; &#125;;

    private static String toUnsignedString(long i, int shift) &#123;
        char[] buf &#x3D; new char[64];
        int charPos &#x3D; 64;
        int radix &#x3D; 1 &lt;&lt; shift;
        long mask &#x3D; radix - 1;
        do &#123;
            buf[--charPos] &#x3D; digits[(int) (i &amp; mask)];
            i &gt;&gt;&gt;&#x3D; shift;
        &#125; while (i !&#x3D; 0);
        return new String(buf, charPos, (64 - charPos));
    &#125;

    private static SecureRandom ng &#x3D; new SecureRandom();

    &#x2F;**
     * 生成一个长度为16的随机字符串
     *
     * @return
     *&#x2F;
    public static String random16() &#123;
        byte[] data &#x3D; new byte[10];
        ng.nextBytes(data);
        long msb &#x3D; 0;
        long lsb &#x3D; 0;
        for (int i &#x3D; 0; i &lt; 5; i++) &#123;
            msb &#x3D; (msb &lt;&lt; 8) | (data[i] &amp; 0xff);
        &#125;
        for (int i &#x3D; 5; i &lt; 10; i++) &#123;
            lsb &#x3D; (lsb &lt;&lt; 8) | (data[i] &amp; 0xff);
        &#125;
        String random &#x3D; toUnsignedString(msb, 5) + toUnsignedString(lsb, 5);
        if (random.length() &lt; 16) &#123;
            for (int i &#x3D; 0; i &lt; 16 - random.length(); i++) &#123;
                random &#x3D; digits[ng.nextInt(36)] + random;
            &#125;
        &#125;
        return random;
    &#125;

    public static String random32() &#123;
        return UUID.randomUUID().toString();
    &#125;

&#125;</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xiaojianzheng.cn/2021/07/06/NumberToCn-java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JIAHE">
      <meta itemprop="description" content="Collection & Reuse">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JIAHE">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/06/NumberToCn-java/" class="post-title-link" itemprop="url">NumberToCn-java</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-06 16:05:17" itemprop="dateCreated datePublished" datetime="2021-07-06T16:05:17+08:00">2021-07-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <pre class="line-numbers language-java" data-language="java"><code class="language-java">import java.math.BigDecimal;

&#x2F;**
 * 数字转换为汉语中人民币的大写
 *&#x2F;
public class NumberToCn &#123;

    &#x2F;**
     * 汉语中数字大写
     *&#x2F;
    private static final String[] CN_UPPER_NUMBER &#x3D; &#123; &quot;零&quot;, &quot;壹&quot;, &quot;贰&quot;, &quot;叁&quot;, &quot;肆&quot;, &quot;伍&quot;, &quot;陆&quot;, &quot;柒&quot;, &quot;捌&quot;, &quot;玖&quot; &#125;;

    &#x2F;**
     * 汉语中货币单位大写，这样的设计类似于占位符
     *&#x2F;
    private static final String[] CN_UPPER_MONETRAY_UNIT &#x3D; &#123; &quot;分&quot;, &quot;角&quot;, &quot;元&quot;, &quot;拾&quot;, &quot;佰&quot;, &quot;仟&quot;, &quot;万&quot;, &quot;拾&quot;, &quot;佰&quot;, &quot;仟&quot;, &quot;亿&quot;, &quot;拾&quot;, &quot;佰&quot;, &quot;仟&quot;, &quot;兆&quot;, &quot;拾&quot;, &quot;佰&quot;, &quot;仟&quot; &#125;;

    &#x2F;**
     * 特殊字符：整
     *&#x2F;
    private static final String CN_FULL &#x3D; &quot;整&quot;;

    &#x2F;**
     * 特殊字符：负
     *&#x2F;
    private static final String CN_NEGATIVE &#x3D; &quot;负&quot;;

    &#x2F;**
     * 金额的精度，默认值为2
     *&#x2F;
    private static final int MONEY_PRECISION &#x3D; 2;

    &#x2F;**
     * 特殊字符：零元整
     *&#x2F;
    private static final String CN_ZEOR_FULL &#x3D; &quot;零元&quot; + CN_FULL;

    &#x2F;**
     * 把输入的金额转换为汉语中人民币的大写
     *
     * @param numberOfMoney 输入的金额
     * @return 对应的汉语大写
     *&#x2F;
    public static String number2CNMontrayUnit(BigDecimal numberOfMoney) &#123;
        StringBuffer sb &#x3D; new StringBuffer();
        &#x2F;&#x2F; -1, 0, or 1 as the value of this BigDecimal is negative, zero, or positive.
        int signum &#x3D; numberOfMoney.signum();
        &#x2F;&#x2F; 零元整的情况
        if (signum &#x3D;&#x3D; 0) &#123;
            return CN_ZEOR_FULL;
        &#125;
        &#x2F;&#x2F; 这里会进行金额的四舍五入
        long number &#x3D; numberOfMoney.movePointRight(MONEY_PRECISION).setScale(0, 4).abs().longValue();
        &#x2F;&#x2F; 得到小数点后两位值
        long scale &#x3D; number % 100;
        int numUnit &#x3D; 0;
        int numIndex &#x3D; 0;
        boolean getZero &#x3D; false;
        &#x2F;&#x2F; 判断最后两位数，一共有四中情况：00 &#x3D; 0, 01 &#x3D; 1, 10, 11
        if (!(scale &gt; 0)) &#123;
            numIndex &#x3D; 2;
            number &#x3D; number &#x2F; 100;
            getZero &#x3D; true;
        &#125;
        if ((scale &gt; 0) &amp;&amp; (!(scale % 10 &gt; 0))) &#123;
            numIndex &#x3D; 1;
            number &#x3D; number &#x2F; 10;
            getZero &#x3D; true;
        &#125;
        int zeroSize &#x3D; 0;
        while (true) &#123;
            if (number &lt;&#x3D; 0) &#123;
                break;
            &#125;
            &#x2F;&#x2F; 每次获取到最后一个数
            numUnit &#x3D; (int) (number % 10);
            if (numUnit &gt; 0) &#123;
                if ((numIndex &#x3D;&#x3D; 9) &amp;&amp; (zeroSize &gt;&#x3D; 3)) &#123;
                    sb.insert(0, CN_UPPER_MONETRAY_UNIT[6]);
                &#125;
                if ((numIndex &#x3D;&#x3D; 13) &amp;&amp; (zeroSize &gt;&#x3D; 3)) &#123;
                    sb.insert(0, CN_UPPER_MONETRAY_UNIT[10]);
                &#125;
                sb.insert(0, CN_UPPER_MONETRAY_UNIT[numIndex]);
                sb.insert(0, CN_UPPER_NUMBER[numUnit]);
                getZero &#x3D; false;
                zeroSize &#x3D; 0;
            &#125; else &#123;
                ++zeroSize;
                if (!(getZero)) &#123;
                    sb.insert(0, CN_UPPER_NUMBER[numUnit]);
                &#125;
                if (numIndex &#x3D;&#x3D; 2) &#123;
                    if (number &gt; 0) &#123;
                        sb.insert(0, CN_UPPER_MONETRAY_UNIT[numIndex]);
                    &#125;
                &#125; else if (((numIndex - 2) % 4 &#x3D;&#x3D; 0) &amp;&amp; (number % 1000 &gt; 0)) &#123;
                    sb.insert(0, CN_UPPER_MONETRAY_UNIT[numIndex]);
                &#125;
                getZero &#x3D; true;
            &#125;
            &#x2F;&#x2F; 让number每次都去掉最后一个数
            number &#x3D; number &#x2F; 10;
            ++numIndex;
        &#125;
        &#x2F;&#x2F; 如果signum &#x3D;&#x3D; -1，则说明输入的数字为负数，就在最前面追加特殊字符：负
        if (signum &#x3D;&#x3D; -1) &#123;
            sb.insert(0, CN_NEGATIVE);
        &#125;
        &#x2F;&#x2F; 输入的数字小数点后两位为&quot;00&quot;的情况，则要在最后追加特殊字符：整
        if (!(scale &gt; 0)) &#123;
            sb.append(CN_FULL);
        &#125;
        return sb.toString();
    &#125;

&#125;</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xiaojianzheng.cn/2021/07/06/MimeType-java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JIAHE">
      <meta itemprop="description" content="Collection & Reuse">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JIAHE">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/06/MimeType-java/" class="post-title-link" itemprop="url">MimeType.java</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-06 16:00:52" itemprop="dateCreated datePublished" datetime="2021-07-06T16:00:52+08:00">2021-07-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <pre class="line-numbers language-java" data-language="java"><code class="language-java">import java.util.HashMap;

public class MimeTypes &#123;

   static HashMap&lt;String, String&gt; type &#x3D; new HashMap&lt;String, String&gt;();

   static &#123;
      type.put(&quot;ez&quot;, &quot;application&#x2F;andrew-inset&quot;);
      type.put(&quot;aw&quot;, &quot;application&#x2F;applixware&quot;);
      type.put(&quot;atom&quot;, &quot;application&#x2F;atom+xml&quot;);
      type.put(&quot;atomcat&quot;, &quot;application&#x2F;atomcat+xml&quot;);
      type.put(&quot;atomsvc&quot;, &quot;application&#x2F;atomsvc+xml&quot;);
      type.put(&quot;ccxml&quot;, &quot;application&#x2F;ccxml+xml&quot;);
      type.put(&quot;cdmia&quot;, &quot;application&#x2F;cdmi-capability&quot;);
      type.put(&quot;cdmic&quot;, &quot;application&#x2F;cdmi-container&quot;);
      type.put(&quot;cdmid&quot;, &quot;application&#x2F;cdmi-domain&quot;);
      type.put(&quot;cdmio&quot;, &quot;application&#x2F;cdmi-object&quot;);
      type.put(&quot;cdmiq&quot;, &quot;application&#x2F;cdmi-queue&quot;);
      type.put(&quot;cu&quot;, &quot;application&#x2F;cu-seeme&quot;);
      type.put(&quot;mdp&quot;, &quot;application&#x2F;dash+xml&quot;);
      type.put(&quot;davmount&quot;, &quot;application&#x2F;davmount+xml&quot;);
      type.put(&quot;dbk&quot;, &quot;application&#x2F;docbook+xml&quot;);
      type.put(&quot;dssc&quot;, &quot;application&#x2F;dssc+der&quot;);
      type.put(&quot;xdssc&quot;, &quot;application&#x2F;dssc+xml&quot;);
      type.put(&quot;ecma&quot;, &quot;application&#x2F;ecmascript&quot;);
      type.put(&quot;emma&quot;, &quot;application&#x2F;emma+xml&quot;);
      type.put(&quot;epub&quot;, &quot;application&#x2F;epub+zip&quot;);
      type.put(&quot;exi&quot;, &quot;application&#x2F;exi&quot;);
      type.put(&quot;pfr&quot;, &quot;application&#x2F;font-tdpfr&quot;);
      type.put(&quot;woff&quot;, &quot;application&#x2F;font-woff&quot;);
      type.put(&quot;woff2&quot;, &quot;application&#x2F;font-woff2&quot;);
      type.put(&quot;gml&quot;, &quot;application&#x2F;gml+xml&quot;);
      type.put(&quot;gpx&quot;, &quot;application&#x2F;gpx+xml&quot;);
      type.put(&quot;gxf&quot;, &quot;application&#x2F;gxf&quot;);
      type.put(&quot;stk&quot;, &quot;application&#x2F;hyperstudio&quot;);
      type.put(&quot;ink&quot;, &quot;application&#x2F;inkml+xml&quot;);
      type.put(&quot;inkml&quot;, &quot;application&#x2F;inkml+xml&quot;);
      type.put(&quot;ipfix&quot;, &quot;application&#x2F;ipfix&quot;);
      type.put(&quot;jar&quot;, &quot;application&#x2F;java-archive&quot;);
      type.put(&quot;ser&quot;, &quot;application&#x2F;java-serialized-object&quot;);
      type.put(&quot;class&quot;, &quot;application&#x2F;java-vm&quot;);
      type.put(&quot;js&quot;, &quot;application&#x2F;javascript&quot;);
      type.put(&quot;json&quot;, &quot;application&#x2F;json&quot;);
      type.put(&quot;map&quot;, &quot;application&#x2F;json&quot;);
      type.put(&quot;json5&quot;, &quot;application&#x2F;json5&quot;);
      type.put(&quot;jsonml&quot;, &quot;application&#x2F;jsonml+json&quot;);
      type.put(&quot;lostxml&quot;, &quot;application&#x2F;lost+xml&quot;);
      type.put(&quot;hqx&quot;, &quot;application&#x2F;mac-binhex40&quot;);
      type.put(&quot;cpt&quot;, &quot;application&#x2F;mac-compactpro&quot;);
      type.put(&quot;mads&quot;, &quot;application&#x2F;mads+xml&quot;);
      type.put(&quot;mrc&quot;, &quot;application&#x2F;marc&quot;);
      type.put(&quot;mrcx&quot;, &quot;application&#x2F;marcxml+xml&quot;);
      type.put(&quot;ma&quot;, &quot;application&#x2F;mathematica&quot;);
      type.put(&quot;nb&quot;, &quot;application&#x2F;mathematica&quot;);
      type.put(&quot;mb&quot;, &quot;application&#x2F;mathematica&quot;);
      type.put(&quot;mathml&quot;, &quot;application&#x2F;mathml+xml&quot;);
      type.put(&quot;mbox&quot;, &quot;application&#x2F;mbox&quot;);
      type.put(&quot;mscml&quot;, &quot;application&#x2F;mediaservercontrol+xml&quot;);
      type.put(&quot;metalink&quot;, &quot;application&#x2F;metalink+xml&quot;);
      type.put(&quot;meta4&quot;, &quot;application&#x2F;metalink4+xml&quot;);
      type.put(&quot;mets&quot;, &quot;application&#x2F;mets+xml&quot;);
      type.put(&quot;mods&quot;, &quot;application&#x2F;mods+xml&quot;);
      type.put(&quot;m21&quot;, &quot;application&#x2F;mp21&quot;);
      type.put(&quot;mp21&quot;, &quot;application&#x2F;mp21&quot;);
      type.put(&quot;mp4s&quot;, &quot;application&#x2F;mp4&quot;);
      type.put(&quot;m4p&quot;, &quot;application&#x2F;mp4&quot;);
      type.put(&quot;doc&quot;, &quot;application&#x2F;msword&quot;);
      type.put(&quot;dot&quot;, &quot;application&#x2F;msword&quot;);
      type.put(&quot;mxf&quot;, &quot;application&#x2F;mxf&quot;);
      type.put(&quot;bin&quot;, &quot;application&#x2F;octet-stream&quot;);
      type.put(&quot;dms&quot;, &quot;application&#x2F;octet-stream&quot;);
      type.put(&quot;lrf&quot;, &quot;application&#x2F;octet-stream&quot;);
      type.put(&quot;mar&quot;, &quot;application&#x2F;octet-stream&quot;);
      type.put(&quot;so&quot;, &quot;application&#x2F;octet-stream&quot;);
      type.put(&quot;dist&quot;, &quot;application&#x2F;octet-stream&quot;);
      type.put(&quot;distz&quot;, &quot;application&#x2F;octet-stream&quot;);
      type.put(&quot;pkg&quot;, &quot;application&#x2F;octet-stream&quot;);
      type.put(&quot;bpk&quot;, &quot;application&#x2F;octet-stream&quot;);
      type.put(&quot;dump&quot;, &quot;application&#x2F;octet-stream&quot;);
      type.put(&quot;elc&quot;, &quot;application&#x2F;octet-stream&quot;);
      type.put(&quot;deploy&quot;, &quot;application&#x2F;octet-stream&quot;);
      type.put(&quot;buffer&quot;, &quot;application&#x2F;octet-stream&quot;);
      type.put(&quot;oda&quot;, &quot;application&#x2F;oda&quot;);
      type.put(&quot;opf&quot;, &quot;application&#x2F;oebps-package+xml&quot;);
      type.put(&quot;ogx&quot;, &quot;application&#x2F;ogg&quot;);
      type.put(&quot;omdoc&quot;, &quot;application&#x2F;omdoc+xml&quot;);
      type.put(&quot;onetoc&quot;, &quot;application&#x2F;onenote&quot;);
      type.put(&quot;onetoc2&quot;, &quot;application&#x2F;onenote&quot;);
      type.put(&quot;onetmp&quot;, &quot;application&#x2F;onenote&quot;);
      type.put(&quot;onepkg&quot;, &quot;application&#x2F;onenote&quot;);
      type.put(&quot;oxps&quot;, &quot;application&#x2F;oxps&quot;);
      type.put(&quot;xer&quot;, &quot;application&#x2F;patch-ops-error+xml&quot;);
      type.put(&quot;pdf&quot;, &quot;application&#x2F;pdf&quot;);
      type.put(&quot;pgp&quot;, &quot;application&#x2F;pgp-encrypted&quot;);
      type.put(&quot;asc&quot;, &quot;application&#x2F;pgp-signature&quot;);
      type.put(&quot;sig&quot;, &quot;application&#x2F;pgp-signature&quot;);
      type.put(&quot;prf&quot;, &quot;application&#x2F;pics-rules&quot;);
      type.put(&quot;p10&quot;, &quot;application&#x2F;pkcs10&quot;);
      type.put(&quot;p7m&quot;, &quot;application&#x2F;pkcs7-mime&quot;);
      type.put(&quot;p7c&quot;, &quot;application&#x2F;pkcs7-mime&quot;);
      type.put(&quot;p7s&quot;, &quot;application&#x2F;pkcs7-signature&quot;);
      type.put(&quot;p8&quot;, &quot;application&#x2F;pkcs8&quot;);
      type.put(&quot;ac&quot;, &quot;application&#x2F;pkix-attr-cert&quot;);
      type.put(&quot;cer&quot;, &quot;application&#x2F;pkix-cert&quot;);
      type.put(&quot;crl&quot;, &quot;application&#x2F;pkix-crl&quot;);
      type.put(&quot;pkipath&quot;, &quot;application&#x2F;pkix-pkipath&quot;);
      type.put(&quot;pki&quot;, &quot;application&#x2F;pkixcmp&quot;);
      type.put(&quot;pls&quot;, &quot;application&#x2F;pls+xml&quot;);
      type.put(&quot;ai&quot;, &quot;application&#x2F;postscript&quot;);
      type.put(&quot;eps&quot;, &quot;application&#x2F;postscript&quot;);
      type.put(&quot;ps&quot;, &quot;application&#x2F;postscript&quot;);
      type.put(&quot;cww&quot;, &quot;application&#x2F;prs.cww&quot;);
      type.put(&quot;pskcxml&quot;, &quot;application&#x2F;pskc+xml&quot;);
      type.put(&quot;rdf&quot;, &quot;application&#x2F;rdf+xml&quot;);
      type.put(&quot;rif&quot;, &quot;application&#x2F;reginfo+xml&quot;);
      type.put(&quot;rnc&quot;, &quot;application&#x2F;relax-ng-compact-syntax&quot;);
      type.put(&quot;rl&quot;, &quot;application&#x2F;resource-lists+xml&quot;);
      type.put(&quot;rld&quot;, &quot;application&#x2F;resource-lists-diff+xml&quot;);
      type.put(&quot;rs&quot;, &quot;application&#x2F;rls-services+xml&quot;);
      type.put(&quot;gbr&quot;, &quot;application&#x2F;rpki-ghostbusters&quot;);
      type.put(&quot;mft&quot;, &quot;application&#x2F;rpki-manifest&quot;);
      type.put(&quot;roa&quot;, &quot;application&#x2F;rpki-roa&quot;);
      type.put(&quot;rsd&quot;, &quot;application&#x2F;rsd+xml&quot;);
      type.put(&quot;rss&quot;, &quot;application&#x2F;rss+xml&quot;);
      type.put(&quot;rtf&quot;, &quot;application&#x2F;rtf&quot;);
      type.put(&quot;sbml&quot;, &quot;application&#x2F;sbml+xml&quot;);
      type.put(&quot;scq&quot;, &quot;application&#x2F;scvp-cv-request&quot;);
      type.put(&quot;scs&quot;, &quot;application&#x2F;scvp-cv-response&quot;);
      type.put(&quot;spq&quot;, &quot;application&#x2F;scvp-vp-request&quot;);
      type.put(&quot;spp&quot;, &quot;application&#x2F;scvp-vp-response&quot;);
      type.put(&quot;sdp&quot;, &quot;application&#x2F;sdp&quot;);
      type.put(&quot;setpay&quot;, &quot;application&#x2F;set-payment-initiation&quot;);
      type.put(&quot;setreg&quot;, &quot;application&#x2F;set-registration-initiation&quot;);
      type.put(&quot;shf&quot;, &quot;application&#x2F;shf+xml&quot;);
      type.put(&quot;smi&quot;, &quot;application&#x2F;smil+xml&quot;);
      type.put(&quot;smil&quot;, &quot;application&#x2F;smil+xml&quot;);
      type.put(&quot;rq&quot;, &quot;application&#x2F;sparql-query&quot;);
      type.put(&quot;srx&quot;, &quot;application&#x2F;sparql-results+xml&quot;);
      type.put(&quot;gram&quot;, &quot;application&#x2F;srgs&quot;);
      type.put(&quot;grxml&quot;, &quot;application&#x2F;srgs+xml&quot;);
      type.put(&quot;sru&quot;, &quot;application&#x2F;sru+xml&quot;);
      type.put(&quot;ssdl&quot;, &quot;application&#x2F;ssdl+xml&quot;);
      type.put(&quot;ssml&quot;, &quot;application&#x2F;ssml+xml&quot;);
      type.put(&quot;tei&quot;, &quot;application&#x2F;tei+xml&quot;);
      type.put(&quot;teicorpus&quot;, &quot;application&#x2F;tei+xml&quot;);
      type.put(&quot;tfi&quot;, &quot;application&#x2F;thraud+xml&quot;);
      type.put(&quot;tsd&quot;, &quot;application&#x2F;timestamped-data&quot;);
      type.put(&quot;plb&quot;, &quot;application&#x2F;vnd.3gpp.pic-bw-large&quot;);
      type.put(&quot;psb&quot;, &quot;application&#x2F;vnd.3gpp.pic-bw-small&quot;);
      type.put(&quot;pvb&quot;, &quot;application&#x2F;vnd.3gpp.pic-bw-var&quot;);
      type.put(&quot;tcap&quot;, &quot;application&#x2F;vnd.3gpp2.tcap&quot;);
      type.put(&quot;pwn&quot;, &quot;application&#x2F;vnd.3m.post-it-notes&quot;);
      type.put(&quot;aso&quot;, &quot;application&#x2F;vnd.accpac.simply.aso&quot;);
      type.put(&quot;imp&quot;, &quot;application&#x2F;vnd.accpac.simply.imp&quot;);
      type.put(&quot;acu&quot;, &quot;application&#x2F;vnd.acucobol&quot;);
      type.put(&quot;atc&quot;, &quot;application&#x2F;vnd.acucorp&quot;);
      type.put(&quot;acutc&quot;, &quot;application&#x2F;vnd.acucorp&quot;);
      type.put(&quot;air&quot;, &quot;application&#x2F;vnd.adobe.air-application-installer-package+zip&quot;);
      type.put(&quot;fcdt&quot;, &quot;application&#x2F;vnd.adobe.formscentral.fcdt&quot;);
      type.put(&quot;fxp&quot;, &quot;application&#x2F;vnd.adobe.fxp&quot;);
      type.put(&quot;fxpl&quot;, &quot;application&#x2F;vnd.adobe.fxp&quot;);
      type.put(&quot;xdp&quot;, &quot;application&#x2F;vnd.adobe.xdp+xml&quot;);
      type.put(&quot;xfdf&quot;, &quot;application&#x2F;vnd.adobe.xfdf&quot;);
      type.put(&quot;ahead&quot;, &quot;application&#x2F;vnd.ahead.space&quot;);
      type.put(&quot;azf&quot;, &quot;application&#x2F;vnd.airzip.filesecure.azf&quot;);
      type.put(&quot;azs&quot;, &quot;application&#x2F;vnd.airzip.filesecure.azs&quot;);
      type.put(&quot;azw&quot;, &quot;application&#x2F;vnd.amazon.ebook&quot;);
      type.put(&quot;acc&quot;, &quot;application&#x2F;vnd.americandynamics.acc&quot;);
      type.put(&quot;ami&quot;, &quot;application&#x2F;vnd.amiga.ami&quot;);
      type.put(&quot;apk&quot;, &quot;application&#x2F;vnd.android.package-archive&quot;);
      type.put(&quot;cii&quot;, &quot;application&#x2F;vnd.anser-web-certificate-issue-initiation&quot;);
      type.put(&quot;fti&quot;, &quot;application&#x2F;vnd.anser-web-funds-transfer-initiation&quot;);
      type.put(&quot;atx&quot;, &quot;application&#x2F;vnd.antix.game-component&quot;);
      type.put(&quot;mpkg&quot;, &quot;application&#x2F;vnd.apple.installer+xml&quot;);
      type.put(&quot;m3u8&quot;, &quot;application&#x2F;vnd.apple.mpegurl&quot;);
      type.put(&quot;swi&quot;, &quot;application&#x2F;vnd.aristanetworks.swi&quot;);
      type.put(&quot;iota&quot;, &quot;application&#x2F;vnd.astraea-software.iota&quot;);
      type.put(&quot;aep&quot;, &quot;application&#x2F;vnd.audiograph&quot;);
      type.put(&quot;mpm&quot;, &quot;application&#x2F;vnd.blueice.multipass&quot;);
      type.put(&quot;bmi&quot;, &quot;application&#x2F;vnd.bmi&quot;);
      type.put(&quot;rep&quot;, &quot;application&#x2F;vnd.businessobjects&quot;);
      type.put(&quot;cdxml&quot;, &quot;application&#x2F;vnd.chemdraw+xml&quot;);
      type.put(&quot;mmd&quot;, &quot;application&#x2F;vnd.chipnuts.karaoke-mmd&quot;);
      type.put(&quot;cdy&quot;, &quot;application&#x2F;vnd.cinderella&quot;);
      type.put(&quot;cla&quot;, &quot;application&#x2F;vnd.claymore&quot;);
      type.put(&quot;rp9&quot;, &quot;application&#x2F;vnd.cloanto.rp9&quot;);
      type.put(&quot;c4g&quot;, &quot;application&#x2F;vnd.clonk.c4group&quot;);
      type.put(&quot;c4d&quot;, &quot;application&#x2F;vnd.clonk.c4group&quot;);
      type.put(&quot;c4f&quot;, &quot;application&#x2F;vnd.clonk.c4group&quot;);
      type.put(&quot;c4p&quot;, &quot;application&#x2F;vnd.clonk.c4group&quot;);
      type.put(&quot;c4u&quot;, &quot;application&#x2F;vnd.clonk.c4group&quot;);
      type.put(&quot;c11amc&quot;, &quot;application&#x2F;vnd.cluetrust.cartomobile-config&quot;);
      type.put(&quot;c11amz&quot;, &quot;application&#x2F;vnd.cluetrust.cartomobile-config-pkg&quot;);
      type.put(&quot;csp&quot;, &quot;application&#x2F;vnd.commonspace&quot;);
      type.put(&quot;cdbcmsg&quot;, &quot;application&#x2F;vnd.contact.cmsg&quot;);
      type.put(&quot;cmc&quot;, &quot;application&#x2F;vnd.cosmocaller&quot;);
      type.put(&quot;clkx&quot;, &quot;application&#x2F;vnd.crick.clicker&quot;);
      type.put(&quot;clkk&quot;, &quot;application&#x2F;vnd.crick.clicker.keyboard&quot;);
      type.put(&quot;clkp&quot;, &quot;application&#x2F;vnd.crick.clicker.palette&quot;);
      type.put(&quot;clkt&quot;, &quot;application&#x2F;vnd.crick.clicker.template&quot;);
      type.put(&quot;clkw&quot;, &quot;application&#x2F;vnd.crick.clicker.wordbank&quot;);
      type.put(&quot;wbs&quot;, &quot;application&#x2F;vnd.criticaltools.wbs+xml&quot;);
      type.put(&quot;pml&quot;, &quot;application&#x2F;vnd.ctc-posml&quot;);
      type.put(&quot;ppd&quot;, &quot;application&#x2F;vnd.cups-ppd&quot;);
      type.put(&quot;car&quot;, &quot;application&#x2F;vnd.curl.car&quot;);
      type.put(&quot;pcurl&quot;, &quot;application&#x2F;vnd.curl.pcurl&quot;);
      type.put(&quot;dart&quot;, &quot;application&#x2F;vnd.dart&quot;);
      type.put(&quot;rdz&quot;, &quot;application&#x2F;vnd.data-vision.rdz&quot;);
      type.put(&quot;uvf&quot;, &quot;application&#x2F;vnd.dece.data&quot;);
      type.put(&quot;uvvf&quot;, &quot;application&#x2F;vnd.dece.data&quot;);
      type.put(&quot;uvd&quot;, &quot;application&#x2F;vnd.dece.data&quot;);
      type.put(&quot;uvvd&quot;, &quot;application&#x2F;vnd.dece.data&quot;);
      type.put(&quot;uvt&quot;, &quot;application&#x2F;vnd.dece.ttml+xml&quot;);
      type.put(&quot;uvvt&quot;, &quot;application&#x2F;vnd.dece.ttml+xml&quot;);
      type.put(&quot;uvx&quot;, &quot;application&#x2F;vnd.dece.unspecified&quot;);
      type.put(&quot;uvvx&quot;, &quot;application&#x2F;vnd.dece.unspecified&quot;);
      type.put(&quot;uvz&quot;, &quot;application&#x2F;vnd.dece.zip&quot;);
      type.put(&quot;uvvz&quot;, &quot;application&#x2F;vnd.dece.zip&quot;);
      type.put(&quot;fe_launch&quot;, &quot;application&#x2F;vnd.denovo.fcselayout-link&quot;);
      type.put(&quot;dna&quot;, &quot;application&#x2F;vnd.dna&quot;);
      type.put(&quot;mlp&quot;, &quot;application&#x2F;vnd.dolby.mlp&quot;);
      type.put(&quot;dpg&quot;, &quot;application&#x2F;vnd.dpgraph&quot;);
      type.put(&quot;dfac&quot;, &quot;application&#x2F;vnd.dreamfactory&quot;);
      type.put(&quot;kpxx&quot;, &quot;application&#x2F;vnd.ds-keypoint&quot;);
      type.put(&quot;ait&quot;, &quot;application&#x2F;vnd.dvb.ait&quot;);
      type.put(&quot;svc&quot;, &quot;application&#x2F;vnd.dvb.service&quot;);
      type.put(&quot;geo&quot;, &quot;application&#x2F;vnd.dynageo&quot;);
      type.put(&quot;mag&quot;, &quot;application&#x2F;vnd.ecowin.chart&quot;);
      type.put(&quot;nml&quot;, &quot;application&#x2F;vnd.enliven&quot;);
      type.put(&quot;esf&quot;, &quot;application&#x2F;vnd.epson.esf&quot;);
      type.put(&quot;msf&quot;, &quot;application&#x2F;vnd.epson.msf&quot;);
      type.put(&quot;qam&quot;, &quot;application&#x2F;vnd.epson.quickanime&quot;);
      type.put(&quot;slt&quot;, &quot;application&#x2F;vnd.epson.salt&quot;);
      type.put(&quot;ssf&quot;, &quot;application&#x2F;vnd.epson.ssf&quot;);
      type.put(&quot;es3&quot;, &quot;application&#x2F;vnd.eszigno3+xml&quot;);
      type.put(&quot;et3&quot;, &quot;application&#x2F;vnd.eszigno3+xml&quot;);
      type.put(&quot;ez2&quot;, &quot;application&#x2F;vnd.ezpix-album&quot;);
      type.put(&quot;ez3&quot;, &quot;application&#x2F;vnd.ezpix-package&quot;);
      type.put(&quot;fdf&quot;, &quot;application&#x2F;vnd.fdf&quot;);
      type.put(&quot;mseed&quot;, &quot;application&#x2F;vnd.fdsn.mseed&quot;);
      type.put(&quot;seed&quot;, &quot;application&#x2F;vnd.fdsn.seed&quot;);
      type.put(&quot;dataless&quot;, &quot;application&#x2F;vnd.fdsn.seed&quot;);
      type.put(&quot;gph&quot;, &quot;application&#x2F;vnd.flographit&quot;);
      type.put(&quot;ftc&quot;, &quot;application&#x2F;vnd.fluxtime.clip&quot;);
      type.put(&quot;fm&quot;, &quot;application&#x2F;vnd.framemaker&quot;);
      type.put(&quot;frame&quot;, &quot;application&#x2F;vnd.framemaker&quot;);
      type.put(&quot;maker&quot;, &quot;application&#x2F;vnd.framemaker&quot;);
      type.put(&quot;book&quot;, &quot;application&#x2F;vnd.framemaker&quot;);
      type.put(&quot;fnc&quot;, &quot;application&#x2F;vnd.frogans.fnc&quot;);
      type.put(&quot;ltf&quot;, &quot;application&#x2F;vnd.frogans.ltf&quot;);
      type.put(&quot;fsc&quot;, &quot;application&#x2F;vnd.fsc.weblaunch&quot;);
      type.put(&quot;oas&quot;, &quot;application&#x2F;vnd.fujitsu.oasys&quot;);
      type.put(&quot;oa2&quot;, &quot;application&#x2F;vnd.fujitsu.oasys2&quot;);
      type.put(&quot;oa3&quot;, &quot;application&#x2F;vnd.fujitsu.oasys3&quot;);
      type.put(&quot;fg5&quot;, &quot;application&#x2F;vnd.fujitsu.oasysgp&quot;);
      type.put(&quot;bh2&quot;, &quot;application&#x2F;vnd.fujitsu.oasysprs&quot;);
      type.put(&quot;ddd&quot;, &quot;application&#x2F;vnd.fujixerox.ddd&quot;);
      type.put(&quot;xdw&quot;, &quot;application&#x2F;vnd.fujixerox.docuworks&quot;);
      type.put(&quot;xbd&quot;, &quot;application&#x2F;vnd.fujixerox.docuworks.binder&quot;);
      type.put(&quot;fzs&quot;, &quot;application&#x2F;vnd.fuzzysheet&quot;);
      type.put(&quot;txd&quot;, &quot;application&#x2F;vnd.genomatix.tuxedo&quot;);
      type.put(&quot;ggb&quot;, &quot;application&#x2F;vnd.geogebra.file&quot;);
      type.put(&quot;ggt&quot;, &quot;application&#x2F;vnd.geogebra.tool&quot;);
      type.put(&quot;gex&quot;, &quot;application&#x2F;vnd.geometry-explorer&quot;);
      type.put(&quot;gre&quot;, &quot;application&#x2F;vnd.geometry-explorer&quot;);
      type.put(&quot;gxt&quot;, &quot;application&#x2F;vnd.geonext&quot;);
      type.put(&quot;g2w&quot;, &quot;application&#x2F;vnd.geoplan&quot;);
      type.put(&quot;g3w&quot;, &quot;application&#x2F;vnd.geospace&quot;);
      type.put(&quot;gmx&quot;, &quot;application&#x2F;vnd.gmx&quot;);
      type.put(&quot;kml&quot;, &quot;application&#x2F;vnd.google-earth.kml+xml&quot;);
      type.put(&quot;kmz&quot;, &quot;application&#x2F;vnd.google-earth.kmz&quot;);
      type.put(&quot;gqf&quot;, &quot;application&#x2F;vnd.grafeq&quot;);
      type.put(&quot;gqs&quot;, &quot;application&#x2F;vnd.grafeq&quot;);
      type.put(&quot;gac&quot;, &quot;application&#x2F;vnd.groove-account&quot;);
      type.put(&quot;ghf&quot;, &quot;application&#x2F;vnd.groove-help&quot;);
      type.put(&quot;gim&quot;, &quot;application&#x2F;vnd.groove-identity-message&quot;);
      type.put(&quot;grv&quot;, &quot;application&#x2F;vnd.groove-injector&quot;);
      type.put(&quot;gtm&quot;, &quot;application&#x2F;vnd.groove-tool-message&quot;);
      type.put(&quot;tpl&quot;, &quot;application&#x2F;vnd.groove-tool-template&quot;);
      type.put(&quot;vcg&quot;, &quot;application&#x2F;vnd.groove-vcard&quot;);
      type.put(&quot;hal&quot;, &quot;application&#x2F;vnd.hal+xml&quot;);
      type.put(&quot;zmm&quot;, &quot;application&#x2F;vnd.handheld-entertainment+xml&quot;);
      type.put(&quot;hbci&quot;, &quot;application&#x2F;vnd.hbci&quot;);
      type.put(&quot;les&quot;, &quot;application&#x2F;vnd.hhe.lesson-player&quot;);
      type.put(&quot;hpgl&quot;, &quot;application&#x2F;vnd.hp-hpgl&quot;);
      type.put(&quot;hpid&quot;, &quot;application&#x2F;vnd.hp-hpid&quot;);
      type.put(&quot;hps&quot;, &quot;application&#x2F;vnd.hp-hps&quot;);
      type.put(&quot;jlt&quot;, &quot;application&#x2F;vnd.hp-jlyt&quot;);
      type.put(&quot;pcl&quot;, &quot;application&#x2F;vnd.hp-pcl&quot;);
      type.put(&quot;pclxl&quot;, &quot;application&#x2F;vnd.hp-pclxl&quot;);
      type.put(&quot;mpy&quot;, &quot;application&#x2F;vnd.ibm.minipay&quot;);
      type.put(&quot;afp&quot;, &quot;application&#x2F;vnd.ibm.modcap&quot;);
      type.put(&quot;listafp&quot;, &quot;application&#x2F;vnd.ibm.modcap&quot;);
      type.put(&quot;list3820&quot;, &quot;application&#x2F;vnd.ibm.modcap&quot;);
      type.put(&quot;irm&quot;, &quot;application&#x2F;vnd.ibm.rights-management&quot;);
      type.put(&quot;sc&quot;, &quot;application&#x2F;vnd.ibm.secure-container&quot;);
      type.put(&quot;icc&quot;, &quot;application&#x2F;vnd.iccprofile&quot;);
      type.put(&quot;icm&quot;, &quot;application&#x2F;vnd.iccprofile&quot;);
      type.put(&quot;igl&quot;, &quot;application&#x2F;vnd.igloader&quot;);
      type.put(&quot;ivp&quot;, &quot;application&#x2F;vnd.immervision-ivp&quot;);
      type.put(&quot;ivu&quot;, &quot;application&#x2F;vnd.immervision-ivu&quot;);
      type.put(&quot;igm&quot;, &quot;application&#x2F;vnd.insors.igm&quot;);
      type.put(&quot;xpw&quot;, &quot;application&#x2F;vnd.intercon.formnet&quot;);
      type.put(&quot;xpx&quot;, &quot;application&#x2F;vnd.intercon.formnet&quot;);
      type.put(&quot;i2g&quot;, &quot;application&#x2F;vnd.intergeo&quot;);
      type.put(&quot;qbo&quot;, &quot;application&#x2F;vnd.intu.qbo&quot;);
      type.put(&quot;qfx&quot;, &quot;application&#x2F;vnd.intu.qfx&quot;);
      type.put(&quot;rcprofile&quot;, &quot;application&#x2F;vnd.ipunplugged.rcprofile&quot;);
      type.put(&quot;irp&quot;, &quot;application&#x2F;vnd.irepository.package+xml&quot;);
      type.put(&quot;xpr&quot;, &quot;application&#x2F;vnd.is-xpr&quot;);
      type.put(&quot;fcs&quot;, &quot;application&#x2F;vnd.isac.fcs&quot;);
      type.put(&quot;jam&quot;, &quot;application&#x2F;vnd.jam&quot;);
      type.put(&quot;rms&quot;, &quot;application&#x2F;vnd.jcp.javame.midlet-rms&quot;);
      type.put(&quot;jisp&quot;, &quot;application&#x2F;vnd.jisp&quot;);
      type.put(&quot;joda&quot;, &quot;application&#x2F;vnd.joost.joda-archive&quot;);
      type.put(&quot;ktz&quot;, &quot;application&#x2F;vnd.kahootz&quot;);
      type.put(&quot;ktr&quot;, &quot;application&#x2F;vnd.kahootz&quot;);
      type.put(&quot;karbon&quot;, &quot;application&#x2F;vnd.kde.karbon&quot;);
      type.put(&quot;chrt&quot;, &quot;application&#x2F;vnd.kde.kchart&quot;);
      type.put(&quot;kfo&quot;, &quot;application&#x2F;vnd.kde.kformula&quot;);
      type.put(&quot;flw&quot;, &quot;application&#x2F;vnd.kde.kivio&quot;);
      type.put(&quot;kon&quot;, &quot;application&#x2F;vnd.kde.kontour&quot;);
      type.put(&quot;kpr&quot;, &quot;application&#x2F;vnd.kde.kpresenter&quot;);
      type.put(&quot;kpt&quot;, &quot;application&#x2F;vnd.kde.kpresenter&quot;);
      type.put(&quot;ksp&quot;, &quot;application&#x2F;vnd.kde.kspread&quot;);
      type.put(&quot;kwd&quot;, &quot;application&#x2F;vnd.kde.kword&quot;);
      type.put(&quot;kwt&quot;, &quot;application&#x2F;vnd.kde.kword&quot;);
      type.put(&quot;htke&quot;, &quot;application&#x2F;vnd.kenameaapp&quot;);
      type.put(&quot;kia&quot;, &quot;application&#x2F;vnd.kidspiration&quot;);
      type.put(&quot;kne&quot;, &quot;application&#x2F;vnd.kinar&quot;);
      type.put(&quot;knp&quot;, &quot;application&#x2F;vnd.kinar&quot;);
      type.put(&quot;skp&quot;, &quot;application&#x2F;vnd.koan&quot;);
      type.put(&quot;skd&quot;, &quot;application&#x2F;vnd.koan&quot;);
      type.put(&quot;skt&quot;, &quot;application&#x2F;vnd.koan&quot;);
      type.put(&quot;skm&quot;, &quot;application&#x2F;vnd.koan&quot;);
      type.put(&quot;sse&quot;, &quot;application&#x2F;vnd.kodak-descriptor&quot;);
      type.put(&quot;lasxml&quot;, &quot;application&#x2F;vnd.las.las+xml&quot;);
      type.put(&quot;lbd&quot;, &quot;application&#x2F;vnd.llamagraphics.life-balance.desktop&quot;);
      type.put(&quot;lbe&quot;, &quot;application&#x2F;vnd.llamagraphics.life-balance.exchange+xml&quot;);
      type.put(&quot;123&quot;, &quot;application&#x2F;vnd.lotus-1-2-3&quot;);
      type.put(&quot;apr&quot;, &quot;application&#x2F;vnd.lotus-approach&quot;);
      type.put(&quot;pre&quot;, &quot;application&#x2F;vnd.lotus-freelance&quot;);
      type.put(&quot;nsf&quot;, &quot;application&#x2F;vnd.lotus-notes&quot;);
      type.put(&quot;org&quot;, &quot;application&#x2F;vnd.lotus-organizer&quot;);
      type.put(&quot;scm&quot;, &quot;application&#x2F;vnd.lotus-screencam&quot;);
      type.put(&quot;lwp&quot;, &quot;application&#x2F;vnd.lotus-wordpro&quot;);
      type.put(&quot;portpkg&quot;, &quot;application&#x2F;vnd.macports.portpkg&quot;);
      type.put(&quot;mcd&quot;, &quot;application&#x2F;vnd.mcd&quot;);
      type.put(&quot;mc1&quot;, &quot;application&#x2F;vnd.medcalcdata&quot;);
      type.put(&quot;cdkey&quot;, &quot;application&#x2F;vnd.mediastation.cdkey&quot;);
      type.put(&quot;mwf&quot;, &quot;application&#x2F;vnd.mfer&quot;);
      type.put(&quot;mfm&quot;, &quot;application&#x2F;vnd.mfmp&quot;);
      type.put(&quot;flo&quot;, &quot;application&#x2F;vnd.micrografx.flo&quot;);
      type.put(&quot;igx&quot;, &quot;application&#x2F;vnd.micrografx.igx&quot;);
      type.put(&quot;mif&quot;, &quot;application&#x2F;vnd.mif&quot;);
      type.put(&quot;daf&quot;, &quot;application&#x2F;vnd.mobius.daf&quot;);
      type.put(&quot;dis&quot;, &quot;application&#x2F;vnd.mobius.dis&quot;);
      type.put(&quot;mbk&quot;, &quot;application&#x2F;vnd.mobius.mbk&quot;);
      type.put(&quot;mqy&quot;, &quot;application&#x2F;vnd.mobius.mqy&quot;);
      type.put(&quot;msl&quot;, &quot;application&#x2F;vnd.mobius.msl&quot;);
      type.put(&quot;plc&quot;, &quot;application&#x2F;vnd.mobius.plc&quot;);
      type.put(&quot;txf&quot;, &quot;application&#x2F;vnd.mobius.txf&quot;);
      type.put(&quot;mpn&quot;, &quot;application&#x2F;vnd.mophun.application&quot;);
      type.put(&quot;mpc&quot;, &quot;application&#x2F;vnd.mophun.certificate&quot;);
      type.put(&quot;xul&quot;, &quot;application&#x2F;vnd.mozilla.xul+xml&quot;);
      type.put(&quot;cil&quot;, &quot;application&#x2F;vnd.ms-artgalry&quot;);
      type.put(&quot;cab&quot;, &quot;application&#x2F;vnd.ms-cab-compressed&quot;);
      type.put(&quot;xls&quot;, &quot;application&#x2F;vnd.ms-excel&quot;);
      type.put(&quot;xlm&quot;, &quot;application&#x2F;vnd.ms-excel&quot;);
      type.put(&quot;xla&quot;, &quot;application&#x2F;vnd.ms-excel&quot;);
      type.put(&quot;xlc&quot;, &quot;application&#x2F;vnd.ms-excel&quot;);
      type.put(&quot;xlt&quot;, &quot;application&#x2F;vnd.ms-excel&quot;);
      type.put(&quot;xlw&quot;, &quot;application&#x2F;vnd.ms-excel&quot;);
      type.put(&quot;xlam&quot;, &quot;application&#x2F;vnd.ms-excel.addin.macroenabled.12&quot;);
      type.put(&quot;xlsb&quot;, &quot;application&#x2F;vnd.ms-excel.sheet.binary.macroenabled.12&quot;);
      type.put(&quot;xlsm&quot;, &quot;application&#x2F;vnd.ms-excel.sheet.macroenabled.12&quot;);
      type.put(&quot;xltm&quot;, &quot;application&#x2F;vnd.ms-excel.template.macroenabled.12&quot;);
      type.put(&quot;eot&quot;, &quot;application&#x2F;vnd.ms-fontobject&quot;);
      type.put(&quot;chm&quot;, &quot;application&#x2F;vnd.ms-htmlhelp&quot;);
      type.put(&quot;ims&quot;, &quot;application&#x2F;vnd.ms-ims&quot;);
      type.put(&quot;lrm&quot;, &quot;application&#x2F;vnd.ms-lrm&quot;);
      type.put(&quot;thmx&quot;, &quot;application&#x2F;vnd.ms-officetheme&quot;);
      type.put(&quot;cat&quot;, &quot;application&#x2F;vnd.ms-pki.seccat&quot;);
      type.put(&quot;stl&quot;, &quot;application&#x2F;vnd.ms-pki.stl&quot;);
      type.put(&quot;ppt&quot;, &quot;application&#x2F;vnd.ms-powerpoint&quot;);
      type.put(&quot;pps&quot;, &quot;application&#x2F;vnd.ms-powerpoint&quot;);
      type.put(&quot;pot&quot;, &quot;application&#x2F;vnd.ms-powerpoint&quot;);
      type.put(&quot;ppam&quot;, &quot;application&#x2F;vnd.ms-powerpoint.addin.macroenabled.12&quot;);
      type.put(&quot;pptm&quot;, &quot;application&#x2F;vnd.ms-powerpoint.presentation.macroenabled.12&quot;);
      type.put(&quot;sldm&quot;, &quot;application&#x2F;vnd.ms-powerpoint.slide.macroenabled.12&quot;);
      type.put(&quot;ppsm&quot;, &quot;application&#x2F;vnd.ms-powerpoint.slideshow.macroenabled.12&quot;);
      type.put(&quot;potm&quot;, &quot;application&#x2F;vnd.ms-powerpoint.template.macroenabled.12&quot;);
      type.put(&quot;mpp&quot;, &quot;application&#x2F;vnd.ms-project&quot;);
      type.put(&quot;mpt&quot;, &quot;application&#x2F;vnd.ms-project&quot;);
      type.put(&quot;docm&quot;, &quot;application&#x2F;vnd.ms-word.document.macroenabled.12&quot;);
      type.put(&quot;dotm&quot;, &quot;application&#x2F;vnd.ms-word.template.macroenabled.12&quot;);
      type.put(&quot;wps&quot;, &quot;application&#x2F;vnd.ms-works&quot;);
      type.put(&quot;wks&quot;, &quot;application&#x2F;vnd.ms-works&quot;);
      type.put(&quot;wcm&quot;, &quot;application&#x2F;vnd.ms-works&quot;);
      type.put(&quot;wdb&quot;, &quot;application&#x2F;vnd.ms-works&quot;);
      type.put(&quot;wpl&quot;, &quot;application&#x2F;vnd.ms-wpl&quot;);
      type.put(&quot;xps&quot;, &quot;application&#x2F;vnd.ms-xpsdocument&quot;);
      type.put(&quot;mseq&quot;, &quot;application&#x2F;vnd.mseq&quot;);
      type.put(&quot;mus&quot;, &quot;application&#x2F;vnd.musician&quot;);
      type.put(&quot;msty&quot;, &quot;application&#x2F;vnd.muvee.style&quot;);
      type.put(&quot;taglet&quot;, &quot;application&#x2F;vnd.mynfc&quot;);
      type.put(&quot;nlu&quot;, &quot;application&#x2F;vnd.neurolanguage.nlu&quot;);
      type.put(&quot;ntf&quot;, &quot;application&#x2F;vnd.nitf&quot;);
      type.put(&quot;nitf&quot;, &quot;application&#x2F;vnd.nitf&quot;);
      type.put(&quot;nnd&quot;, &quot;application&#x2F;vnd.noblenet-directory&quot;);
      type.put(&quot;nns&quot;, &quot;application&#x2F;vnd.noblenet-sealer&quot;);
      type.put(&quot;nnw&quot;, &quot;application&#x2F;vnd.noblenet-web&quot;);
      type.put(&quot;ngdat&quot;, &quot;application&#x2F;vnd.nokia.n-gage.data&quot;);
      type.put(&quot;rpst&quot;, &quot;application&#x2F;vnd.nokia.radio-preset&quot;);
      type.put(&quot;rpss&quot;, &quot;application&#x2F;vnd.nokia.radio-presets&quot;);
      type.put(&quot;edm&quot;, &quot;application&#x2F;vnd.novadigm.edm&quot;);
      type.put(&quot;edx&quot;, &quot;application&#x2F;vnd.novadigm.edx&quot;);
      type.put(&quot;ext&quot;, &quot;application&#x2F;vnd.novadigm.ext&quot;);
      type.put(&quot;odc&quot;, &quot;application&#x2F;vnd.oasis.opendocument.chart&quot;);
      type.put(&quot;otc&quot;, &quot;application&#x2F;vnd.oasis.opendocument.chart-template&quot;);
      type.put(&quot;odb&quot;, &quot;application&#x2F;vnd.oasis.opendocument.database&quot;);
      type.put(&quot;odf&quot;, &quot;application&#x2F;vnd.oasis.opendocument.formula&quot;);
      type.put(&quot;odft&quot;, &quot;application&#x2F;vnd.oasis.opendocument.formula-template&quot;);
      type.put(&quot;odg&quot;, &quot;application&#x2F;vnd.oasis.opendocument.graphics&quot;);
      type.put(&quot;otg&quot;, &quot;application&#x2F;vnd.oasis.opendocument.graphics-template&quot;);
      type.put(&quot;odi&quot;, &quot;application&#x2F;vnd.oasis.opendocument.image&quot;);
      type.put(&quot;oti&quot;, &quot;application&#x2F;vnd.oasis.opendocument.image-template&quot;);
      type.put(&quot;odp&quot;, &quot;application&#x2F;vnd.oasis.opendocument.presentation&quot;);
      type.put(&quot;otp&quot;, &quot;application&#x2F;vnd.oasis.opendocument.presentation-template&quot;);
      type.put(&quot;ods&quot;, &quot;application&#x2F;vnd.oasis.opendocument.spreadsheet&quot;);
      type.put(&quot;ots&quot;, &quot;application&#x2F;vnd.oasis.opendocument.spreadsheet-template&quot;);
      type.put(&quot;odt&quot;, &quot;application&#x2F;vnd.oasis.opendocument.text&quot;);
      type.put(&quot;odm&quot;, &quot;application&#x2F;vnd.oasis.opendocument.text-master&quot;);
      type.put(&quot;ott&quot;, &quot;application&#x2F;vnd.oasis.opendocument.text-template&quot;);
      type.put(&quot;oth&quot;, &quot;application&#x2F;vnd.oasis.opendocument.text-web&quot;);
      type.put(&quot;xo&quot;, &quot;application&#x2F;vnd.olpc-sugar&quot;);
      type.put(&quot;dd2&quot;, &quot;application&#x2F;vnd.oma.dd2+xml&quot;);
      type.put(&quot;oxt&quot;, &quot;application&#x2F;vnd.openofficeorg.extension&quot;);
      type.put(&quot;pptx&quot;, &quot;application&#x2F;vnd.openxmlformats-officedocument.presentationml.presentation&quot;);
      type.put(&quot;sldx&quot;, &quot;application&#x2F;vnd.openxmlformats-officedocument.presentationml.slide&quot;);
      type.put(&quot;ppsx&quot;, &quot;application&#x2F;vnd.openxmlformats-officedocument.presentationml.slideshow&quot;);
      type.put(&quot;potx&quot;, &quot;application&#x2F;vnd.openxmlformats-officedocument.presentationml.template&quot;);
      type.put(&quot;xlsx&quot;, &quot;application&#x2F;vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;);
      type.put(&quot;xltx&quot;, &quot;application&#x2F;vnd.openxmlformats-officedocument.spreadsheetml.template&quot;);
      type.put(&quot;docx&quot;, &quot;application&#x2F;vnd.openxmlformats-officedocument.wordprocessingml.document&quot;);
      type.put(&quot;dotx&quot;, &quot;application&#x2F;vnd.openxmlformats-officedocument.wordprocessingml.template&quot;);
      type.put(&quot;mgp&quot;, &quot;application&#x2F;vnd.osgeo.mapguide.package&quot;);
      type.put(&quot;dp&quot;, &quot;application&#x2F;vnd.osgi.dp&quot;);
      type.put(&quot;esa&quot;, &quot;application&#x2F;vnd.osgi.subsystem&quot;);
      type.put(&quot;pdb&quot;, &quot;application&#x2F;vnd.palm&quot;);
      type.put(&quot;pqa&quot;, &quot;application&#x2F;vnd.palm&quot;);
      type.put(&quot;oprc&quot;, &quot;application&#x2F;vnd.palm&quot;);
      type.put(&quot;paw&quot;, &quot;application&#x2F;vnd.pawaafile&quot;);
      type.put(&quot;str&quot;, &quot;application&#x2F;vnd.pg.format&quot;);
      type.put(&quot;ei6&quot;, &quot;application&#x2F;vnd.pg.osasli&quot;);
      type.put(&quot;efif&quot;, &quot;application&#x2F;vnd.picsel&quot;);
      type.put(&quot;wg&quot;, &quot;application&#x2F;vnd.pmi.widget&quot;);
      type.put(&quot;plf&quot;, &quot;application&#x2F;vnd.pocketlearn&quot;);
      type.put(&quot;pbd&quot;, &quot;application&#x2F;vnd.powerbuilder6&quot;);
      type.put(&quot;box&quot;, &quot;application&#x2F;vnd.previewsystems.box&quot;);
      type.put(&quot;mgz&quot;, &quot;application&#x2F;vnd.proteus.magazine&quot;);
      type.put(&quot;qps&quot;, &quot;application&#x2F;vnd.publishare-delta-tree&quot;);
      type.put(&quot;ptid&quot;, &quot;application&#x2F;vnd.pvi.ptid1&quot;);
      type.put(&quot;qxd&quot;, &quot;application&#x2F;vnd.quark.quarkxpress&quot;);
      type.put(&quot;qxt&quot;, &quot;application&#x2F;vnd.quark.quarkxpress&quot;);
      type.put(&quot;qwd&quot;, &quot;application&#x2F;vnd.quark.quarkxpress&quot;);
      type.put(&quot;qwt&quot;, &quot;application&#x2F;vnd.quark.quarkxpress&quot;);
      type.put(&quot;qxl&quot;, &quot;application&#x2F;vnd.quark.quarkxpress&quot;);
      type.put(&quot;qxb&quot;, &quot;application&#x2F;vnd.quark.quarkxpress&quot;);
      type.put(&quot;bed&quot;, &quot;application&#x2F;vnd.realvnc.bed&quot;);
      type.put(&quot;mxl&quot;, &quot;application&#x2F;vnd.recordare.musicxml&quot;);
      type.put(&quot;musicxml&quot;, &quot;application&#x2F;vnd.recordare.musicxml+xml&quot;);
      type.put(&quot;cryptonote&quot;, &quot;application&#x2F;vnd.rig.cryptonote&quot;);
      type.put(&quot;cod&quot;, &quot;application&#x2F;vnd.rim.cod&quot;);
      type.put(&quot;rm&quot;, &quot;application&#x2F;vnd.rn-realmedia&quot;);
      type.put(&quot;rmvb&quot;, &quot;application&#x2F;vnd.rn-realmedia-vbr&quot;);
      type.put(&quot;link66&quot;, &quot;application&#x2F;vnd.route66.link66+xml&quot;);
      type.put(&quot;st&quot;, &quot;application&#x2F;vnd.sailingtracker.track&quot;);
      type.put(&quot;see&quot;, &quot;application&#x2F;vnd.seemail&quot;);
      type.put(&quot;sema&quot;, &quot;application&#x2F;vnd.sema&quot;);
      type.put(&quot;semd&quot;, &quot;application&#x2F;vnd.semd&quot;);
      type.put(&quot;semf&quot;, &quot;application&#x2F;vnd.semf&quot;);
      type.put(&quot;ifm&quot;, &quot;application&#x2F;vnd.shana.informed.formdata&quot;);
      type.put(&quot;itp&quot;, &quot;application&#x2F;vnd.shana.informed.formtemplate&quot;);
      type.put(&quot;iif&quot;, &quot;application&#x2F;vnd.shana.informed.interchange&quot;);
      type.put(&quot;ipk&quot;, &quot;application&#x2F;vnd.shana.informed.package&quot;);
      type.put(&quot;twd&quot;, &quot;application&#x2F;vnd.simtech-mindmapper&quot;);
      type.put(&quot;twds&quot;, &quot;application&#x2F;vnd.simtech-mindmapper&quot;);
      type.put(&quot;mmf&quot;, &quot;application&#x2F;vnd.smaf&quot;);
      type.put(&quot;teacher&quot;, &quot;application&#x2F;vnd.smart.teacher&quot;);
      type.put(&quot;sdkm&quot;, &quot;application&#x2F;vnd.solent.sdkm+xml&quot;);
      type.put(&quot;sdkd&quot;, &quot;application&#x2F;vnd.solent.sdkm+xml&quot;);
      type.put(&quot;dxp&quot;, &quot;application&#x2F;vnd.spotfire.dxp&quot;);
      type.put(&quot;sfs&quot;, &quot;application&#x2F;vnd.spotfire.sfs&quot;);
      type.put(&quot;sdc&quot;, &quot;application&#x2F;vnd.stardivision.calc&quot;);
      type.put(&quot;sda&quot;, &quot;application&#x2F;vnd.stardivision.draw&quot;);
      type.put(&quot;sdd&quot;, &quot;application&#x2F;vnd.stardivision.impress&quot;);
      type.put(&quot;smf&quot;, &quot;application&#x2F;vnd.stardivision.math&quot;);
      type.put(&quot;sdw&quot;, &quot;application&#x2F;vnd.stardivision.writer&quot;);
      type.put(&quot;vor&quot;, &quot;application&#x2F;vnd.stardivision.writer&quot;);
      type.put(&quot;sgl&quot;, &quot;application&#x2F;vnd.stardivision.writer-global&quot;);
      type.put(&quot;smzip&quot;, &quot;application&#x2F;vnd.stepmania.package&quot;);
      type.put(&quot;sm&quot;, &quot;application&#x2F;vnd.stepmania.stepchart&quot;);
      type.put(&quot;sxc&quot;, &quot;application&#x2F;vnd.sun.xml.calc&quot;);
      type.put(&quot;stc&quot;, &quot;application&#x2F;vnd.sun.xml.calc.template&quot;);
      type.put(&quot;sxd&quot;, &quot;application&#x2F;vnd.sun.xml.draw&quot;);
      type.put(&quot;std&quot;, &quot;application&#x2F;vnd.sun.xml.draw.template&quot;);
      type.put(&quot;sxi&quot;, &quot;application&#x2F;vnd.sun.xml.impress&quot;);
      type.put(&quot;sti&quot;, &quot;application&#x2F;vnd.sun.xml.impress.template&quot;);
      type.put(&quot;sxm&quot;, &quot;application&#x2F;vnd.sun.xml.math&quot;);
      type.put(&quot;sxw&quot;, &quot;application&#x2F;vnd.sun.xml.writer&quot;);
      type.put(&quot;sxg&quot;, &quot;application&#x2F;vnd.sun.xml.writer.global&quot;);
      type.put(&quot;stw&quot;, &quot;application&#x2F;vnd.sun.xml.writer.template&quot;);
      type.put(&quot;sus&quot;, &quot;application&#x2F;vnd.sus-calendar&quot;);
      type.put(&quot;susp&quot;, &quot;application&#x2F;vnd.sus-calendar&quot;);
      type.put(&quot;svd&quot;, &quot;application&#x2F;vnd.svd&quot;);
      type.put(&quot;sis&quot;, &quot;application&#x2F;vnd.symbian.install&quot;);
      type.put(&quot;sisx&quot;, &quot;application&#x2F;vnd.symbian.install&quot;);
      type.put(&quot;xsm&quot;, &quot;application&#x2F;vnd.syncml+xml&quot;);
      type.put(&quot;bdm&quot;, &quot;application&#x2F;vnd.syncml.dm+wbxml&quot;);
      type.put(&quot;xdm&quot;, &quot;application&#x2F;vnd.syncml.dm+xml&quot;);
      type.put(&quot;tao&quot;, &quot;application&#x2F;vnd.tao.intent-module-archive&quot;);
      type.put(&quot;pcap&quot;, &quot;application&#x2F;vnd.tcpdump.pcap&quot;);
      type.put(&quot;cap&quot;, &quot;application&#x2F;vnd.tcpdump.pcap&quot;);
      type.put(&quot;dmp&quot;, &quot;application&#x2F;vnd.tcpdump.pcap&quot;);
      type.put(&quot;tmo&quot;, &quot;application&#x2F;vnd.tmobile-livetv&quot;);
      type.put(&quot;tpt&quot;, &quot;application&#x2F;vnd.trid.tpt&quot;);
      type.put(&quot;mxs&quot;, &quot;application&#x2F;vnd.triscape.mxs&quot;);
      type.put(&quot;tra&quot;, &quot;application&#x2F;vnd.trueapp&quot;);
      type.put(&quot;ufd&quot;, &quot;application&#x2F;vnd.ufdl&quot;);
      type.put(&quot;ufdl&quot;, &quot;application&#x2F;vnd.ufdl&quot;);
      type.put(&quot;utz&quot;, &quot;application&#x2F;vnd.uiq.theme&quot;);
      type.put(&quot;umj&quot;, &quot;application&#x2F;vnd.umajin&quot;);
      type.put(&quot;unityweb&quot;, &quot;application&#x2F;vnd.unity&quot;);
      type.put(&quot;uoml&quot;, &quot;application&#x2F;vnd.uoml+xml&quot;);
      type.put(&quot;vcx&quot;, &quot;application&#x2F;vnd.vcx&quot;);
      type.put(&quot;vsd&quot;, &quot;application&#x2F;vnd.visio&quot;);
      type.put(&quot;vst&quot;, &quot;application&#x2F;vnd.visio&quot;);
      type.put(&quot;vss&quot;, &quot;application&#x2F;vnd.visio&quot;);
      type.put(&quot;vsw&quot;, &quot;application&#x2F;vnd.visio&quot;);
      type.put(&quot;vis&quot;, &quot;application&#x2F;vnd.visionary&quot;);
      type.put(&quot;vsf&quot;, &quot;application&#x2F;vnd.vsf&quot;);
      type.put(&quot;wbxml&quot;, &quot;application&#x2F;vnd.wap.wbxml&quot;);
      type.put(&quot;wmlc&quot;, &quot;application&#x2F;vnd.wap.wmlc&quot;);
      type.put(&quot;wmlsc&quot;, &quot;application&#x2F;vnd.wap.wmlscriptc&quot;);
      type.put(&quot;wtb&quot;, &quot;application&#x2F;vnd.webturbo&quot;);
      type.put(&quot;nbp&quot;, &quot;application&#x2F;vnd.wolfram.player&quot;);
      type.put(&quot;wpd&quot;, &quot;application&#x2F;vnd.wordperfect&quot;);
      type.put(&quot;wqd&quot;, &quot;application&#x2F;vnd.wqd&quot;);
      type.put(&quot;stf&quot;, &quot;application&#x2F;vnd.wt.stf&quot;);
      type.put(&quot;xar&quot;, &quot;application&#x2F;vnd.xara&quot;);
      type.put(&quot;xfdl&quot;, &quot;application&#x2F;vnd.xfdl&quot;);
      type.put(&quot;hvd&quot;, &quot;application&#x2F;vnd.yamaha.hv-dic&quot;);
      type.put(&quot;hvs&quot;, &quot;application&#x2F;vnd.yamaha.hv-script&quot;);
      type.put(&quot;hvp&quot;, &quot;application&#x2F;vnd.yamaha.hv-voice&quot;);
      type.put(&quot;osf&quot;, &quot;application&#x2F;vnd.yamaha.openscoreformat&quot;);
      type.put(&quot;osfpvg&quot;, &quot;application&#x2F;vnd.yamaha.openscoreformat.osfpvg+xml&quot;);
      type.put(&quot;saf&quot;, &quot;application&#x2F;vnd.yamaha.smaf-audio&quot;);
      type.put(&quot;spf&quot;, &quot;application&#x2F;vnd.yamaha.smaf-phrase&quot;);
      type.put(&quot;cmp&quot;, &quot;application&#x2F;vnd.yellowriver-custom-menu&quot;);
      type.put(&quot;zir&quot;, &quot;application&#x2F;vnd.zul&quot;);
      type.put(&quot;zirz&quot;, &quot;application&#x2F;vnd.zul&quot;);
      type.put(&quot;zaz&quot;, &quot;application&#x2F;vnd.zzazz.deck+xml&quot;);
      type.put(&quot;vxml&quot;, &quot;application&#x2F;voicexml+xml&quot;);
      type.put(&quot;wgt&quot;, &quot;application&#x2F;widget&quot;);
      type.put(&quot;hlp&quot;, &quot;application&#x2F;winhlp&quot;);
      type.put(&quot;wsdl&quot;, &quot;application&#x2F;wsdl+xml&quot;);
      type.put(&quot;wspolicy&quot;, &quot;application&#x2F;wspolicy+xml&quot;);
      type.put(&quot;7z&quot;, &quot;application&#x2F;x-7z-compressed&quot;);
      type.put(&quot;abw&quot;, &quot;application&#x2F;x-abiword&quot;);
      type.put(&quot;ace&quot;, &quot;application&#x2F;x-ace-compressed&quot;);
      type.put(&quot;dmg&quot;, &quot;application&#x2F;x-apple-diskimage&quot;);
      type.put(&quot;aab&quot;, &quot;application&#x2F;x-authorware-bin&quot;);
      type.put(&quot;x32&quot;, &quot;application&#x2F;x-authorware-bin&quot;);
      type.put(&quot;u32&quot;, &quot;application&#x2F;x-authorware-bin&quot;);
      type.put(&quot;vox&quot;, &quot;application&#x2F;x-authorware-bin&quot;);
      type.put(&quot;aam&quot;, &quot;application&#x2F;x-authorware-map&quot;);
      type.put(&quot;aas&quot;, &quot;application&#x2F;x-authorware-seg&quot;);
      type.put(&quot;bcpio&quot;, &quot;application&#x2F;x-bcpio&quot;);
      type.put(&quot;torrent&quot;, &quot;application&#x2F;x-bittorrent&quot;);
      type.put(&quot;blb&quot;, &quot;application&#x2F;x-blorb&quot;);
      type.put(&quot;blorb&quot;, &quot;application&#x2F;x-blorb&quot;);
      type.put(&quot;bz&quot;, &quot;application&#x2F;x-bzip&quot;);
      type.put(&quot;bz2&quot;, &quot;application&#x2F;x-bzip2&quot;);
      type.put(&quot;boz&quot;, &quot;application&#x2F;x-bzip2&quot;);
      type.put(&quot;cbr&quot;, &quot;application&#x2F;x-cbr&quot;);
      type.put(&quot;cba&quot;, &quot;application&#x2F;x-cbr&quot;);
      type.put(&quot;cbt&quot;, &quot;application&#x2F;x-cbr&quot;);
      type.put(&quot;cbz&quot;, &quot;application&#x2F;x-cbr&quot;);
      type.put(&quot;cb7&quot;, &quot;application&#x2F;x-cbr&quot;);
      type.put(&quot;vcd&quot;, &quot;application&#x2F;x-cdlink&quot;);
      type.put(&quot;cfs&quot;, &quot;application&#x2F;x-cfs-compressed&quot;);
      type.put(&quot;chat&quot;, &quot;application&#x2F;x-chat&quot;);
      type.put(&quot;pgn&quot;, &quot;application&#x2F;x-chess-pgn&quot;);
      type.put(&quot;crx&quot;, &quot;application&#x2F;x-chrome-extension&quot;);
      type.put(&quot;nsc&quot;, &quot;application&#x2F;x-conference&quot;);
      type.put(&quot;cpio&quot;, &quot;application&#x2F;x-cpio&quot;);
      type.put(&quot;csh&quot;, &quot;application&#x2F;x-csh&quot;);
      type.put(&quot;deb&quot;, &quot;application&#x2F;x-debian-package&quot;);
      type.put(&quot;udeb&quot;, &quot;application&#x2F;x-debian-package&quot;);
      type.put(&quot;dgc&quot;, &quot;application&#x2F;x-dgc-compressed&quot;);
      type.put(&quot;dir&quot;, &quot;application&#x2F;x-director&quot;);
      type.put(&quot;dcr&quot;, &quot;application&#x2F;x-director&quot;);
      type.put(&quot;dxr&quot;, &quot;application&#x2F;x-director&quot;);
      type.put(&quot;cst&quot;, &quot;application&#x2F;x-director&quot;);
      type.put(&quot;cct&quot;, &quot;application&#x2F;x-director&quot;);
      type.put(&quot;cxt&quot;, &quot;application&#x2F;x-director&quot;);
      type.put(&quot;w3d&quot;, &quot;application&#x2F;x-director&quot;);
      type.put(&quot;fgd&quot;, &quot;application&#x2F;x-director&quot;);
      type.put(&quot;swa&quot;, &quot;application&#x2F;x-director&quot;);
      type.put(&quot;wad&quot;, &quot;application&#x2F;x-doom&quot;);
      type.put(&quot;ncx&quot;, &quot;application&#x2F;x-dtbncx+xml&quot;);
      type.put(&quot;dtb&quot;, &quot;application&#x2F;x-dtbook+xml&quot;);
      type.put(&quot;res&quot;, &quot;application&#x2F;x-dtbresource+xml&quot;);
      type.put(&quot;dvi&quot;, &quot;application&#x2F;x-dvi&quot;);
      type.put(&quot;evy&quot;, &quot;application&#x2F;x-envoy&quot;);
      type.put(&quot;eva&quot;, &quot;application&#x2F;x-eva&quot;);
      type.put(&quot;bdf&quot;, &quot;application&#x2F;x-font-bdf&quot;);
      type.put(&quot;gsf&quot;, &quot;application&#x2F;x-font-ghostscript&quot;);
      type.put(&quot;psf&quot;, &quot;application&#x2F;x-font-linux-psf&quot;);
      type.put(&quot;otf&quot;, &quot;application&#x2F;x-font-otf&quot;);
      type.put(&quot;pcf&quot;, &quot;application&#x2F;x-font-pcf&quot;);
      type.put(&quot;snf&quot;, &quot;application&#x2F;x-font-snf&quot;);
      type.put(&quot;ttf&quot;, &quot;application&#x2F;x-font-ttf&quot;);
      type.put(&quot;ttc&quot;, &quot;application&#x2F;x-font-ttf&quot;);
      type.put(&quot;pfa&quot;, &quot;application&#x2F;x-font-type1&quot;);
      type.put(&quot;pfb&quot;, &quot;application&#x2F;x-font-type1&quot;);
      type.put(&quot;pfm&quot;, &quot;application&#x2F;x-font-type1&quot;);
      type.put(&quot;afm&quot;, &quot;application&#x2F;x-font-type1&quot;);
      type.put(&quot;arc&quot;, &quot;application&#x2F;x-freearc&quot;);
      type.put(&quot;spl&quot;, &quot;application&#x2F;x-futuresplash&quot;);
      type.put(&quot;gca&quot;, &quot;application&#x2F;x-gca-compressed&quot;);
      type.put(&quot;ulx&quot;, &quot;application&#x2F;x-glulx&quot;);
      type.put(&quot;gnumeric&quot;, &quot;application&#x2F;x-gnumeric&quot;);
      type.put(&quot;gramps&quot;, &quot;application&#x2F;x-gramps-xml&quot;);
      type.put(&quot;gtar&quot;, &quot;application&#x2F;x-gtar&quot;);
      type.put(&quot;hdf&quot;, &quot;application&#x2F;x-hdf&quot;);
      type.put(&quot;install&quot;, &quot;application&#x2F;x-install-instructions&quot;);
      type.put(&quot;iso&quot;, &quot;application&#x2F;x-iso9660-image&quot;);
      type.put(&quot;jnlp&quot;, &quot;application&#x2F;x-java-jnlp-file&quot;);
      type.put(&quot;latex&quot;, &quot;application&#x2F;x-latex&quot;);
      type.put(&quot;luac&quot;, &quot;application&#x2F;x-lua-bytecode&quot;);
      type.put(&quot;lzh&quot;, &quot;application&#x2F;x-lzh-compressed&quot;);
      type.put(&quot;lha&quot;, &quot;application&#x2F;x-lzh-compressed&quot;);
      type.put(&quot;mie&quot;, &quot;application&#x2F;x-mie&quot;);
      type.put(&quot;prc&quot;, &quot;application&#x2F;x-mobipocket-ebook&quot;);
      type.put(&quot;mobi&quot;, &quot;application&#x2F;x-mobipocket-ebook&quot;);
      type.put(&quot;application&quot;, &quot;application&#x2F;x-ms-application&quot;);
      type.put(&quot;lnk&quot;, &quot;application&#x2F;x-ms-shortcut&quot;);
      type.put(&quot;wmd&quot;, &quot;application&#x2F;x-ms-wmd&quot;);
      type.put(&quot;wmz&quot;, &quot;application&#x2F;x-ms-wmz&quot;);
      type.put(&quot;xbap&quot;, &quot;application&#x2F;x-ms-xbap&quot;);
      type.put(&quot;mdb&quot;, &quot;application&#x2F;x-msaccess&quot;);
      type.put(&quot;obd&quot;, &quot;application&#x2F;x-msbinder&quot;);
      type.put(&quot;crd&quot;, &quot;application&#x2F;x-mscardfile&quot;);
      type.put(&quot;clp&quot;, &quot;application&#x2F;x-msclip&quot;);
      type.put(&quot;exe&quot;, &quot;application&#x2F;x-msdownload&quot;);
      type.put(&quot;dll&quot;, &quot;application&#x2F;x-msdownload&quot;);
      type.put(&quot;com&quot;, &quot;application&#x2F;x-msdownload&quot;);
      type.put(&quot;bat&quot;, &quot;application&#x2F;x-msdownload&quot;);
      type.put(&quot;msi&quot;, &quot;application&#x2F;x-msdownload&quot;);
      type.put(&quot;mvb&quot;, &quot;application&#x2F;x-msmediaview&quot;);
      type.put(&quot;m13&quot;, &quot;application&#x2F;x-msmediaview&quot;);
      type.put(&quot;m14&quot;, &quot;application&#x2F;x-msmediaview&quot;);
      type.put(&quot;wmf&quot;, &quot;application&#x2F;x-msmetafile&quot;);
      type.put(&quot;wmz&quot;, &quot;application&#x2F;x-msmetafile&quot;);
      type.put(&quot;emf&quot;, &quot;application&#x2F;x-msmetafile&quot;);
      type.put(&quot;emz&quot;, &quot;application&#x2F;x-msmetafile&quot;);
      type.put(&quot;mny&quot;, &quot;application&#x2F;x-msmoney&quot;);
      type.put(&quot;pub&quot;, &quot;application&#x2F;x-mspublisher&quot;);
      type.put(&quot;scd&quot;, &quot;application&#x2F;x-msschedule&quot;);
      type.put(&quot;trm&quot;, &quot;application&#x2F;x-msterminal&quot;);
      type.put(&quot;wri&quot;, &quot;application&#x2F;x-mswrite&quot;);
      type.put(&quot;nc&quot;, &quot;application&#x2F;x-netcdf&quot;);
      type.put(&quot;cdf&quot;, &quot;application&#x2F;x-netcdf&quot;);
      type.put(&quot;nzb&quot;, &quot;application&#x2F;x-nzb&quot;);
      type.put(&quot;p12&quot;, &quot;application&#x2F;x-pkcs12&quot;);
      type.put(&quot;pfx&quot;, &quot;application&#x2F;x-pkcs12&quot;);
      type.put(&quot;p7b&quot;, &quot;application&#x2F;x-pkcs7-certificates&quot;);
      type.put(&quot;spc&quot;, &quot;application&#x2F;x-pkcs7-certificates&quot;);
      type.put(&quot;p7r&quot;, &quot;application&#x2F;x-pkcs7-certreqresp&quot;);
      type.put(&quot;rar&quot;, &quot;application&#x2F;x-rar-compressed&quot;);
      type.put(&quot;ris&quot;, &quot;application&#x2F;x-research-info-systems&quot;);
      type.put(&quot;sh&quot;, &quot;application&#x2F;x-sh&quot;);
      type.put(&quot;shar&quot;, &quot;application&#x2F;x-shar&quot;);
      type.put(&quot;swf&quot;, &quot;application&#x2F;x-shockwave-flash&quot;);
      type.put(&quot;xap&quot;, &quot;application&#x2F;x-silverlight-app&quot;);
      type.put(&quot;sql&quot;, &quot;application&#x2F;x-sql&quot;);
      type.put(&quot;sit&quot;, &quot;application&#x2F;x-stuffit&quot;);
      type.put(&quot;sitx&quot;, &quot;application&#x2F;x-stuffitx&quot;);
      type.put(&quot;srt&quot;, &quot;application&#x2F;x-subrip&quot;);
      type.put(&quot;sv4cpio&quot;, &quot;application&#x2F;x-sv4cpio&quot;);
      type.put(&quot;sv4crc&quot;, &quot;application&#x2F;x-sv4crc&quot;);
      type.put(&quot;t3&quot;, &quot;application&#x2F;x-t3vm-image&quot;);
      type.put(&quot;gam&quot;, &quot;application&#x2F;x-tads&quot;);
      type.put(&quot;tar&quot;, &quot;application&#x2F;x-tar&quot;);
      type.put(&quot;tcl&quot;, &quot;application&#x2F;x-tcl&quot;);
      type.put(&quot;tex&quot;, &quot;application&#x2F;x-tex&quot;);
      type.put(&quot;tfm&quot;, &quot;application&#x2F;x-tex-tfm&quot;);
      type.put(&quot;texinfo&quot;, &quot;application&#x2F;x-texinfo&quot;);
      type.put(&quot;texi&quot;, &quot;application&#x2F;x-texinfo&quot;);
      type.put(&quot;obj&quot;, &quot;application&#x2F;x-tgif&quot;);
      type.put(&quot;ustar&quot;, &quot;application&#x2F;x-ustar&quot;);
      type.put(&quot;src&quot;, &quot;application&#x2F;x-wais-source&quot;);
      type.put(&quot;webapp&quot;, &quot;application&#x2F;x-web-app-manifest+json&quot;);
      type.put(&quot;der&quot;, &quot;application&#x2F;x-x509-ca-cert&quot;);
      type.put(&quot;crt&quot;, &quot;application&#x2F;x-x509-ca-cert&quot;);
      type.put(&quot;fig&quot;, &quot;application&#x2F;x-xfig&quot;);
      type.put(&quot;xlf&quot;, &quot;application&#x2F;x-xliff+xml&quot;);
      type.put(&quot;xpi&quot;, &quot;application&#x2F;x-xpinstall&quot;);
      type.put(&quot;xz&quot;, &quot;application&#x2F;x-xz&quot;);
      type.put(&quot;z1&quot;, &quot;application&#x2F;x-zmachine&quot;);
      type.put(&quot;z2&quot;, &quot;application&#x2F;x-zmachine&quot;);
      type.put(&quot;z3&quot;, &quot;application&#x2F;x-zmachine&quot;);
      type.put(&quot;z4&quot;, &quot;application&#x2F;x-zmachine&quot;);
      type.put(&quot;z5&quot;, &quot;application&#x2F;x-zmachine&quot;);
      type.put(&quot;z6&quot;, &quot;application&#x2F;x-zmachine&quot;);
      type.put(&quot;z7&quot;, &quot;application&#x2F;x-zmachine&quot;);
      type.put(&quot;z8&quot;, &quot;application&#x2F;x-zmachine&quot;);
      type.put(&quot;xaml&quot;, &quot;application&#x2F;xaml+xml&quot;);
      type.put(&quot;xdf&quot;, &quot;application&#x2F;xcap-diff+xml&quot;);
      type.put(&quot;xenc&quot;, &quot;application&#x2F;xenc+xml&quot;);
      type.put(&quot;xhtml&quot;, &quot;application&#x2F;xhtml+xml&quot;);
      type.put(&quot;xht&quot;, &quot;application&#x2F;xhtml+xml&quot;);
      type.put(&quot;xml&quot;, &quot;application&#x2F;xml&quot;);
      type.put(&quot;xsl&quot;, &quot;application&#x2F;xml&quot;);
      type.put(&quot;xsd&quot;, &quot;application&#x2F;xml&quot;);
      type.put(&quot;dtd&quot;, &quot;application&#x2F;xml-dtd&quot;);
      type.put(&quot;xop&quot;, &quot;application&#x2F;xop+xml&quot;);
      type.put(&quot;xpl&quot;, &quot;application&#x2F;xproc+xml&quot;);
      type.put(&quot;xslt&quot;, &quot;application&#x2F;xslt+xml&quot;);
      type.put(&quot;xspf&quot;, &quot;application&#x2F;xspf+xml&quot;);
      type.put(&quot;mxml&quot;, &quot;application&#x2F;xv+xml&quot;);
      type.put(&quot;xhvml&quot;, &quot;application&#x2F;xv+xml&quot;);
      type.put(&quot;xvml&quot;, &quot;application&#x2F;xv+xml&quot;);
      type.put(&quot;xvm&quot;, &quot;application&#x2F;xv+xml&quot;);
      type.put(&quot;yang&quot;, &quot;application&#x2F;yang&quot;);
      type.put(&quot;yin&quot;, &quot;application&#x2F;yin+xml&quot;);
      type.put(&quot;zip&quot;, &quot;application&#x2F;zip&quot;);
      type.put(&quot;adp&quot;, &quot;audio&#x2F;adpcm&quot;);
      type.put(&quot;au&quot;, &quot;audio&#x2F;basic&quot;);
      type.put(&quot;snd&quot;, &quot;audio&#x2F;basic&quot;);
      type.put(&quot;mid&quot;, &quot;audio&#x2F;midi&quot;);
      type.put(&quot;midi&quot;, &quot;audio&#x2F;midi&quot;);
      type.put(&quot;kar&quot;, &quot;audio&#x2F;midi&quot;);
      type.put(&quot;rmi&quot;, &quot;audio&#x2F;midi&quot;);
      type.put(&quot;mp4a&quot;, &quot;audio&#x2F;mp4&quot;);
      type.put(&quot;m4a&quot;, &quot;audio&#x2F;mp4&quot;);
      type.put(&quot;mpga&quot;, &quot;audio&#x2F;mpeg&quot;);
      type.put(&quot;mp2&quot;, &quot;audio&#x2F;mpeg&quot;);
      type.put(&quot;mp2a&quot;, &quot;audio&#x2F;mpeg&quot;);
      type.put(&quot;mp3&quot;, &quot;audio&#x2F;mpeg&quot;);
      type.put(&quot;m2a&quot;, &quot;audio&#x2F;mpeg&quot;);
      type.put(&quot;m3a&quot;, &quot;audio&#x2F;mpeg&quot;);
      type.put(&quot;oga&quot;, &quot;audio&#x2F;ogg&quot;);
      type.put(&quot;ogg&quot;, &quot;audio&#x2F;ogg&quot;);
      type.put(&quot;spx&quot;, &quot;audio&#x2F;ogg&quot;);
      type.put(&quot;s3m&quot;, &quot;audio&#x2F;s3m&quot;);
      type.put(&quot;sil&quot;, &quot;audio&#x2F;silk&quot;);
      type.put(&quot;uva&quot;, &quot;audio&#x2F;vnd.dece.audio&quot;);
      type.put(&quot;uvva&quot;, &quot;audio&#x2F;vnd.dece.audio&quot;);
      type.put(&quot;eol&quot;, &quot;audio&#x2F;vnd.digital-winds&quot;);
      type.put(&quot;dra&quot;, &quot;audio&#x2F;vnd.dra&quot;);
      type.put(&quot;dts&quot;, &quot;audio&#x2F;vnd.dts&quot;);
      type.put(&quot;dtshd&quot;, &quot;audio&#x2F;vnd.dts.hd&quot;);
      type.put(&quot;lvp&quot;, &quot;audio&#x2F;vnd.lucent.voice&quot;);
      type.put(&quot;pya&quot;, &quot;audio&#x2F;vnd.ms-playready.media.pya&quot;);
      type.put(&quot;ecelp4800&quot;, &quot;audio&#x2F;vnd.nuera.ecelp4800&quot;);
      type.put(&quot;ecelp7470&quot;, &quot;audio&#x2F;vnd.nuera.ecelp7470&quot;);
      type.put(&quot;ecelp9600&quot;, &quot;audio&#x2F;vnd.nuera.ecelp9600&quot;);
      type.put(&quot;rip&quot;, &quot;audio&#x2F;vnd.rip&quot;);
      type.put(&quot;weba&quot;, &quot;audio&#x2F;webm&quot;);
      type.put(&quot;aac&quot;, &quot;audio&#x2F;x-aac&quot;);
      type.put(&quot;aif&quot;, &quot;audio&#x2F;x-aiff&quot;);
      type.put(&quot;aiff&quot;, &quot;audio&#x2F;x-aiff&quot;);
      type.put(&quot;aifc&quot;, &quot;audio&#x2F;x-aiff&quot;);
      type.put(&quot;caf&quot;, &quot;audio&#x2F;x-caf&quot;);
      type.put(&quot;flac&quot;, &quot;audio&#x2F;x-flac&quot;);
      type.put(&quot;mka&quot;, &quot;audio&#x2F;x-matroska&quot;);
      type.put(&quot;m3u&quot;, &quot;audio&#x2F;x-mpegurl&quot;);
      type.put(&quot;wax&quot;, &quot;audio&#x2F;x-ms-wax&quot;);
      type.put(&quot;wma&quot;, &quot;audio&#x2F;x-ms-wma&quot;);
      type.put(&quot;ram&quot;, &quot;audio&#x2F;x-pn-realaudio&quot;);
      type.put(&quot;ra&quot;, &quot;audio&#x2F;x-pn-realaudio&quot;);
      type.put(&quot;rmp&quot;, &quot;audio&#x2F;x-pn-realaudio-plugin&quot;);
      type.put(&quot;wav&quot;, &quot;audio&#x2F;x-wav&quot;);
      type.put(&quot;xm&quot;, &quot;audio&#x2F;xm&quot;);
      type.put(&quot;cdx&quot;, &quot;chemical&#x2F;x-cdx&quot;);
      type.put(&quot;cif&quot;, &quot;chemical&#x2F;x-cif&quot;);
      type.put(&quot;cmdf&quot;, &quot;chemical&#x2F;x-cmdf&quot;);
      type.put(&quot;cml&quot;, &quot;chemical&#x2F;x-cml&quot;);
      type.put(&quot;csml&quot;, &quot;chemical&#x2F;x-csml&quot;);
      type.put(&quot;xyz&quot;, &quot;chemical&#x2F;x-xyz&quot;);
      type.put(&quot;otf&quot;, &quot;font&#x2F;opentype&quot;);
      type.put(&quot;bmp&quot;, &quot;image&#x2F;bmp&quot;);
      type.put(&quot;cgm&quot;, &quot;image&#x2F;cgm&quot;);
      type.put(&quot;g3&quot;, &quot;image&#x2F;g3fax&quot;);
      type.put(&quot;gif&quot;, &quot;image&#x2F;gif&quot;);
      type.put(&quot;ief&quot;, &quot;image&#x2F;ief&quot;);
      type.put(&quot;jpeg&quot;, &quot;image&#x2F;jpeg&quot;);
      type.put(&quot;jpg&quot;, &quot;image&#x2F;jpeg&quot;);
      type.put(&quot;jpe&quot;, &quot;image&#x2F;jpeg&quot;);
      type.put(&quot;ktx&quot;, &quot;image&#x2F;ktx&quot;);
      type.put(&quot;png&quot;, &quot;image&#x2F;png&quot;);
      type.put(&quot;btif&quot;, &quot;image&#x2F;prs.btif&quot;);
      type.put(&quot;sgi&quot;, &quot;image&#x2F;sgi&quot;);
      type.put(&quot;svg&quot;, &quot;image&#x2F;svg+xml&quot;);
      type.put(&quot;svgz&quot;, &quot;image&#x2F;svg+xml&quot;);
      type.put(&quot;tiff&quot;, &quot;image&#x2F;tiff&quot;);
      type.put(&quot;tif&quot;, &quot;image&#x2F;tiff&quot;);
      type.put(&quot;psd&quot;, &quot;image&#x2F;vnd.adobe.photoshop&quot;);
      type.put(&quot;uvi&quot;, &quot;image&#x2F;vnd.dece.graphic&quot;);
      type.put(&quot;uvvi&quot;, &quot;image&#x2F;vnd.dece.graphic&quot;);
      type.put(&quot;uvg&quot;, &quot;image&#x2F;vnd.dece.graphic&quot;);
      type.put(&quot;uvvg&quot;, &quot;image&#x2F;vnd.dece.graphic&quot;);
      type.put(&quot;djvu&quot;, &quot;image&#x2F;vnd.djvu&quot;);
      type.put(&quot;djv&quot;, &quot;image&#x2F;vnd.djvu&quot;);
      type.put(&quot;sub&quot;, &quot;image&#x2F;vnd.dvb.subtitle&quot;);
      type.put(&quot;dwg&quot;, &quot;image&#x2F;vnd.dwg&quot;);
      type.put(&quot;dxf&quot;, &quot;image&#x2F;vnd.dxf&quot;);
      type.put(&quot;fbs&quot;, &quot;image&#x2F;vnd.fastbidsheet&quot;);
      type.put(&quot;fpx&quot;, &quot;image&#x2F;vnd.fpx&quot;);
      type.put(&quot;fst&quot;, &quot;image&#x2F;vnd.fst&quot;);
      type.put(&quot;mmr&quot;, &quot;image&#x2F;vnd.fujixerox.edmics-mmr&quot;);
      type.put(&quot;rlc&quot;, &quot;image&#x2F;vnd.fujixerox.edmics-rlc&quot;);
      type.put(&quot;mdi&quot;, &quot;image&#x2F;vnd.ms-modi&quot;);
      type.put(&quot;wdp&quot;, &quot;image&#x2F;vnd.ms-photo&quot;);
      type.put(&quot;npx&quot;, &quot;image&#x2F;vnd.net-fpx&quot;);
      type.put(&quot;wbmp&quot;, &quot;image&#x2F;vnd.wap.wbmp&quot;);
      type.put(&quot;xif&quot;, &quot;image&#x2F;vnd.xiff&quot;);
      type.put(&quot;webp&quot;, &quot;image&#x2F;webp&quot;);
      type.put(&quot;3ds&quot;, &quot;image&#x2F;x-3ds&quot;);
      type.put(&quot;ras&quot;, &quot;image&#x2F;x-cmu-raster&quot;);
      type.put(&quot;cmx&quot;, &quot;image&#x2F;x-cmx&quot;);
      type.put(&quot;fh&quot;, &quot;image&#x2F;x-freehand&quot;);
      type.put(&quot;fhc&quot;, &quot;image&#x2F;x-freehand&quot;);
      type.put(&quot;fh4&quot;, &quot;image&#x2F;x-freehand&quot;);
      type.put(&quot;fh5&quot;, &quot;image&#x2F;x-freehand&quot;);
      type.put(&quot;fh7&quot;, &quot;image&#x2F;x-freehand&quot;);
      type.put(&quot;ico&quot;, &quot;image&#x2F;x-icon&quot;);
      type.put(&quot;sid&quot;, &quot;image&#x2F;x-mrsid-image&quot;);
      type.put(&quot;pcx&quot;, &quot;image&#x2F;x-pcx&quot;);
      type.put(&quot;pic&quot;, &quot;image&#x2F;x-pict&quot;);
      type.put(&quot;pct&quot;, &quot;image&#x2F;x-pict&quot;);
      type.put(&quot;pnm&quot;, &quot;image&#x2F;x-portable-anymap&quot;);
      type.put(&quot;pbm&quot;, &quot;image&#x2F;x-portable-bitmap&quot;);
      type.put(&quot;pgm&quot;, &quot;image&#x2F;x-portable-graymap&quot;);
      type.put(&quot;ppm&quot;, &quot;image&#x2F;x-portable-pixmap&quot;);
      type.put(&quot;rgb&quot;, &quot;image&#x2F;x-rgb&quot;);
      type.put(&quot;tga&quot;, &quot;image&#x2F;x-tga&quot;);
      type.put(&quot;xbm&quot;, &quot;image&#x2F;x-xbitmap&quot;);
      type.put(&quot;xpm&quot;, &quot;image&#x2F;x-xpixmap&quot;);
      type.put(&quot;xwd&quot;, &quot;image&#x2F;x-xwindowdump&quot;);
      type.put(&quot;eml&quot;, &quot;message&#x2F;rfc822&quot;);
      type.put(&quot;mime&quot;, &quot;message&#x2F;rfc822&quot;);
      type.put(&quot;igs&quot;, &quot;model&#x2F;iges&quot;);
      type.put(&quot;iges&quot;, &quot;model&#x2F;iges&quot;);
      type.put(&quot;msh&quot;, &quot;model&#x2F;mesh&quot;);
      type.put(&quot;mesh&quot;, &quot;model&#x2F;mesh&quot;);
      type.put(&quot;silo&quot;, &quot;model&#x2F;mesh&quot;);
      type.put(&quot;dae&quot;, &quot;model&#x2F;vnd.collada+xml&quot;);
      type.put(&quot;dwf&quot;, &quot;model&#x2F;vnd.dwf&quot;);
      type.put(&quot;gdl&quot;, &quot;model&#x2F;vnd.gdl&quot;);
      type.put(&quot;gtw&quot;, &quot;model&#x2F;vnd.gtw&quot;);
      type.put(&quot;mts&quot;, &quot;model&#x2F;vnd.mts&quot;);
      type.put(&quot;vtu&quot;, &quot;model&#x2F;vnd.vtu&quot;);
      type.put(&quot;wrl&quot;, &quot;model&#x2F;vrml&quot;);
      type.put(&quot;vrml&quot;, &quot;model&#x2F;vrml&quot;);
      type.put(&quot;x3db&quot;, &quot;model&#x2F;x3d+binary&quot;);
      type.put(&quot;x3dbz&quot;, &quot;model&#x2F;x3d+binary&quot;);
      type.put(&quot;x3dv&quot;, &quot;model&#x2F;x3d+vrml&quot;);
      type.put(&quot;x3dvz&quot;, &quot;model&#x2F;x3d+vrml&quot;);
      type.put(&quot;x3d&quot;, &quot;model&#x2F;x3d+xml&quot;);
      type.put(&quot;x3dz&quot;, &quot;model&#x2F;x3d+xml&quot;);
      type.put(&quot;appcache&quot;, &quot;text&#x2F;cache-manifest&quot;);
      type.put(&quot;manifest&quot;, &quot;text&#x2F;cache-manifest&quot;);
      type.put(&quot;ics&quot;, &quot;text&#x2F;calendar&quot;);
      type.put(&quot;ifb&quot;, &quot;text&#x2F;calendar&quot;);
      type.put(&quot;coffee&quot;, &quot;text&#x2F;coffeescript&quot;);
      type.put(&quot;css&quot;, &quot;text&#x2F;css&quot;);
      type.put(&quot;csv&quot;, &quot;text&#x2F;csv&quot;);
      type.put(&quot;hjson&quot;, &quot;text&#x2F;hjson&quot;);
      type.put(&quot;html&quot;, &quot;text&#x2F;html&quot;);
      type.put(&quot;htm&quot;, &quot;text&#x2F;html&quot;);
      type.put(&quot;jade&quot;, &quot;text&#x2F;jade&quot;);
      type.put(&quot;jsx&quot;, &quot;text&#x2F;jsx&quot;);
      type.put(&quot;less&quot;, &quot;text&#x2F;less&quot;);
      type.put(&quot;n3&quot;, &quot;text&#x2F;n3&quot;);
      type.put(&quot;txt&quot;, &quot;text&#x2F;plain&quot;);
      type.put(&quot;text&quot;, &quot;text&#x2F;plain&quot;);
      type.put(&quot;conf&quot;, &quot;text&#x2F;plain&quot;);
      type.put(&quot;def&quot;, &quot;text&#x2F;plain&quot;);
      type.put(&quot;list&quot;, &quot;text&#x2F;plain&quot;);
      type.put(&quot;log&quot;, &quot;text&#x2F;plain&quot;);
      type.put(&quot;in&quot;, &quot;text&#x2F;plain&quot;);
      type.put(&quot;ini&quot;, &quot;text&#x2F;plain&quot;);
      type.put(&quot;dsc&quot;, &quot;text&#x2F;prs.lines.tag&quot;);
      type.put(&quot;rtx&quot;, &quot;text&#x2F;richtext&quot;);
      type.put(&quot;sgml&quot;, &quot;text&#x2F;sgml&quot;);
      type.put(&quot;sgm&quot;, &quot;text&#x2F;sgml&quot;);
      type.put(&quot;stylus&quot;, &quot;text&#x2F;stylus&quot;);
      type.put(&quot;styl&quot;, &quot;text&#x2F;stylus&quot;);
      type.put(&quot;tsv&quot;, &quot;text&#x2F;tab-separated-values&quot;);
      type.put(&quot;t&quot;, &quot;text&#x2F;troff&quot;);
      type.put(&quot;tr&quot;, &quot;text&#x2F;troff&quot;);
      type.put(&quot;roff&quot;, &quot;text&#x2F;troff&quot;);
      type.put(&quot;man&quot;, &quot;text&#x2F;troff&quot;);
      type.put(&quot;me&quot;, &quot;text&#x2F;troff&quot;);
      type.put(&quot;ms&quot;, &quot;text&#x2F;troff&quot;);
      type.put(&quot;ttl&quot;, &quot;text&#x2F;turtle&quot;);
      type.put(&quot;uri&quot;, &quot;text&#x2F;uri-list&quot;);
      type.put(&quot;uris&quot;, &quot;text&#x2F;uri-list&quot;);
      type.put(&quot;urls&quot;, &quot;text&#x2F;uri-list&quot;);
      type.put(&quot;vcard&quot;, &quot;text&#x2F;vcard&quot;);
      type.put(&quot;curl&quot;, &quot;text&#x2F;vnd.curl&quot;);
      type.put(&quot;dcurl&quot;, &quot;text&#x2F;vnd.curl.dcurl&quot;);
      type.put(&quot;mcurl&quot;, &quot;text&#x2F;vnd.curl.mcurl&quot;);
      type.put(&quot;scurl&quot;, &quot;text&#x2F;vnd.curl.scurl&quot;);
      type.put(&quot;sub&quot;, &quot;text&#x2F;vnd.dvb.subtitle&quot;);
      type.put(&quot;fly&quot;, &quot;text&#x2F;vnd.fly&quot;);
      type.put(&quot;flx&quot;, &quot;text&#x2F;vnd.fmi.flexstor&quot;);
      type.put(&quot;gv&quot;, &quot;text&#x2F;vnd.graphviz&quot;);
      type.put(&quot;3dml&quot;, &quot;text&#x2F;vnd.in3d.3dml&quot;);
      type.put(&quot;spot&quot;, &quot;text&#x2F;vnd.in3d.spot&quot;);
      type.put(&quot;jad&quot;, &quot;text&#x2F;vnd.sun.j2me.app-descriptor&quot;);
      type.put(&quot;wml&quot;, &quot;text&#x2F;vnd.wap.wml&quot;);
      type.put(&quot;wmls&quot;, &quot;text&#x2F;vnd.wap.wmlscript&quot;);
      type.put(&quot;vtt&quot;, &quot;text&#x2F;vtt&quot;);
      type.put(&quot;s&quot;, &quot;text&#x2F;x-asm&quot;);
      type.put(&quot;asm&quot;, &quot;text&#x2F;x-asm&quot;);
      type.put(&quot;c&quot;, &quot;text&#x2F;x-c&quot;);
      type.put(&quot;cc&quot;, &quot;text&#x2F;x-c&quot;);
      type.put(&quot;cxx&quot;, &quot;text&#x2F;x-c&quot;);
      type.put(&quot;cpp&quot;, &quot;text&#x2F;x-c&quot;);
      type.put(&quot;h&quot;, &quot;text&#x2F;x-c&quot;);
      type.put(&quot;hh&quot;, &quot;text&#x2F;x-c&quot;);
      type.put(&quot;dic&quot;, &quot;text&#x2F;x-c&quot;);
      type.put(&quot;htc&quot;, &quot;text&#x2F;x-component&quot;);
      type.put(&quot;f&quot;, &quot;text&#x2F;x-fortran&quot;);
      type.put(&quot;for&quot;, &quot;text&#x2F;x-fortran&quot;);
      type.put(&quot;f77&quot;, &quot;text&#x2F;x-fortran&quot;);
      type.put(&quot;f90&quot;, &quot;text&#x2F;x-fortran&quot;);
      type.put(&quot;hbs&quot;, &quot;text&#x2F;x-handlebars-template&quot;);
      type.put(&quot;java&quot;, &quot;text&#x2F;x-java-source&quot;);
      type.put(&quot;lua&quot;, &quot;text&#x2F;x-lua&quot;);
      type.put(&quot;markdown&quot;, &quot;text&#x2F;x-markdown&quot;);
      type.put(&quot;md&quot;, &quot;text&#x2F;x-markdown&quot;);
      type.put(&quot;mkd&quot;, &quot;text&#x2F;x-markdown&quot;);
      type.put(&quot;nfo&quot;, &quot;text&#x2F;x-nfo&quot;);
      type.put(&quot;opml&quot;, &quot;text&#x2F;x-opml&quot;);
      type.put(&quot;p&quot;, &quot;text&#x2F;x-pascal&quot;);
      type.put(&quot;pas&quot;, &quot;text&#x2F;x-pascal&quot;);
      type.put(&quot;sass&quot;, &quot;text&#x2F;x-sass&quot;);
      type.put(&quot;scss&quot;, &quot;text&#x2F;x-scss&quot;);
      type.put(&quot;etx&quot;, &quot;text&#x2F;x-setext&quot;);
      type.put(&quot;sfv&quot;, &quot;text&#x2F;x-sfv&quot;);
      type.put(&quot;uu&quot;, &quot;text&#x2F;x-uuencode&quot;);
      type.put(&quot;vcs&quot;, &quot;text&#x2F;x-vcalendar&quot;);
      type.put(&quot;vcf&quot;, &quot;text&#x2F;x-vcard&quot;);
      type.put(&quot;yaml&quot;, &quot;text&#x2F;yaml&quot;);
      type.put(&quot;yml&quot;, &quot;text&#x2F;yaml&quot;);
      type.put(&quot;3gp&quot;, &quot;video&#x2F;3gpp&quot;);
      type.put(&quot;3g2&quot;, &quot;video&#x2F;3gpp2&quot;);
      type.put(&quot;h261&quot;, &quot;video&#x2F;h261&quot;);
      type.put(&quot;h263&quot;, &quot;video&#x2F;h263&quot;);
      type.put(&quot;h264&quot;, &quot;video&#x2F;h264&quot;);
      type.put(&quot;jpgv&quot;, &quot;video&#x2F;jpeg&quot;);
      type.put(&quot;jpm&quot;, &quot;video&#x2F;jpm&quot;);
      type.put(&quot;jpgm&quot;, &quot;video&#x2F;jpm&quot;);
      type.put(&quot;mj2&quot;, &quot;video&#x2F;mj2&quot;);
      type.put(&quot;mjp2&quot;, &quot;video&#x2F;mj2&quot;);
      type.put(&quot;ts&quot;, &quot;video&#x2F;mp2t&quot;);
      type.put(&quot;mp4&quot;, &quot;video&#x2F;mp4&quot;);
      type.put(&quot;mp4v&quot;, &quot;video&#x2F;mp4&quot;);
      type.put(&quot;mpg4&quot;, &quot;video&#x2F;mp4&quot;);
      type.put(&quot;mpeg&quot;, &quot;video&#x2F;mpeg&quot;);
      type.put(&quot;mpg&quot;, &quot;video&#x2F;mpeg&quot;);
      type.put(&quot;mpe&quot;, &quot;video&#x2F;mpeg&quot;);
      type.put(&quot;m1v&quot;, &quot;video&#x2F;mpeg&quot;);
      type.put(&quot;m2v&quot;, &quot;video&#x2F;mpeg&quot;);
      type.put(&quot;ogv&quot;, &quot;video&#x2F;ogg&quot;);
      type.put(&quot;qt&quot;, &quot;video&#x2F;quicktime&quot;);
      type.put(&quot;mov&quot;, &quot;video&#x2F;quicktime&quot;);
      type.put(&quot;uvh&quot;, &quot;video&#x2F;vnd.dece.hd&quot;);
      type.put(&quot;uvvh&quot;, &quot;video&#x2F;vnd.dece.hd&quot;);
      type.put(&quot;uvm&quot;, &quot;video&#x2F;vnd.dece.mobile&quot;);
      type.put(&quot;uvvm&quot;, &quot;video&#x2F;vnd.dece.mobile&quot;);
      type.put(&quot;uvp&quot;, &quot;video&#x2F;vnd.dece.pd&quot;);
      type.put(&quot;uvvp&quot;, &quot;video&#x2F;vnd.dece.pd&quot;);
      type.put(&quot;uvs&quot;, &quot;video&#x2F;vnd.dece.sd&quot;);
      type.put(&quot;uvvs&quot;, &quot;video&#x2F;vnd.dece.sd&quot;);
      type.put(&quot;uvv&quot;, &quot;video&#x2F;vnd.dece.video&quot;);
      type.put(&quot;uvvv&quot;, &quot;video&#x2F;vnd.dece.video&quot;);
      type.put(&quot;dvb&quot;, &quot;video&#x2F;vnd.dvb.file&quot;);
      type.put(&quot;fvt&quot;, &quot;video&#x2F;vnd.fvt&quot;);
      type.put(&quot;mxu&quot;, &quot;video&#x2F;vnd.mpegurl&quot;);
      type.put(&quot;m4u&quot;, &quot;video&#x2F;vnd.mpegurl&quot;);
      type.put(&quot;pyv&quot;, &quot;video&#x2F;vnd.ms-playready.media.pyv&quot;);
      type.put(&quot;uvu&quot;, &quot;video&#x2F;vnd.uvvu.mp4&quot;);
      type.put(&quot;uvvu&quot;, &quot;video&#x2F;vnd.uvvu.mp4&quot;);
      type.put(&quot;viv&quot;, &quot;video&#x2F;vnd.vivo&quot;);
      type.put(&quot;webm&quot;, &quot;video&#x2F;webm&quot;);
      type.put(&quot;f4v&quot;, &quot;video&#x2F;x-f4v&quot;);
      type.put(&quot;fli&quot;, &quot;video&#x2F;x-fli&quot;);
      type.put(&quot;flv&quot;, &quot;video&#x2F;x-flv&quot;);
      type.put(&quot;m4v&quot;, &quot;video&#x2F;x-m4v&quot;);
      type.put(&quot;mkv&quot;, &quot;video&#x2F;x-matroska&quot;);
      type.put(&quot;mk3d&quot;, &quot;video&#x2F;x-matroska&quot;);
      type.put(&quot;mks&quot;, &quot;video&#x2F;x-matroska&quot;);
      type.put(&quot;mng&quot;, &quot;video&#x2F;x-mng&quot;);
      type.put(&quot;asf&quot;, &quot;video&#x2F;x-ms-asf&quot;);
      type.put(&quot;asx&quot;, &quot;video&#x2F;x-ms-asf&quot;);
      type.put(&quot;vob&quot;, &quot;video&#x2F;x-ms-vob&quot;);
      type.put(&quot;wm&quot;, &quot;video&#x2F;x-ms-wm&quot;);
      type.put(&quot;wmv&quot;, &quot;video&#x2F;x-ms-wmv&quot;);
      type.put(&quot;wmx&quot;, &quot;video&#x2F;x-ms-wmx&quot;);
      type.put(&quot;wvx&quot;, &quot;video&#x2F;x-ms-wvx&quot;);
      type.put(&quot;avi&quot;, &quot;video&#x2F;x-msvideo&quot;);
      type.put(&quot;movie&quot;, &quot;video&#x2F;x-sgi-movie&quot;);
      type.put(&quot;smv&quot;, &quot;video&#x2F;x-smv&quot;);
      type.put(&quot;ice&quot;, &quot;x-conference&#x2F;x-cooltalk&quot;);
   &#125;

   public static String getMimeType(String fileExt) &#123;
      return type.get(fileExt);
   &#125;
&#125;</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xiaojianzheng.cn/2021/07/04/pt%E4%B8%8Epx%E3%80%81em%E3%80%81rem%E7%9A%84%E5%8C%BA%E5%88%AB%E4%B8%8E%E6%8D%A2%E7%AE%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JIAHE">
      <meta itemprop="description" content="Collection & Reuse">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JIAHE">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/04/pt%E4%B8%8Epx%E3%80%81em%E3%80%81rem%E7%9A%84%E5%8C%BA%E5%88%AB%E4%B8%8E%E6%8D%A2%E7%AE%97/" class="post-title-link" itemprop="url">pt与px、em、rem的区别与换算</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-05 00:00:00" itemprop="dateCreated datePublished" datetime="2021-07-05T00:00:00+08:00">2021-07-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>DPI/pt/px 单位的含义 DPI(Dots Per Inch) 每英寸像素数。</p>
</blockquote>
<h2 id="DPI-pt-px-单位的含义"><a href="#DPI-pt-px-单位的含义" class="headerlink" title="DPI/pt/px 单位的含义"></a>DPI/pt/px 单位的含义</h2><h3 id="DPI-Dots-Per-Inch"><a href="#DPI-Dots-Per-Inch" class="headerlink" title="DPI(Dots Per Inch)"></a>DPI(Dots Per Inch)</h3><p>每英寸像素数。Windows 系统默认是 96dpi，Apple 系统默认是 72dpi。</p>
<h3 id="pt-point，磅"><a href="#pt-point，磅" class="headerlink" title="pt (point，磅)"></a>pt (point，磅)</h3><p>是一个物理长度单位，指的是 72 分之一英寸。</p>
<h3 id="px-pixel，像素"><a href="#px-pixel，像素" class="headerlink" title="px (pixel，像素)"></a>px (pixel，像素)</h3><p>一个虚拟长度单位，是计算机系统的数字化图像长度单位，如果 px 要换算成物理长度，需要指定精度 DPI，在扫描打印时一般都有 DPI 可选。常见浏览器的默认字体大小都是 16px。</p>
<p>由于屏幕大小的差异性，相同大小的字体在不同屏幕下显示的效果差异比较大。那么动态的放大 / 缩小字体就变得比较重要。显然针对每一处的字体设置都去做兼容是复杂的，于是就有了后面的 em 和 rem。</p>
<h3 id="em-相对长度"><a href="#em-相对长度" class="headerlink" title="em (相对长度)"></a>em (相对长度)</h3><p>相对于当前对象内文本的字体尺寸。如当前对行内文本的字体尺寸未被人为设置，则相对于浏览器的默认字体尺寸。</p>
<p>由于浏览器的默认字体大小是 16px，所以未经调整默认字体大小的浏览器都符合: 1em = 16px。</p>
<p>em 会继承父级元素的字体大小。由此，只需要改变父元素的字体大小，就可以同步放大或缩小子元素的字体。</p>
<p>但是也因此需要注意几点：</p>
<p>1、body 选择器中声明 Font-size=62.5% (10 ÷ 16 × 100% = 62.5%)；</p>
<p>2、将你的原来的 px 数值除以 10，然后换上 em 作为单位；</p>
<p>3、重新计算那些被放大的字体的 em 数值。避免字体大小的重复声明。</p>
<h3 id="rem-font-size-of-the-root-element"><a href="#rem-font-size-of-the-root-element" class="headerlink" title="rem (font size of the root element)"></a>rem (font size of the root element)</h3><p>由于 em 存在对父元素继承的问题，当改变字体大小时涉及的继承关系就变得复杂起来。</p>
<p>rem 是相对于根元素 字体尺寸的大小。如 文本大小设为 font-size: 10px，则 1rem = 10px。使用 rem 设置字体则简单了很多。</p>
<h2 id="px-与-pt-的换算"><a href="#px-与-pt-的换算" class="headerlink" title="px 与 pt 的换算"></a>px 与 pt 的换算</h2><p>px = pt * DPI / 72</p>
<h2 id="像素与毫米的转换"><a href="#像素与毫米的转换" class="headerlink" title="像素与毫米的转换"></a>像素与毫米的转换</h2><p>象素数 / DPI = 英寸数<br>英寸数 * 25.4 = 毫米数</p>
<p>一英寸等于 25.4mm。那么毫米换算成像素的公式为：</p>
<p>水平方向的换算： x * px /25.4<br>垂直方向的换算： y * py /25.4<br>像素换算为毫米： x * 25.4 / px</p>
<h2 id="pt-px-em-percent-换算参考"><a href="#pt-px-em-percent-换算参考" class="headerlink" title="pt/px/em/percent 换算参考"></a>pt/px/em/percent 换算参考</h2><p>以 Windows 下的 96dpi 作参考，则有：pt = px_72/96 = px_3/4。<br>再考虑浏览器的默认字体大小是 16px，我们可以得到如下的换算参考：</p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css">html &#123;font-size: 62.5%;  &#x2F;*10 ÷ 16 × 100% &#x3D; 62.5%*&#x2F;&#125;
body &#123;font-size: 1.4rem; &#x2F;*1.4 × 10px &#x3D; 14px *&#x2F;&#125;
h1 &#123; font-size: 2.4rem;  &#x2F;*2.4 × 10px &#x3D; 24px*&#x2F;&#125;</code></pre>

<p>一个经典的简单示例：</p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css">html &#123;font-size: 62.5%;  &#x2F;*10 ÷ 16 × 100% &#x3D; 62.5%*&#x2F;&#125;
body &#123;font-size: 1.4rem; &#x2F;*1.4 × 10px &#x3D; 14px *&#x2F;&#125;
h1 &#123; font-size: 2.4rem;  &#x2F;*2.4 × 10px &#x3D; 24px*&#x2F;&#125;</code></pre>

<blockquote>
<p>原文：<a target="_blank" rel="noopener" href="https://lzw.me/a/pt-px-em-rem.html">https://lzw.me/a/pt-px-em-rem.html</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xiaojianzheng.cn/2021/07/03/zookeeper%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JIAHE">
      <meta itemprop="description" content="Collection & Reuse">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JIAHE">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/03/zookeeper%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E/" class="post-title-link" itemprop="url">zookeeper未授权访问漏洞</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-07-04 00:36:00" itemprop="dateCreated datePublished" datetime="2021-07-04T00:36:00+08:00">2021-07-04</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>原文地址 <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/86a7f506d1d2">https://www.jianshu.com/p/86a7f506d1d2</a></p>
</blockquote>
<p>ZooKeeper 默认开启在 2181 端口，在未进行任何访问控制情况下，攻击者可通过执行 envi 命令获得系统大量的敏感信息，包括系统名称、Java 环境。</p>
<h2 id="0x00-ZooKeeper-安装："><a href="#0x00-ZooKeeper-安装：" class="headerlink" title="0x00 ZooKeeper 安装："></a>0x00 ZooKeeper 安装：</h2><p>Zookeeper 的默认开放端口是 2181</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">wget https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;zookeeper&#x2F;zookeeper-3.4.10&#x2F;zookeeper-3.4.10.tar.gz

tar -zxvf zookeepre-3.4.10.tar.gz
cd zookeeper-3.4.10&#x2F;
cd conf&#x2F;
vi zoo.cfg
### 配置单机模式
tickTime&#x3D;2000
dataDir&#x3D;&#x2F;tmp&#x2F;zookeeper&#x2F;data
dataLogDir&#x3D;&#x2F;tmp&#x2F;zookeeper&#x2F;logs
clientPort&#x3D;2181

bin&#x2F;zkServer.sh start   &#x2F;&#x2F;启动
### 启动client连接server
bin&#x2F;zkCli.sh -server localhost:2181</code></pre>

<h2 id="0x01-漏洞验证："><a href="#0x01-漏洞验证：" class="headerlink" title="0x01 漏洞验证："></a>0x01 漏洞验证：</h2><p>执行以下命令即可远程获取该服务器的环境：<br><code>echo envi|nc 192.168.15.74 2181</code></p>
<p>直接连接：<br><code>./zkCli.sh -server ip:port</code></p>
<h3 id="其他攻击获取信息"><a href="#其他攻击获取信息" class="headerlink" title="其他攻击获取信息"></a>其他攻击获取信息</h3><p>stat：列出关于性能和连接的客户端的统计信息。<br><code>echo stat |ncat 127.0.0.1 2181</code></p>
<p>ruok：测试服务器是否运行在非错误状态。<br><code>echo ruok |ncat 127.0.0.1 2181</code></p>
<p>reqs：列出未完成的请求。<br><code>echo reqs |ncat 127.0.0.1 2181</code></p>
<p>envi：打印有关服务环境的详细信息。<br><code>echo envi |ncat 127.0.0.1 2181</code></p>
<p>dump：列出未完成的会话和临时节点。<br><code>echo dump |ncat 127.0.0.1 2181</code></p>
<h2 id="0x02-漏洞修复"><a href="#0x02-漏洞修复" class="headerlink" title="0x02 漏洞修复"></a>0x02 漏洞修复</h2><p>禁止把 Zookeeper 直接暴露在公网<br>添加访问控制，根据情况选择对应方式（认证用户，用户名密码）</p>
<h1 id="zookeeper-有三个端口（可以修改），默认端口作用："><a href="#zookeeper-有三个端口（可以修改），默认端口作用：" class="headerlink" title="zookeeper 有三个端口（可以修改），默认端口作用："></a>zookeeper 有三个端口（可以修改），默认端口作用：</h1><p>1、2181：对 cline 端提供服务<br>2、3888：选举 leader 使用<br>3、2888：集群内机器通讯使用（Leader 监听此端口）</p>
<h1 id="修复办法-1-绑定指定-IP-访问-推荐-："><a href="#修复办法-1-绑定指定-IP-访问-推荐-：" class="headerlink" title="修复办法 1 绑定指定 IP 访问 (推荐)："></a>修复办法 1 绑定指定 IP 访问 (推荐)：</h1><p>1、登陆 zookeeper</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">.&#x2F;zkCli.sh -server &lt;IP&gt;:&lt;port&gt;</code></pre>

<p>2、查看当前权限：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">getAcl &#x2F;</code></pre>

<p>3、添加可访问 IP</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">setAcl &#x2F; ip:192.168.1.xx:cdrwa,ip:192.168.1.xx:cdrwa</code></pre>

<p>4、查看是否正常添加</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">getAcl &#x2F;</code></pre>

<p>未授权也可以连接，但是查看节点时会报错 &quot;KeeperErrorCode = NoAuth for /&quot;，localhost 都不行，必须填可访问 IP，才能访问。</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[zk: localhost:2181(CONNECTED) 0] ls &#x2F;
KeeperErrorCode &#x3D; NoAuth for &#x2F;
[zk: localhost:2181(CONNECTED) 1]</code></pre>

<p><strong>回退办法：</strong><br>使用之前设置的 IP 进行访问：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">.&#x2F;zkCli.sh -server &lt;IP&gt;:&lt;port&gt;</code></pre>

<p>设置为所有人可访问：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">setAcl &#x2F; world:anyone:cdrwa</code></pre>

<h1 id="修复办法-2-添加防火墙访问控制："><a href="#修复办法-2-添加防火墙访问控制：" class="headerlink" title="修复办法 2 添加防火墙访问控制："></a>修复办法 2 添加防火墙访问控制：</h1><p>配置防火墙策略，只允许指定 IP 访问 2181 端口。<br>Linux 6：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">iptables -I INPUT -p tcp --dport 2181 -j DROP
iptables -I INPUT -s 172.16.65.xx -p tcp --dport 2181 -j ACCEPT
iptables -I INPUT -s 172.16.65.xx -p tcp --dport 2181 -j ACCEPT
iptables -I INPUT -s 172.16.65.xx -p tcp --dport 2181 -j ACCEPT
service iptables save
service iptables restart
iptables -L</code></pre>

<p>Linux 7:</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">firewall-cmd --zone&#x3D;public --remove-port&#x3D;2181&#x2F;tcp --permanent
firewall-cmd --permanent --add-rich-rule&#x3D;&quot;rule family&#x3D;&quot;ipv4&quot; source address&#x3D;&quot;192.0.2.181&quot; port protocol&#x3D;&quot;tcp&quot; port&#x3D;&quot;2181&quot; accept&quot;
firewall-cmd --reload
firewall-cmd --list-all</code></pre>

<h1 id="修复办法-3-设置身份验证（需要改程序）："><a href="#修复办法-3-设置身份验证（需要改程序）：" class="headerlink" title="修复办法 3 设置身份验证（需要改程序）："></a>修复办法 3 设置身份验证（需要改程序）：</h1><p>为 ZooKeeper 配置相应的访问权限。</p>
<p>1）增加一个认证用户<br>addauth digest 用户名: 密码明文</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">addauth digest user1:password1</code></pre>

<p>2）设置权限<br>setAcl /path auth: 用户名: 密码明文: 权限<br>setAcl /path digest: 用户名: 密码密文: 权限</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">setAcl &#x2F;test auth:user1:password1:cdrwa</code></pre>

<p>3）查看 Acl 设置</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">getAcl &#x2F;path</code></pre>

<h3 id="0x03-参考链接："><a href="#0x03-参考链接：" class="headerlink" title="0x03 参考链接："></a>0x03 参考链接：</h3><p><a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://yq.aliyun.com/articles/616751">ZooKeeper 未授权访问漏洞</a><br><a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://www.ppkanshu.com/index.php/post/2339.html">Linux 系统安全加固 - ZooKeeper 未授权访问漏洞处理</a><br><a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://www.cnblogs.com/someone9/p/10063982.html">ZooKeeper 未授权访问</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xiaojianzheng.cn/2021/06/29/Docker%E5%AE%9E%E6%88%98%E4%B9%8BRedis-Cluster%E9%9B%86%E7%BE%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JIAHE">
      <meta itemprop="description" content="Collection & Reuse">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JIAHE">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/29/Docker%E5%AE%9E%E6%88%98%E4%B9%8BRedis-Cluster%E9%9B%86%E7%BE%A4/" class="post-title-link" itemprop="url">Docker实战之Redis-Cluster集群</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-06-29 10:36:00" itemprop="dateCreated datePublished" datetime="2021-06-29T10:36:00+08:00">2021-06-29</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>原文地址 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/idea360/p/12391416.html">https://www.cnblogs.com/idea360/p/12391416.html</a></p>
</blockquote>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>接上一篇 <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/3FbY6jT-PdgUHsRwHBSWBw">Docker 实战之 MySQL 主从复制</a>, 这里是 Docker 实战系列的第二篇，主要进行 Redis-Cluster 集群环境的快速搭建。Redis 作为基于键值对的 NoSQL 数据库，具有高性能、丰富的数据结构、持久化、高可用、分布式等特性，同时 Redis 本身非常稳定，已经得到业界的广泛认可和使用。</p>
<p>在 Redis 中，集群的解决方案有三种</p>
<ol>
<li> 主从复制</li>
<li> 哨兵机制</li>
<li> Cluster</li>
</ol>
<p>Redis Cluster 是 Redis 的分布式解决方案，在 3.0 版本正式推出。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/06/29/Docker%E5%AE%9E%E6%88%98%E4%B9%8BRedis-Cluster%E9%9B%86%E7%BE%A4/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xiaojianzheng.cn/2021/06/24/%E5%89%8D%E7%AB%AF%E8%AF%B7%E6%B1%82%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%B9%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="JIAHE">
      <meta itemprop="description" content="Collection & Reuse">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JIAHE">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/24/%E5%89%8D%E7%AB%AF%E8%AF%B7%E6%B1%82%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%B9%E5%BC%8F/" class="post-title-link" itemprop="url">前端请求下载文件的方式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-06-24 15:25:00" itemprop="dateCreated datePublished" datetime="2021-06-24T15:25:00+08:00">2021-06-24</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="使用-fetch"><a href="#使用-fetch" class="headerlink" title="使用 fetch"></a>使用 fetch</h1><pre class="line-numbers language-js" data-language="js"><code class="language-js">fetch(&#39;&#x2F;&#x2F;xxx.xxx.com&#x2F;10.pdf&#39;, &#123;
    mode: &#39;cors&#39;
&#125;).then(res &#x3D;&gt; res.blob()).then(blob &#x3D;&gt; &#123;
    const blobURL &#x3D; window.URL.createObjectURL(blob)
    const link &#x3D; document.createElement(&#39;a&#39;)
    link.style.display &#x3D; &#39;none&#39;
    link.href &#x3D; blobURL
    link.setAttribute(&#39;download&#39;, decodeURI(&#39;10.pdf&#39;))
    document.body.appendChild(link)
    link.click()
    document.body.removeChild(link)
    window.URL.revokeObjectURL(blobURL)
&#125;)</code></pre>

<h1 id="使用封装好的-http"><a href="#使用封装好的-http" class="headerlink" title="使用封装好的 $http"></a>使用封装好的 $http</h1><pre class="line-numbers language-js" data-language="js"><code class="language-js">$http(&#123;
    &#x2F;&#x2F; 防止出现协议问题，这里不要写具体的 http 或者 https
    url: &#39;&#x2F;&#x2F;xxx.xxx.com&#x2F;10.pdf&#39;,
    headerType: &#39;download&#39;,
    method: &#39;get&#39;,
    &#x2F;&#x2F; 不指定默认从 content-disposition 头读取，后端接口也必须要设置 content-disposition 才能读取到
    fileName: &#39;download.docx&#39;
&#125;).then(res &#x3D;&gt; &#123;

&#125;)</code></pre>

<h1 id="window-open"><a href="#window-open" class="headerlink" title="window.open"></a>window.open</h1><p>缺点：需要同域、可能会被拦截、浏览器支持预览的文件不会直接下载</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">window.open(&#39;&#x2F;&#x2F;xxx.xxx.com&#x2F;10.pdf&#39;)</code></pre>

<h1 id="form-表单提交"><a href="#form-表单提交" class="headerlink" title="form 表单提交"></a>form 表单提交</h1><p>缺点：浏览器支持预览的文件不会直接下载</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">export function download (url, params &#x3D; &#123;&#125;) &#123;
    const form &#x3D; document.createElement(&#39;form&#39;)
    form.method &#x3D; &#39;post&#39;
    form.action &#x3D; url
    form.target &#x3D; &#39;_blank&#39;
    document.body.appendChild(form)
    for (const key in params) &#123;
        const value &#x3D; params[key]
        if (value) &#123;
            const input &#x3D; document.createElement(&#39;input&#39;)
            input.setAttribute(&#39;type&#39;, &#39;hidden&#39;)
            input.setAttribute(&#39;name&#39;, key)
            if (isArray(value)) &#123;
                input.setAttribute(&#39;value&#39;, stringify(value))
            &#125; else &#123;
                input.setAttribute(&#39;value&#39;, value)
            &#125;
            form.appendChild(input)
        &#125;
    &#125;
    form.submit()
    document.body.removeChild(form)
&#125;</code></pre>

<h1 id="a-标签触发"><a href="#a-标签触发" class="headerlink" title="a 标签触发"></a>a 标签触发</h1><p>缺点：可能会被拦截、浏览器支持预览的文件不会直接下载</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">const link &#x3D; document.createElement(&#39;a&#39;)
link.style.display &#x3D; &#39;none&#39;
link.href &#x3D; &#39;&#x2F;&#x2F;xxx.xxx.com&#x2F;10.pdf&#39;
link.setAttribute(&#39;download&#39;, decodeURI(&#39;10.pdf&#39;))
document.body.appendChild(link)
link.click()
document.body.removeChild(link)</code></pre>

<blockquote>
<p> 1 和 2 的方式，无论什么文件都是执行下载</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JIAHE</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-core.min.js" integrity="sha256-2N+3bVl+vOCJyZ9ZbH9Eb99XKT/53oT5V8eRbB8bFcA=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha256-33Qw0lN3qo7tLZL4c7vDLCapRUs+gNtQRaVIOHk4Ors=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js" integrity="sha256-jWSJB6Iusw1nLB+Iqwk0dp9T2jSn5bRzLXJCE1VmOIU=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  
<script src="/js/third-party/search/local-search.js"></script>



  <script class="next-config" data-name="pdf" type="application/json">{&quot;object_url&quot;:{&quot;url&quot;:&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;pdfobject@2.2.5&#x2F;pdfobject.min.js&quot;,&quot;integrity&quot;:&quot;sha256-YuNlP9i6s&#x2F;WH7EaU2kErloo9Vc85C3WVqhoMDgsEVpY&#x3D;&quot;},&quot;url&quot;:&quot;&#x2F;lib&#x2F;pdf&#x2F;web&#x2F;viewer.html&quot;}</script>
  <script src="/js/third-party/tags/pdf.js"></script>



  




  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.1.0/dist/quicklink.umd.js" integrity="sha256-KK3rvmDcW72MSl9jzzNZWlQjZNrRzAuGhAQ+0SFOg7Q=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{&quot;enable&quot;:true,&quot;home&quot;:true,&quot;archive&quot;:true,&quot;delay&quot;:true,&quot;timeout&quot;:3000,&quot;priority&quot;:true,&quot;ignores&quot;:null,&quot;url&quot;:&quot;https:&#x2F;&#x2F;xiaojianzheng.cn&#x2F;&quot;}</script>
  <script src="/js/third-party/quicklink.js"></script>

</body>
</html>
