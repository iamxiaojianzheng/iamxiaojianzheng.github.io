<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"xiaojianzheng.cn","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.8.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script><meta name="description" content="Docker Cheat SheetWant to improve this cheat sheet?  See the Contributing section! Why Docker&quot;With Docker, developers can build any app in any language using any toolchain. “Dockerized” apps are"><meta property="og:type" content="website"><meta property="og:title" content="JIAHE"><meta property="og:url" content="http://xiaojianzheng.cn/cheat-sheet/docker/index.html"><meta property="og:site_name" content="JIAHE"><meta property="og:description" content="Docker Cheat SheetWant to improve this cheat sheet?  See the Contributing section! Why Docker&quot;With Docker, developers can build any app in any language using any toolchain. “Dockerized” apps are"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://xiaojianzheng.cn/cheat-sheet/docker/images/click.png"><meta property="og:image" content="http://xiaojianzheng.cn/cheat-sheet/docker/images/edit.png"><meta property="og:image" content="http://xiaojianzheng.cn/cheat-sheet/docker/images/change.png"><meta property="og:image" content="http://xiaojianzheng.cn/cheat-sheet/docker/images/commit.png"><meta property="article:published_time" content="2022-04-14T07:53:56.734Z"><meta property="article:modified_time" content="2022-04-14T07:53:56.734Z"><meta property="article:author" content="JIAHE"><meta property="article:tag" content="JIAHE"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://xiaojianzheng.cn/cheat-sheet/docker/images/click.png"><link rel="canonical" href="http://xiaojianzheng.cn/cheat-sheet/docker/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":false,"lang":"zh-CN","comments":true,"permalink":"http://xiaojianzheng.cn/cheat-sheet/docker/index.html","path":"cheat-sheet/docker/index.html","title":""}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title> | JIAHE</title><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">JIAHE</p><i class="logo-line"></i></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-导航"><a href="/navigation/" rel="section"><i class="fa fa-location-arrow fa-fw"></i>导航</a></li><li class="menu-item menu-item-文档"><a href="/docs/" rel="section"><i class="fa fa-book fa-fw fa-fw"></i>文档</a></li><li class="menu-item menu-item-应用下载"><a href="/app-download/" rel="section"><i class="fas fa-download fa-fw fa-fw"></i>应用下载</a></li><li class="menu-item menu-item-cheat-sheet"><a href="/cheat-sheet/" rel="section"><i class="fas fa-pen fa-fw"></i>Cheat Sheet</a></li><li class="menu-item menu-item-软件安装部署"><a href="/software-install-and-deploy/" rel="section"><i class="fab fa-windows fa-fw"></i>软件安装部署</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker-Cheat-Sheet"><span class="nav-number">1.</span> <span class="nav-text">Docker Cheat Sheet</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Why-Docker"><span class="nav-number">1.1.</span> <span class="nav-text">Why Docker</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Prerequisites"><span class="nav-number">1.2.</span> <span class="nav-text">Prerequisites</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux"><span class="nav-number">1.2.1.</span> <span class="nav-text">Linux</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MacOS"><span class="nav-number">1.2.2.</span> <span class="nav-text">MacOS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Windows-10"><span class="nav-number">1.2.3.</span> <span class="nav-text">Windows 10</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Windows-Server"><span class="nav-number">1.2.4.</span> <span class="nav-text">Windows Server</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Best-Practices"><span class="nav-number">1.3.</span> <span class="nav-text">Best Practices</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tips"><span class="nav-number">1.4.</span> <span class="nav-text">Tips</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Prune"><span class="nav-number">1.4.1.</span> <span class="nav-text">Prune</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#df"><span class="nav-number">1.4.2.</span> <span class="nav-text">df</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Heredoc-Docker-Container"><span class="nav-number">1.4.3.</span> <span class="nav-text">Heredoc Docker Container</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Last-IDs"><span class="nav-number">1.4.4.</span> <span class="nav-text">Last IDs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Commit-with-command-needs-Dockerfile"><span class="nav-number">1.4.5.</span> <span class="nav-text">Commit with command (needs Dockerfile)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Get-IP-address"><span class="nav-number">1.4.6.</span> <span class="nav-text">Get IP address</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Get-port-mapping"><span class="nav-number">1.4.7.</span> <span class="nav-text">Get port mapping</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Find-containers-by-regular-expression"><span class="nav-number">1.4.8.</span> <span class="nav-text">Find containers by regular expression</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Get-Environment-Settings"><span class="nav-number">1.4.9.</span> <span class="nav-text">Get Environment Settings</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Kill-running-containers"><span class="nav-number">1.4.10.</span> <span class="nav-text">Kill running containers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Delete-all-containers-force-running-or-stopped-containers"><span class="nav-number">1.4.11.</span> <span class="nav-text">Delete all containers (force!! running or stopped containers)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Delete-old-containers"><span class="nav-number">1.4.12.</span> <span class="nav-text">Delete old containers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Delete-stopped-containers"><span class="nav-number">1.4.13.</span> <span class="nav-text">Delete stopped containers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Delete-containers-after-stopping"><span class="nav-number">1.4.14.</span> <span class="nav-text">Delete containers after stopping</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Delete-dangling-images"><span class="nav-number">1.4.15.</span> <span class="nav-text">Delete dangling images</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Delete-all-images"><span class="nav-number">1.4.16.</span> <span class="nav-text">Delete all images</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Delete-dangling-volumes"><span class="nav-number">1.4.17.</span> <span class="nav-text">Delete dangling volumes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Show-image-dependencies"><span class="nav-number">1.4.18.</span> <span class="nav-text">Show image dependencies</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Slimming-down-Docker-containers"><span class="nav-number">1.4.19.</span> <span class="nav-text">Slimming down Docker containers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Monitor-system-resource-utilization-for-running-containers"><span class="nav-number">1.4.20.</span> <span class="nav-text">Monitor system resource utilization for running containers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Volumes-can-be-files"><span class="nav-number">1.4.21.</span> <span class="nav-text">Volumes can be files</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Contributing"><span class="nav-number">1.5.</span> <span class="nav-text">Contributing</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Open-README-md"><span class="nav-number">1.5.1.</span> <span class="nav-text">Open README.md</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Edit-Page"><span class="nav-number">1.5.2.</span> <span class="nav-text">Edit Page</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Make-Changes-and-Commit"><span class="nav-number">1.5.3.</span> <span class="nav-text">Make Changes and Commit</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="JIAHE" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">JIAHE</p><div class="site-description" itemprop="description">Collection & Reuse</div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">85</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">88</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-blogroll site-overview-item animated"><div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="https://cook.aiurs.co/" title="https:&#x2F;&#x2F;cook.aiurs.co&#x2F;" rel="noopener" target="_blank">程序员做饭指南</a></li><li class="links-of-blogroll-item"> <a href="https://www.baidu.com/" title="https:&#x2F;&#x2F;www.baidu.com&#x2F;" rel="noopener" target="_blank">Baidu</a></li><li class="links-of-blogroll-item"> <a href="https://cn.bing.com/" title="https:&#x2F;&#x2F;cn.bing.com&#x2F;" rel="noopener" target="_blank">Bing</a></li><li class="links-of-blogroll-item"> <a href="https://www.google.com/" title="https:&#x2F;&#x2F;www.google.com&#x2F;" rel="noopener" target="_blank">Google</a></li><li class="links-of-blogroll-item"> <a href="https://zh.wikipedia.org/wiki/Wikipedia:%E9%A6%96%E9%A1%B5" title="https:&#x2F;&#x2F;zh.wikipedia.org&#x2F;wiki&#x2F;Wikipedia:%E9%A6%96%E9%A1%B5" rel="noopener" target="_blank">Wiki</a></li><li class="links-of-blogroll-item"> <a href="https://projectlombok.org/" title="https:&#x2F;&#x2F;projectlombok.org&#x2F;" rel="noopener" target="_blank">lombok</a></li><li class="links-of-blogroll-item"> <a href="https://logging.apache.org/log4j/2.x/" title="https:&#x2F;&#x2F;logging.apache.org&#x2F;log4j&#x2F;2.x&#x2F;" rel="noopener" target="_blank">log4j</a></li><li class="links-of-blogroll-item"> <a href="http://logback.qos.ch/" title="http:&#x2F;&#x2F;logback.qos.ch&#x2F;" rel="noopener" target="_blank">logback</a></li><li class="links-of-blogroll-item"> <a href="https://junit.org/junit5/" title="https:&#x2F;&#x2F;junit.org&#x2F;junit5&#x2F;" rel="noopener" target="_blank">junit</a></li><li class="links-of-blogroll-item"> <a href="https://element.eleme.cn/#/zh-CN" title="https:&#x2F;&#x2F;element.eleme.cn&#x2F;#&#x2F;zh-CN" rel="noopener" target="_blank">ElementUI</a></li><li class="links-of-blogroll-item"> <a href="https://zipkin.io/" title="https:&#x2F;&#x2F;zipkin.io&#x2F;" rel="noopener" target="_blank">Zipkin</a></li><li class="links-of-blogroll-item"> <a href="https://www.selenium.dev/zh-cn/" title="https:&#x2F;&#x2F;www.selenium.dev&#x2F;zh-cn&#x2F;" rel="noopener" target="_blank">Selenium</a></li><li class="links-of-blogroll-item"> <a href="https://nacos.io/zh-cn/docs/what-is-nacos.html" title="https:&#x2F;&#x2F;nacos.io&#x2F;zh-cn&#x2F;docs&#x2F;what-is-nacos.html" rel="noopener" target="_blank">Nacos</a></li><li class="links-of-blogroll-item"> <a href="https://dev.mysql.com/downloads/" title="https:&#x2F;&#x2F;dev.mysql.com&#x2F;downloads&#x2F;" rel="noopener" target="_blank">MySQL-Download</a></li><li class="links-of-blogroll-item"> <a href="https://redis.io/" title="https:&#x2F;&#x2F;redis.io&#x2F;" rel="noopener" target="_blank">Redis</a></li><li class="links-of-blogroll-item"> <a href="https://www.jetbrains.com/help/idea/discover-intellij-idea.html" title="https:&#x2F;&#x2F;www.jetbrains.com&#x2F;help&#x2F;idea&#x2F;discover-intellij-idea.html" rel="noopener" target="_blank">IDEA-Document</a></li><li class="links-of-blogroll-item"> <a href="https://jdk.java.net/" title="https:&#x2F;&#x2F;jdk.java.net&#x2F;" rel="noopener" target="_blank">JDK</a></li><li class="links-of-blogroll-item"> <a href="https://www.java.com/en/download/manual.jsp" title="https:&#x2F;&#x2F;www.java.com&#x2F;en&#x2F;download&#x2F;manual.jsp" rel="noopener" target="_blank">JDK8</a></li><li class="links-of-blogroll-item"> <a href="https://dev.java/" title="https:&#x2F;&#x2F;dev.java&#x2F;" rel="noopener" target="_blank">JAVA</a></li><li class="links-of-blogroll-item"> <a href="https://www.oracle.com/java/technologies/downloads/archive/" title="https:&#x2F;&#x2F;www.oracle.com&#x2F;java&#x2F;technologies&#x2F;downloads&#x2F;archive&#x2F;" rel="noopener" target="_blank">JDK-Oracle</a></li><li class="links-of-blogroll-item"> <a href="https://poi.apache.org/components/index.html" title="https:&#x2F;&#x2F;poi.apache.org&#x2F;components&#x2F;index.html" rel="noopener" target="_blank">POI</a></li><li class="links-of-blogroll-item"> <a href="https://assertj.github.io/doc/" title="https:&#x2F;&#x2F;assertj.github.io&#x2F;doc&#x2F;" rel="noopener" target="_blank">AssertJ</a></li><li class="links-of-blogroll-item"> <a href="https://docshome.gitbook.io/nginx-docs/" title="https:&#x2F;&#x2F;docshome.gitbook.io&#x2F;nginx-docs&#x2F;" rel="noopener" target="_blank">Nginx-CN</a></li><li class="links-of-blogroll-item"> <a href="https://github.com/cglib/cglib" title="https:&#x2F;&#x2F;github.com&#x2F;cglib&#x2F;cglib" rel="noopener" target="_blank">cglib</a></li></ul></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div><a role="button" class="book-mark-link book-mark-link-fixed"></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner page posts-expand"><ul class="sub-menu menu"><li class="menu-item menu-item-docker"><a href="/cheat-sheet/docker" rel="section"><i class="fab fa-docker fa-fw"></i>Docker</a></li><li class="menu-item menu-item-vim"><a href="/cheat-sheet/vim/" rel="section"><i class="fab fa-vimeo fa-fw"></i>Vim</a></li><li class="menu-item menu-item-git"><a href="/cheat-sheet/git/" rel="section"><i class="fab fa-git-square fa-fw"></i>Git</a></li><li class="menu-item menu-item-bash"><a href="/cheat-sheet/bash/" rel="section"><i class="fab fa-vimeo fa-fw"></i>Bash</a></li><li class="menu-item menu-item-ffmpeg"><a href="/cheat-sheet/ffmpeg.html" rel="section"><i class="fas fa-random fa-fw"></i>ffmpeg</a></li><li class="menu-item menu-item-adb"><a href="/cheat-sheet/adb.html" rel="section"><i class="fas fa-terminal fa-fw"></i>adb</a></li></ul><ul class="sub-menu menu"><li class="menu-item menu-item-install"><a href="/cheat-sheet/docker/installation.html" rel="section">Install</a></li><li class="menu-item menu-item-container"><a href="/cheat-sheet/docker/containers.html" rel="section">Container</a></li><li class="menu-item menu-item-images"><a href="/cheat-sheet/docker/images.html" rel="section">Images</a></li><li class="menu-item menu-item-network"><a href="/cheat-sheet/docker/networks.html" rel="section">Network</a></li><li class="menu-item menu-item-registry&repository"><a href="/cheat-sheet/docker/registry-and-repository.html" rel="section">Registry&Repository</a></li><li class="menu-item menu-item-dockerfile"><a href="/cheat-sheet/docker/dockerfile.html" rel="section">Dockerfile</a></li><li class="menu-item menu-item-layers"><a href="/cheat-sheet/docker/layers.html" rel="section">Layers</a></li><li class="menu-item menu-item-links"><a href="/cheat-sheet/docker/links.html" rel="section">Links</a></li><li class="menu-item menu-item-volumne"><a href="/cheat-sheet/docker/volumnes.html" rel="section">Volumne</a></li><li class="menu-item menu-item-exposingports"><a href="/cheat-sheet/docker/exposing-ports.html" rel="section">ExposingPorts</a></li><li class="menu-item menu-item-docker-compose"><a href="/cheat-sheet/docker/docker-compose.html" rel="section">Docker-Compose</a></li><li class="menu-item menu-item-security"><a href="/cheat-sheet/docker/security.html" rel="section">Security</a></li></ul><div class="post-block" lang="zh-CN"><header class="post-header"><h1 class="post-title" itemprop="name headline"></h1><div class="post-meta-container"><ul class="breadcrumb"><li><a href="/cheat-sheet/">CHEAT-SHEET</a></li><li>DOCKER</li></ul></div></header><div class="post-body"><h1 id="Docker-Cheat-Sheet"><a href="#Docker-Cheat-Sheet" class="headerlink" title="Docker Cheat Sheet"></a>Docker Cheat Sheet</h1><p><strong>Want to improve this cheat sheet? See the <a href="#contributing">Contributing</a> section!</strong></p><h2 id="Why-Docker"><a href="#Why-Docker" class="headerlink" title="Why Docker"></a>Why Docker</h2><p>&quot;With Docker, developers can build any app in any language using any toolchain. “Dockerized” apps are completely portable and can run anywhere - colleagues’ OS X and Windows laptops, QA servers running Ubuntu in the cloud, and production data center VMs running Red Hat.</p><p>Developers can get going quickly by starting with one of the 13,000+ apps available on Docker Hub. Docker manages and tracks changes and dependencies, making it easier for sysadmins to understand how the apps that developers build work. And with Docker Hub, developers can automate their build pipeline and share artifacts with collaborators through public or private repositories.</p><p>Docker helps developers build and ship higher-quality applications, faster.&quot; -- <a target="_blank" rel="noopener" href="https://www.docker.com/what-docker#copy1">What is Docker</a></p><h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><p>I use <a target="_blank" rel="noopener" href="https://github.com/ohmyzsh/oh-my-zsh">Oh My Zsh</a> with the <a target="_blank" rel="noopener" href="https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins#docker">Docker plugin</a> for autocompletion of docker commands. YMMV.</p><h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><p>The 3.10.x kernel is <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/installation/binaries/#check-kernel-dependencies">the minimum requirement</a> for Docker.</p><h3 id="MacOS"><a href="#MacOS" class="headerlink" title="MacOS"></a>MacOS</h3><p>10.8 “Mountain Lion” or newer is required.</p><h3 id="Windows-10"><a href="#Windows-10" class="headerlink" title="Windows 10"></a>Windows 10</h3><p>Hyper-V must be enabled in BIOS</p><p>VT-D must also be enabled if available (Intel Processors).</p><h3 id="Windows-Server"><a href="#Windows-Server" class="headerlink" title="Windows Server"></a>Windows Server</h3><p>Windows Server 2016 is the minimum version required to install docker and docker-compose. Limitations exist on this version, such as multiple virtual networks and Linux containers. Windows Server 2019 and later are recommended.</p><h2 id="Best-Practices"><a href="#Best-Practices" class="headerlink" title="Best Practices"></a>Best Practices</h2><p>This is where general Docker best practices and war stories go:</p><ul><li><a target="_blank" rel="noopener" href="http://gregoryszorc.com/blog/2014/10/16/the-rabbit-hole-of-using-docker-in-automated-tests/">The Rabbit Hole of Using Docker in Automated Tests</a></li><li><a target="_blank" rel="noopener" href="https://twitter.com/bridgetkromhout">Bridget Kromhout</a> has a useful blog post on <a target="_blank" rel="noopener" href="http://sysadvent.blogspot.co.uk/2014/12/day-1-docker-in-production-reality-not.html">running Docker in production</a> at Dramafever.</li><li>There&#39;s also a best practices <a target="_blank" rel="noopener" href="http://developers.lyst.com/devops/2014/12/08/docker/">blog post</a> from Lyst.</li><li><a target="_blank" rel="noopener" href="https://tersesystems.com/2013/11/20/building-a-development-environment-with-docker/">Building a Development Environment With Docker</a></li><li><a target="_blank" rel="noopener" href="https://samsaffron.com/archive/2013/11/07/discourse-in-a-docker-container">Discourse in a Docker Container</a></li></ul><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>Sources:</p><ul><li><a target="_blank" rel="noopener" href="http://sssslide.com/speakerdeck.com/bmorearty/15-docker-tips-in-5-minutes">15 Docker Tips in 5 minutes</a></li><li><a target="_blank" rel="noopener" href="https://codefresh.io/blog/everyday-hacks-docker/">CodeFresh Everyday Hacks Docker</a></li></ul><h3 id="Prune"><a href="#Prune" class="headerlink" title="Prune"></a>Prune</h3><p>The new <a target="_blank" rel="noopener" href="https://github.com/docker/docker/pull/26108">Data Management Commands</a> have landed as of Docker 1.13:</p><ul><li><code>docker system prune</code></li><li><code>docker volume prune</code></li><li><code>docker network prune</code></li><li><code>docker container prune</code></li><li><code>docker image prune</code></li></ul><h3 id="df"><a href="#df" class="headerlink" title="df"></a>df</h3><p><code>docker system df</code> presents a summary of the space currently used by different docker objects.</p><h3 id="Heredoc-Docker-Container"><a href="#Heredoc-Docker-Container" class="headerlink" title="Heredoc Docker Container"></a>Heredoc Docker Container</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker build -t htop - &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">FROM alpine</span></span><br><span class="line"><span class="string">RUN apk --no-cache add htop</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><h3 id="Last-IDs"><a href="#Last-IDs" class="headerlink" title="Last IDs"></a>Last IDs</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">alias</span> dl=<span class="string">&#x27;docker ps -l -q&#x27;</span></span><br><span class="line">docker run ubuntu <span class="built_in">echo</span> hello world</span><br><span class="line">docker commit $(dl) helloworld</span><br></pre></td></tr></table></figure><h3 id="Commit-with-command-needs-Dockerfile"><a href="#Commit-with-command-needs-Dockerfile" class="headerlink" title="Commit with command (needs Dockerfile)"></a>Commit with command (needs Dockerfile)</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker commit -run=<span class="string">&#x27;&#123;&quot;Cmd&quot;:[&quot;postgres&quot;, &quot;-too -many -opts&quot;]&#125;&#x27;</span> $(dl) postgres</span><br></pre></td></tr></table></figure><h3 id="Get-IP-address"><a href="#Get-IP-address" class="headerlink" title="Get IP address"></a>Get IP address</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker inspect $(dl) | grep -wm1 IPAddress | cut -d <span class="string">&#x27;&quot;&#x27;</span> -f 4</span><br></pre></td></tr></table></figure><p>Or with <a target="_blank" rel="noopener" href="https://stedolan.github.io/jq/">jq</a> installed:</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker inspect $(dl) | jq -r <span class="string">&#x27;.[0].NetworkSettings.IPAddress&#x27;</span></span><br></pre></td></tr></table></figure><p>Or using a <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/commandline/inspect">go template</a>:</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker inspect -f <span class="string">&#x27;&#123;&#123; .NetworkSettings.IPAddress &#125;&#125;&#x27;</span> &lt;container_name&gt;</span><br></pre></td></tr></table></figure><p>Or when building an image from Dockerfile, when you want to pass in a build argument:</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">DOCKER_HOST_IP=`ifconfig | grep -E <span class="string">&quot;([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;&quot;</span> | grep -v 127.0.0.1 | awk <span class="string">&#x27;&#123; print $2 &#125;&#x27;</span> | cut -f2 -d: | head -n1`</span><br><span class="line"><span class="built_in">echo</span> DOCKER_HOST_IP = <span class="variable">$DOCKER_HOST_IP</span></span><br><span class="line">docker build \</span><br><span class="line">  --build-arg ARTIFACTORY_ADDRESS=<span class="variable">$DOCKER_HOST_IP</span> </span><br><span class="line">  -t sometag \</span><br><span class="line">  some-directory/</span><br></pre></td></tr></table></figure><h3 id="Get-port-mapping"><a href="#Get-port-mapping" class="headerlink" title="Get port mapping"></a>Get port mapping</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker inspect -f <span class="string">&#x27;&#123;&#123;range $p, $conf := .NetworkSettings.Ports&#125;&#125; &#123;&#123;$p&#125;&#125; -&gt; &#123;&#123;(index $conf 0).HostPort&#125;&#125; &#123;&#123;end&#125;&#125;&#x27;</span> &lt;containername&gt;</span><br></pre></td></tr></table></figure><h3 id="Find-containers-by-regular-expression"><a href="#Find-containers-by-regular-expression" class="headerlink" title="Find containers by regular expression"></a>Find containers by regular expression</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(docker ps -a | grep <span class="string">&quot;REGEXP_PATTERN&quot;</span> | cut -f1 -d<span class="string">&quot; &quot;</span>); <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="Get-Environment-Settings"><a href="#Get-Environment-Settings" class="headerlink" title="Get Environment Settings"></a>Get Environment Settings</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker run --rm ubuntu env</span><br></pre></td></tr></table></figure><h3 id="Kill-running-containers"><a href="#Kill-running-containers" class="headerlink" title="Kill running containers"></a>Kill running containers</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">kill</span> $(docker ps -q)</span><br></pre></td></tr></table></figure><h3 id="Delete-all-containers-force-running-or-stopped-containers"><a href="#Delete-all-containers-force-running-or-stopped-containers" class="headerlink" title="Delete all containers (force!! running or stopped containers)"></a>Delete all containers (force!! running or stopped containers)</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker rm -f $(docker ps -qa)</span><br></pre></td></tr></table></figure><h3 id="Delete-old-containers"><a href="#Delete-old-containers" class="headerlink" title="Delete old containers"></a>Delete old containers</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker ps -a | grep <span class="string">&#x27;weeks ago&#x27;</span> | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | xargs docker rm</span><br></pre></td></tr></table></figure><h3 id="Delete-stopped-containers"><a href="#Delete-stopped-containers" class="headerlink" title="Delete stopped containers"></a>Delete stopped containers</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker rm -v $(docker ps -a -q -f status=exited)</span><br></pre></td></tr></table></figure><h3 id="Delete-containers-after-stopping"><a href="#Delete-containers-after-stopping" class="headerlink" title="Delete containers after stopping"></a>Delete containers after stopping</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker stop $(docker ps -aq) &amp;&amp; docker rm -v $(docker ps -aq)</span><br></pre></td></tr></table></figure><h3 id="Delete-dangling-images"><a href="#Delete-dangling-images" class="headerlink" title="Delete dangling images"></a>Delete dangling images</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker rmi $(docker images -q -f dangling=<span class="literal">true</span>)</span><br></pre></td></tr></table></figure><h3 id="Delete-all-images"><a href="#Delete-all-images" class="headerlink" title="Delete all images"></a>Delete all images</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker rmi $(docker images -q)</span><br></pre></td></tr></table></figure><h3 id="Delete-dangling-volumes"><a href="#Delete-dangling-volumes" class="headerlink" title="Delete dangling volumes"></a>Delete dangling volumes</h3><p>As of Docker 1.9:</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker volume rm $(docker volume ls -q -f dangling=<span class="literal">true</span>)</span><br></pre></td></tr></table></figure><p>In 1.9.0, the filter <code>dangling=false</code> does <em>not</em> work - it is ignored and will list all volumes.</p><h3 id="Show-image-dependencies"><a href="#Show-image-dependencies" class="headerlink" title="Show image dependencies"></a>Show image dependencies</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker images -viz | dot -Tpng -o docker.png</span><br></pre></td></tr></table></figure><h3 id="Slimming-down-Docker-containers"><a href="#Slimming-down-Docker-containers" class="headerlink" title="Slimming down Docker containers"></a>Slimming down Docker containers</h3><ul><li>Cleaning APT in a <code>RUN</code> layer - This should be done in the same layer as other <code>apt</code> commands. Otherwise, the previous layers still persist the original information and your images will still be fat.<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> &#123;apt commands&#125; \</span></span><br><span class="line"><span class="bash">  &amp;&amp; apt-get clean \</span></span><br><span class="line"><span class="bash">  &amp;&amp; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*</span></span><br></pre></td></tr></table></figure></li><li>Flatten an image<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ID=$(docker run -d image-name /bin/bash)</span><br><span class="line">docker <span class="built_in">export</span> <span class="variable">$ID</span> | docker import – flat-image-name</span><br></pre></td></tr></table></figure></li><li>For backup<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ID=$(docker run -d image-name /bin/bash)</span><br><span class="line">(docker <span class="built_in">export</span> <span class="variable">$ID</span> | gzip -c &gt; image.tgz)</span><br><span class="line">gzip -dc image.tgz | docker import - flat-image-name</span><br></pre></td></tr></table></figure></li></ul><h3 id="Monitor-system-resource-utilization-for-running-containers"><a href="#Monitor-system-resource-utilization-for-running-containers" class="headerlink" title="Monitor system resource utilization for running containers"></a>Monitor system resource utilization for running containers</h3><p>To check the CPU, memory, and network I/O usage of a single container, you can use:</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker stats &lt;container&gt;</span><br></pre></td></tr></table></figure><p>For all containers listed by ID:</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker stats $(docker ps -q)</span><br></pre></td></tr></table></figure><p>For all containers listed by name:</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker stats $(docker ps --format <span class="string">&#x27;&#123;&#123;.Names&#125;&#125;&#x27;</span>)</span><br></pre></td></tr></table></figure><p>For all containers listed by image:</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker ps -a -f ancestor=ubuntu</span><br></pre></td></tr></table></figure><p>Remove all untagged images:</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker rmi $(docker images | grep “^” | awk <span class="string">&#x27;&#123;split($0,a,&quot; &quot;); print a[3]&#125;&#x27;</span>)</span><br></pre></td></tr></table></figure><p>Remove container by a regular expression:</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker ps -a | grep wildfly | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | xargs docker rm -f</span><br></pre></td></tr></table></figure><p>Remove all exited containers:</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker rm -f $(docker ps -a | grep Exit | awk <span class="string">&#x27;&#123; print $1 &#125;&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="Volumes-can-be-files"><a href="#Volumes-can-be-files" class="headerlink" title="Volumes can be files"></a>Volumes can be files</h3><p>Be aware that you can mount files as volumes. For example you can inject a configuration file like this:</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># copy file from container</span></span><br><span class="line">docker run --rm httpd cat /usr/<span class="built_in">local</span>/apache2/conf/httpd.conf &gt; httpd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># edit file</span></span><br><span class="line">vim httpd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># start container with modified configuration</span></span><br><span class="line">docker run --rm -it -v <span class="string">&quot;<span class="variable">$PWD</span>/httpd.conf:/usr/local/apache2/conf/httpd.conf:ro&quot;</span> -p <span class="string">&quot;80:80&quot;</span> httpd</span><br></pre></td></tr></table></figure><h2 id="Contributing"><a href="#Contributing" class="headerlink" title="Contributing"></a>Contributing</h2><p>Here&#39;s how to contribute to this cheat sheet.</p><h3 id="Open-README-md"><a href="#Open-README-md" class="headerlink" title="Open README.md"></a>Open README.md</h3><p>Click <a target="_blank" rel="noopener" href="https://github.com/wsargent/docker-cheat-sheet/blob/master/README.md">README.md</a> &lt;-- this link</p><p><img data-src="images/click.png" alt="Click This"></p><h3 id="Edit-Page"><a href="#Edit-Page" class="headerlink" title="Edit Page"></a>Edit Page</h3><p><img data-src="images/edit.png" alt="Edit This"></p><h3 id="Make-Changes-and-Commit"><a href="#Make-Changes-and-Commit" class="headerlink" title="Make Changes and Commit"></a>Make Changes and Commit</h3><p><img data-src="images/change.png" alt="Change This"></p><p><img data-src="images/commit.png" alt="Commit"></p></div></div><ul class="breadcrumb"><li><a href="/cheat-sheet/">CHEAT-SHEET</a></li><li>DOCKER</li></ul></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">湘ICP备19011756号-1</a></div><div class="copyright"> &copy; 2021 – <span itemprop="copyrightYear">2022</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">JIAHE</span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script><script src="/js/third-party/search/local-search.js"></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdn.jsdelivr.net/npm/pdfobject@2.2.7/pdfobject.min.js","integrity":"sha256-ph3Dk89VmuTVXG6x/RDzk53SU9LPdAh1tpv0UvnDZ2I="},"url":"/lib/pdf/web/viewer.html"}</script><script src="/js/third-party/tags/pdf.js"></script><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/quicklink@2.2.0/dist/quicklink.umd.js" integrity="sha256-4kQf9z5ntdQrzsBC3YSHnEz02Z9C1UeW/E9OgnvlzSY=" crossorigin="anonymous"></script><script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"ignores":null,"url":"http://xiaojianzheng.cn/cheat-sheet/docker/"}</script><script src="/js/third-party/quicklink.js"></script></body></html>